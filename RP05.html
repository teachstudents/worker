<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading Practice 05</title>
    <style>
        :root {
            --primary: #2e4057;
            --secondary: #048a81;
            --success: #388e3c;
            --error: #c62828;
            --warning: #ef6c00;
            --light: #f5f9f9;
            --dark: #1a252f;
            --gray: #546e7a;
            --border: #cfd8dc;
            --shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
            font-size: 16px;
            line-height: 1.6;
            color: #263238;
            background-color: #eceff1;
            padding: 15px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: var(--shadow);
            overflow: visible;
        }
        
        /* Header Styles */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .header-title {
            font-size: 1.4rem;
            font-weight: 600;
        }
        
        .header-stats {
            display: flex;
            gap: 20px;
            font-size: 1rem;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .timer {
            font-weight: bold;
            color: #ffcc80;
        }
        
        .score-display {
            font-weight: bold;
        }
        
        /* Start Screen */
        .start-screen {
            padding: 40px;
            text-align: center;
        }
        
        .start-screen h2 {
            margin-bottom: 25px;
            color: var(--primary);
            font-size: 1.8rem;
        }
        
        .name-input-group {
            margin: 30px 0;
        }
        
        .name-input-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            font-size: 1.1rem;
        }
        
        .name-input {
            width: 100%;
            max-width: 400px;
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1.1rem;
            transition: border-color 0.3s;
        }
        
        .name-input:focus {
            outline: none;
            border-color: var(--secondary);
        }
        
        .error-message {
            color: var(--error);
            margin-top: 8px;
            font-size: 0.95rem;
            display: none;
        }
        
        .error-message.show {
            display: block;
        }
        
        .start-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 14px 35px;
            font-size: 1.1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
            font-weight: 500;
            margin-top: 10px;
        }
        
        .start-btn:hover {
            background: #00796b;
        }
        
        .start-btn:disabled {
            background: #90a4ae;
            cursor: not-allowed;
        }
        
        .instructions {
            background: var(--light);
            border-left: 4px solid var(--secondary);
            padding: 15px;
            margin: 25px 0;
            border-radius: 0 8px 8px 0;
            text-align: left;
        }
        
        .instructions ul {
            padding-left: 20px;
            margin-top: 10px;
        }
        
        .instructions li {
            margin-bottom: 5px;
        }
        
        /* Two-Column Layout for Test Content */
        .test-layout {
            display: none;
            padding: 20px;
            gap: 20px;
        }
        
        .test-layout.active {
            display: grid;
            grid-template-columns: 3fr 1fr; /* 75% text, 25% questions */
            animation: fadeIn 0.4s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Left Column: Passage Text */
        .passage-column {
            padding-right: 15px;
            border-right: 1px solid var(--border);
            max-height: calc(100vh - 150px);
            overflow-y: auto;
        }
        
        .passage-title {
            color: var(--primary);
            font-size: 1.5rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--secondary);
        }
        
        .passage-text {
            background: var(--light);
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 1.05rem;
            line-height: 1.7;
            border-left: 4px solid var(--secondary);
        }
        
        /* Right Column: Questions - FIXED SCROLLING */
        .questions-column {
            padding-left: 15px;
            overflow-y: auto;
            max-height: calc(100vh - 150px);
            padding-bottom: 20px;
            position: relative;
            z-index: 10;
        }
        
        .question-box {
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        
        .question-text {
            font-size: 1rem;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 12px;
            line-height: 1.5;
        }
        
        .question-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.85rem;
            color: var(--gray);
        }
        
        .skill-tag {
            background: #e0f2f1;
            color: var(--secondary);
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 500;
            font-size: 0.8rem;
        }
        
        .options {
            display: grid;
            gap: 8px;
            margin-top: 8px;
        }
        
        .option-btn {
            padding: 10px 15px;
            border: 2px solid var(--border);
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.95rem;
            text-align: left;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .option-btn:hover {
            background: #f5f5f5;
            border-color: var(--secondary);
        }
        
        .option-btn.correct {
            background: #c8e6c9;
            border-color: var(--success);
            color: #1b5e20;
            font-weight: 500;
        }
        
        .option-btn.incorrect {
            background: #ffcdd2;
            border-color: var(--error);
            color: #b71c1c;
            font-weight: 500;
        }
        
        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.85;
        }
        
        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--secondary);
            color: white;
            font-weight: bold;
            font-size: 0.85rem;
            flex-shrink: 0;
        }
        
        .option-btn.correct .option-letter {
            background: var(--success);
        }
        
        .option-btn.incorrect .option-letter {
            background: var(--error);
        }
        
        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 6px;
            display: none;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .feedback.correct {
            background: #c8e6c9;
            border: 1px solid var(--success);
            color: #1b5e20;
        }
        
        .feedback.incorrect {
            background: #ffcdd2;
            border: 1px solid var(--error);
            color: #b71c1c;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 3px;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.95rem;
        }
        
        /* Navigation */
        .navigation {
            padding: 15px 25px;
            background: var(--light);
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-btn {
            padding: 10px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .nav-btn.prev {
            background: #78909c;
            color: white;
        }
        
        .nav-btn.next {
            background: var(--secondary);
            color: white;
        }
        
        .nav-btn.next:hover {
            background: #00796b;
        }
        
        .nav-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .passage-indicator {
            font-weight: 500;
            color: var(--primary);
            font-size: 1rem;
        }
        
        /* Results Screen */
        .results-screen {
            padding: 30px;
            display: none;
            text-align: center;
        }
        
        .results-screen.active {
            display: block;
        }
        
        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--success) 0%, #43a047 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            margin: 0 auto 25px;
            box-shadow: 0 4px 15px rgba(46, 125, 50, 0.4);
        }
        
        .results-header {
            margin-bottom: 30px;
        }
        
        .results-header h2 {
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .results-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 25px 0;
            text-align: left;
        }
        
        .meta-item {
            background: var(--light);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--secondary);
        }
        
        .meta-label {
            font-size: 0.9rem;
            color: var(--gray);
            margin-bottom: 5px;
        }
        
        .meta-value {
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--dark);
        }
        
        .skills-summary {
            margin: 30px 0;
            text-align: left;
        }
        
        .skills-summary h3 {
            margin-bottom: 15px;
            color: var(--primary);
            font-size: 1.4rem;
        }
        
        .skill-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            background: var(--light);
        }
        
        .skill-item.missed {
            background: #ffebee;
            border-left: 4px solid var(--error);
        }
        
        .skill-item.mastered {
            border-left: 4px solid var(--success);
        }
        
        .export-section {
            margin: 35px 0;
            padding-top: 25px;
            border-top: 1px solid var(--border);
        }
        
        .export-section h3 {
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 1.4rem;
        }
        
        .export-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .export-btn {
            padding: 14px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.05rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        .btn-wechat {
            background: #07c160;
            color: white;
        }
        
        .btn-email {
            background: var(--error);
            color: white;
        }
        
        .btn-lms {
            background: var(--secondary);
            color: white;
        }
        
        .btn-download {
            background: #5e35b1;
            color: white;
        }
        
        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--dark);
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            display: none;
            animation: slideIn 0.3s, fadeOut 0.3s 2.7s forwards;
        }
        
        @keyframes slideIn {
            from { transform: translateX(200px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        /* Responsive adjustments */
        @media (max-width: 900px) {
            .test-layout.active {
                grid-template-columns: 1fr; /* Stack on smaller screens */
            }
            
            .passage-column {
                border-right: none;
                border-bottom: 1px solid var(--border);
                padding-right: 0;
                padding-bottom: 15px;
                margin-bottom: 15px;
                max-height: none;
            }
            
            .questions-column {
                padding-left: 0;
                max-height: none;
            }
            
            body {
                padding: 10px;
            }
            
            .header {
                padding: 12px 15px;
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .header-stats {
                width: 100%;
                justify-content: center;
            }
            
            .passage-text {
                padding: 20px 15px;
                font-size: 1rem;
            }
            
            .question-box {
                padding: 12px;
            }
            
            .export-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .export-btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header with Timer and Score -->
        <div class="header">
            <div class="header-title">Reading Practice 05</div>
            <div class="header-stats">
                <div class="stat-item">
                    <span>‚è±Ô∏è</span>
                    <span class="timer" id="timer">00:00</span>
                </div>
                <div class="stat-item">
                    <span>‚úÖ</span>
                    <span class="score-display" id="score-display">0/20</span>
                </div>
            </div>
        </div>
        
        <!-- Start Screen -->
        <div class="start-screen" id="start-screen">
            <h2>Welcome to Reading Practice 05</h2>
            <p>Please enter your name to begin the test.</p>
            
            <div class="name-input-group">
                <label for="tester-name">Your Name (Pinyin or English only)</label>
                <input type="text" id="tester-name" class="name-input" placeholder="e.g., Zhang Min or Alex Johnson">
                <div class="error-message" id="name-error">Please use Pinyin or English characters only. Chinese characters are not accepted.</div>
            </div>
            
            <div class="instructions">
                <p><strong>Test Instructions:</strong></p>
                <ul>
                    <li>Read each passage carefully before answering questions</li>
                    <li>Select the best answer for each question</li>
                    <li>You will receive immediate feedback after each answer</li>
                    <li>The test has 20 questions across 5 passages</li>
                    <li>Estimated time: 35-40 minutes</li>
                </ul>
            </div>
            
            <button class="start-btn" id="start-btn">Start Test</button>
        </div>
        
        <!-- Test Layout: Two Columns -->
        <div class="test-layout" id="test-layout">
            <!-- Left Column: Passage Text -->
            <div class="passage-column">
                <!-- Passage 1: Healthy Sleep Habits -->
                <div class="passage-section active" data-passage="1">
                    <h2 class="passage-title">Passage 1: Healthy Sleep Habits</h2>
                    <div class="passage-text">
                        <p>Quality sleep is essential for physical health, mental clarity, and emotional well-being. These evidence-based habits can help you sleep better:</p>
                        <p><strong>üåô Keep a consistent schedule:</strong> Go to bed and wake up at the same time every day, even on weekends. This regulates your body's internal clock.</p>
                        <p><strong>üì± Create a bedtime routine:</strong> Spend 30-60 minutes winding down with calming activities like reading, gentle stretching, or listening to soft music. Avoid screens during this time.</p>
                        <p><strong>üõèÔ∏è Optimize your sleep environment:</strong> Keep your bedroom dark, quiet, and cool (around 18-20¬∞C or 65-68¬∞F). Use comfortable bedding and consider blackout curtains or a white noise machine if needed.</p>
                        <p><strong>‚òï Watch what you consume:</strong> Limit caffeine after 2 PM and avoid heavy meals, alcohol, or nicotine close to bedtime, as these can disrupt sleep quality.</p>
                        <p><em>Tip: If you can't fall asleep after 20 minutes, get up and do a quiet activity until you feel sleepy. This prevents your bed from becoming associated with frustration.</em></p>
                    </div>
                </div>
                
                <!-- Passage 2: A New Hobby -->
                <div class="passage-section" data-passage="2">
                    <h2 class="passage-title">Passage 2: A New Hobby</h2>
                    <div class="passage-text">
                        <p>I never thought I'd enjoy gardening. To me, it seemed like hard work with dirty hands and uncertain results. But when my neighbor, Mrs. Kim, invited me to help plant her spring flowers, I agreed out of politeness.</p>
                        <p>That Saturday morning changed everything. Mrs. Kim showed me how to prepare the soil, choose the right seeds, and water just enough‚Äînot too much, not too little. "Plants are like people," she said. "They need attention, but not too much."</p>
                        <p>Weeks later, I watched in amazement as tiny green shoots emerged from the soil. Then came buds, and finally, vibrant purple coneflowers swaying in the breeze. The pride I felt was unexpected. So was the calm I experienced while tending to the garden‚Äîa quiet focus that melted away daily stress.</p>
                        <p>Now, my small balcony garden is my sanctuary. I've learned that growth takes time, patience, and care‚Äînot just for plants, but for ourselves. As Mrs. Kim always says: "The best gardens, like the best lives, grow one day at a time."</p>
                    </div>
                </div>
                
                <!-- Passage 3: Climate Change Basics -->
                <div class="passage-section" data-passage="3">
                    <h2 class="passage-title">Passage 3: Climate Change Basics</h2>
                    <div class="passage-text">
                        <p>Climate change refers to long-term shifts in global temperatures and weather patterns. While climate has changed naturally throughout Earth's history, current changes are happening faster than ever before‚Äîand human activities are the main cause.</p>
                        <p>When we burn fossil fuels (coal, oil, natural gas) for energy, transportation, and industry, we release greenhouse gases like carbon dioxide into the atmosphere. These gases trap heat from the sun, causing the planet to warm‚Äîa process called the greenhouse effect.</p>
                        <p>Consequences of climate change include: rising sea levels from melting ice, more frequent and intense extreme weather (heatwaves, storms, droughts), shifts in animal habitats, and threats to food and water security. Vulnerable communities often face the greatest impacts.</p>
                        <p>Solutions require action at all levels. Individuals can reduce energy use, choose sustainable transport, and support eco-friendly products. Communities can invest in renewable energy and green spaces. Governments and businesses must implement policies that limit emissions and promote innovation.</p>
                        <p>As climate scientist Dr. Lena Torres states: "Every fraction of a degree matters. The choices we make today shape the world for generations to come." Collective action, grounded in science and compassion, offers hope for a stable climate future.</p>
                    </div>
                </div>
                
                <!-- Passage 4: The Benefits of Reading -->
                <div class="passage-section" data-passage="4">
                    <h2 class="passage-title">Passage 4: The Benefits of Reading</h2>
                    <div class="passage-text">
                        <p>In an age of short videos and quick scrolling, reading books might seem old-fashioned. Yet research consistently shows that deep reading‚Äîengaging with complex texts for sustained periods‚Äîoffers unique benefits for the brain and well-being.</p>
                        <p>Reading strengthens cognitive muscles. It improves vocabulary, enhances focus, and builds empathy by allowing us to experience lives and perspectives different from our own. Studies using brain scans show that reading fiction activates regions associated with understanding others' thoughts and feelings.</p>
                        <p>Regular reading also reduces stress. Just six minutes of reading can lower heart rate and ease muscle tension more effectively than many other relaxation methods. Unlike passive screen time, reading requires active mental engagement, which can improve sleep quality when done before bed.</p>
                        <p>Importantly, reading fosters critical thinking. Analyzing plots, evaluating arguments, and connecting ideas across texts develop skills essential for navigating complex information in school, work, and daily life. As author Neil Gaiman observes: "A book is a dream you hold in your hands." That dream shapes not just our imagination, but our capacity to understand and improve the world.</p>
                    </div>
                </div>
                
                <!-- Passage 5: Digital Citizenship -->
                <div class="passage-section" data-passage="5">
                    <h2 class="passage-title">Passage 5: Digital Citizenship</h2>
                    <div class="passage-text">
                        <p>Being a good digital citizen means using technology responsibly, respectfully, and safely. As our lives become increasingly connected online, these skills are essential for everyone‚Äînot just young people.</p>
                        <p>Key principles include: <strong>Protecting privacy</strong> (using strong passwords, thinking before sharing personal information), <strong>Respecting others</strong> (communicating kindly, avoiding cyberbullying, respecting different viewpoints), and <strong>Evaluating information</strong> (checking sources, recognizing bias, avoiding misinformation).</p>
                        <p>Practical habits strengthen digital citizenship. Before posting or sharing, pause and ask: Is this true? Is this kind? Is this necessary? When encountering upsetting content, take a break before responding. Remember that digital footprints last‚Äîwhat you post today may be seen by future employers, schools, or friends.</p>
                        <p>Importantly, digital citizenship isn't about fear or restriction. It's about empowerment: using technology to learn, connect, create, and contribute positively. As educator Dr. Marcus Chen notes: "The goal isn't to avoid the digital world, but to navigate it with wisdom and integrity." In a connected age, these choices shape not just our online experience, but our communities and society.</p>
                    </div>
                </div>
            </div>
            
            <!-- Right Column: Questions -->
            <div class="questions-column">
                <!-- Questions for Passage 1 -->
                <div class="questions-section active" data-passage="1">
                    <div class="question-box" id="qbox-1">
                        <div class="question-meta">
                            <span>Q1</span>
                            <span class="skill-tag">Detail</span>
                        </div>
                        <p class="question-text">According to the passage, what temperature range is recommended for a bedroom?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(1, 'A', this)">
                                <span class="option-letter">A</span> 15-17¬∞C (59-63¬∞F)
                            </button>
                            <button class="option-btn" onclick="checkAnswer(1, 'B', this)">
                                <span class="option-letter">B</span> 18-20¬∞C (65-68¬∞F)
                            </button>
                            <button class="option-btn" onclick="checkAnswer(1, 'C', this)">
                                <span class="option-letter">C</span> 21-23¬∞C (70-73¬∞F)
                            </button>
                            <button class="option-btn" onclick="checkAnswer(1, 'D', this)">
                                <span class="option-letter">D</span> 24-26¬∞C (75-79¬∞F)
                            </button>
                        </div>
                        <div class="feedback" id="feedback-1"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-2">
                        <div class="question-meta">
                            <span>Q2</span>
                            <span class="skill-tag">Detail</span>
                        </div>
                        <p class="question-text">What should you do if you can't fall asleep after 20 minutes?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(2, 'A', this)">
                                <span class="option-letter">A</span> Stay in bed and try harder
                            </button>
                            <button class="option-btn" onclick="checkAnswer(2, 'B', this)">
                                <span class="option-letter">B</span> Get up and do a quiet activity until sleepy
                            </button>
                            <button class="option-btn" onclick="checkAnswer(2, 'C', this)">
                                <span class="option-letter">C</span> Check your phone for relaxation tips
                            </button>
                            <button class="option-btn" onclick="checkAnswer(2, 'D', this)">
                                <span class="option-letter">D</span> Drink caffeine to stay awake longer
                            </button>
                        </div>
                        <div class="feedback" id="feedback-2"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-3">
                        <div class="question-meta">
                            <span>Q3</span>
                            <span class="skill-tag">Detail (NOT)</span>
                        </div>
                        <p class="question-text">Which is NOT mentioned as a sleep habit tip?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(3, 'A', this)">
                                <span class="option-letter">A</span> Keeping a consistent sleep schedule
                            </button>
                            <button class="option-btn" onclick="checkAnswer(3, 'B', this)">
                                <span class="option-letter">B</span> Creating a bedtime routine
                            </button>
                            <button class="option-btn" onclick="checkAnswer(3, 'C', this)">
                                <span class="option-letter">C</span> Exercising vigorously right before bed
                            </button>
                            <button class="option-btn" onclick="checkAnswer(3, 'D', this)">
                                <span class="option-letter">D</span> Watching what you consume before bed
                            </button>
                        </div>
                        <div class="feedback" id="feedback-3"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-4">
                        <div class="question-meta">
                            <span>Q4</span>
                            <span class="skill-tag">Vocabulary</span>
                        </div>
                        <p class="question-text">In the passage, "sanctuary" (in "my small balcony garden is my sanctuary") most nearly means:</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(4, 'A', this)">
                                <span class="option-letter">A</span> a place of safety and peace
                            </button>
                            <button class="option-btn" onclick="checkAnswer(4, 'B', this)">
                                <span class="option-letter">B</span> a large public park
                            </button>
                            <button class="option-btn" onclick="checkAnswer(4, 'C', this)">
                                <span class="option-letter">C</span> a place for growing vegetables only
                            </button>
                            <button class="option-btn" onclick="checkAnswer(4, 'D', this)">
                                <span class="option-letter">D</span> a place that requires expensive tools
                            </button>
                        </div>
                        <div class="feedback" id="feedback-4"></div>
                    </div>
                </div>
                
                <!-- Questions for Passage 2 -->
                <div class="questions-section" data-passage="2">
                    <div class="question-box" id="qbox-5">
                        <div class="question-meta">
                            <span>Q5</span>
                            <span class="skill-tag">Detail</span>
                        </div>
                        <p class="question-text">Why did the writer initially agree to help Mrs. Kim with gardening?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(5, 'A', this)">
                                <span class="option-letter">A</span> They loved gardening already
                            </button>
                            <button class="option-btn" onclick="checkAnswer(5, 'B', this)">
                                <span class="option-letter">B</span> Out of politeness
                            </button>
                            <button class="option-btn" onclick="checkAnswer(5, 'C', this)">
                                <span class="option-letter">C</span> They needed flowers for an event
                            </button>
                            <button class="option-btn" onclick="checkAnswer(5, 'D', this)">
                                <span class="option-letter">D</span> Mrs. Kim paid them to help
                            </button>
                        </div>
                        <div class="feedback" id="feedback-5"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-6">
                        <div class="question-meta">
                            <span>Q6</span>
                            <span class="skill-tag">Inference</span>
                        </div>
                        <p class="question-text">What can we infer about Mrs. Kim's approach to gardening?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(6, 'A', this)">
                                <span class="option-letter">A</span> She believes plants need constant attention
                            </button>
                            <button class="option-btn" onclick="checkAnswer(6, 'B', this)">
                                <span class="option-letter">B</span> She values balance and patience in caring for plants
                            </button>
                            <button class="option-btn" onclick="checkAnswer(6, 'C', this)">
                                <span class="option-letter">C</span> She only grows vegetables, not flowers
                            </button>
                            <button class="option-btn" onclick="checkAnswer(6, 'D', this)">
                                <span class="option-letter">D</span> She prefers gardening alone
                            </button>
                        </div>
                        <div class="feedback" id="feedback-6"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-7">
                        <div class="question-meta">
                            <span>Q7</span>
                            <span class="skill-tag">Vocabulary</span>
                        </div>
                        <p class="question-text">In paragraph 3, "vibrant" most probably means:</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(7, 'A', this)">
                                <span class="option-letter">A</span> dull and faded
                            </button>
                            <button class="option-btn" onclick="checkAnswer(7, 'B', this)">
                                <span class="option-letter">B</span> bright and full of life
                            </button>
                            <button class="option-btn" onclick="checkAnswer(7, 'C', this)">
                                <span class="option-letter">C</span> small and delicate
                            </button>
                            <button class="option-btn" onclick="checkAnswer(7, 'D', this)">
                                <span class="option-letter">D</span> expensive and rare
                            </button>
                        </div>
                        <div class="feedback" id="feedback-7"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-8">
                        <div class="question-meta">
                            <span>Q8</span>
                            <span class="skill-tag">Main Idea</span>
                        </div>
                        <p class="question-text">What is the central message of this passage?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(8, 'A', this)">
                                <span class="option-letter">A</span> Gardening is only for people with large yards
                            </button>
                            <button class="option-btn" onclick="checkAnswer(8, 'B', this)">
                                <span class="option-letter">B</span> Trying new activities with patience can lead to unexpected joy and personal growth
                            </button>
                            <button class="option-btn" onclick="checkAnswer(8, 'C', this)">
                                <span class="option-letter">C</span> Purple coneflowers are the easiest plants to grow
                            </button>
                            <button class="option-btn" onclick="checkAnswer(8, 'D', this)">
                                <span class="option-letter">D</span> Neighbors should always help each other with chores
                            </button>
                        </div>
                        <div class="feedback" id="feedback-8"></div>
                    </div>
                </div>
                
                <!-- Questions for Passage 3 -->
                <div class="questions-section" data-passage="3">
                    <div class="question-box" id="qbox-9">
                        <div class="question-meta">
                            <span>Q9</span>
                            <span class="skill-tag">Detail</span>
                        </div>
                        <p class="question-text">According to the passage, what is the main cause of current climate change?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(9, 'A', this)">
                                <span class="option-letter">A</span> Natural climate cycles
                            </button>
                            <button class="option-btn" onclick="checkAnswer(9, 'B', this)">
                                <span class="option-letter">B</span> Human activities releasing greenhouse gases
                            </button>
                            <button class="option-btn" onclick="checkAnswer(9, 'C', this)">
                                <span class="option-letter">C</span> Changes in the sun's energy
                            </button>
                            <button class="option-btn" onclick="checkAnswer(9, 'D', this)">
                                <span class="option-letter">D</span> Volcanic eruptions
                            </button>
                        </div>
                        <div class="feedback" id="feedback-9"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-10">
                        <div class="question-meta">
                            <span>Q10</span>
                            <span class="skill-tag">Reference</span>
                        </div>
                        <p class="question-text">In paragraph 2, what does "these gases" refer to?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(10, 'A', this)">
                                <span class="option-letter">A</span> fossil fuels
                            </button>
                            <button class="option-btn" onclick="checkAnswer(10, 'B', this)">
                                <span class="option-letter">B</span> greenhouse gases like carbon dioxide
                            </button>
                            <button class="option-btn" onclick="checkAnswer(10, 'C', this)">
                                <span class="option-letter">C</span> oxygen and nitrogen
                            </button>
                            <button class="option-btn" onclick="checkAnswer(10, 'D', this)">
                                <span class="option-letter">D</span> water vapor from oceans
                            </button>
                        </div>
                        <div class="feedback" id="feedback-10"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-11">
                        <div class="question-meta">
                            <span>Q11</span>
                            <span class="skill-tag">Detail</span>
                        </div>
                        <p class="question-text">Which consequence of climate change is mentioned in the passage?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(11, 'A', this)">
                                <span class="option-letter">A</span> More frequent extreme weather events
                            </button>
                            <button class="option-btn" onclick="checkAnswer(11, 'B', this)">
                                <span class="option-letter">B</span> Decreased global population
                            </button>
                            <button class="option-btn" onclick="checkAnswer(11, 'C', this)">
                                <span class="option-letter">C</span> Longer winter seasons everywhere
                            </button>
                            <button class="option-btn" onclick="checkAnswer(11, 'D', this)">
                                <span class="option-letter">D</span> Increased volcanic activity
                            </button>
                        </div>
                        <div class="feedback" id="feedback-11"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-12">
                        <div class="question-meta">
                            <span>Q12</span>
                            <span class="skill-tag">Inference</span>
                        </div>
                        <p class="question-text">Based on the passage, why might vulnerable communities face greater climate impacts?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(12, 'A', this)">
                                <span class="option-letter">A</span> They cause more pollution than others
                            </button>
                            <button class="option-btn" onclick="checkAnswer(12, 'B', this)">
                                <span class="option-letter">B</span> They often have fewer resources to adapt to changes
                            </button>
                            <button class="option-btn" onclick="checkAnswer(12, 'C', this)">
                                <span class="option-letter">C</span> They live only in coastal areas
                            </button>
                            <button class="option-btn" onclick="checkAnswer(12, 'D', this)">
                                <span class="option-letter">D</span> They refuse to use renewable energy
                            </button>
                        </div>
                        <div class="feedback" id="feedback-12"></div>
                    </div>
                </div>
                
                <!-- Questions for Passage 4 -->
                <div class="questions-section" data-passage="4">
                    <div class="question-box" id="qbox-13">
                        <div class="question-meta">
                            <span>Q13</span>
                            <span class="skill-tag">Detail</span>
                        </div>
                        <p class="question-text">According to the passage, how does reading fiction affect the brain?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(13, 'A', this)">
                                <span class="option-letter">A</span> It reduces brain activity overall
                            </button>
                            <button class="option-btn" onclick="checkAnswer(13, 'B', this)">
                                <span class="option-letter">B</span> It activates regions associated with understanding others' thoughts and feelings
                            </button>
                            <button class="option-btn" onclick="checkAnswer(13, 'C', this)">
                                <span class="option-letter">C</span> It only improves mathematical skills
                            </button>
                            <button class="option-btn" onclick="checkAnswer(13, 'D', this)">
                                <span class="option-letter">D</span> It makes people prefer watching videos
                            </button>
                        </div>
                        <div class="feedback" id="feedback-13"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-14">
                        <div class="question-meta">
                            <span>Q14</span>
                            <span class="skill-tag">Detail</span>
                        </div>
                        <p class="question-text">What benefit of reading is mentioned regarding stress?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(14, 'A', this)">
                                <span class="option-letter">A</span> Reading increases stress hormones
                            </button>
                            <button class="option-btn" onclick="checkAnswer(14, 'B', this)">
                                <span class="option-letter">B</span> Just six minutes of reading can lower heart rate and ease tension
                            </button>
                            <button class="option-btn" onclick="checkAnswer(14, 'C', this)">
                                <span class="option-letter">C</span> Reading before bed always causes insomnia
                            </button>
                            <button class="option-btn" onclick="checkAnswer(14, 'D', this)">
                                <span class="option-letter">D</span> Reading is only relaxing if done outdoors
                            </button>
                        </div>
                        <div class="feedback" id="feedback-14"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-15">
                        <div class="question-meta">
                            <span>Q15</span>
                            <span class="skill-tag">Text Structure</span>
                        </div>
                        <p class="question-text">How is paragraph 3 related to paragraph 2 in the passage?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(15, 'A', this)">
                                <span class="option-letter">A</span> Paragraph 3 provides a contrasting viewpoint about reading
                            </button>
                            <button class="option-btn" onclick="checkAnswer(15, 'B', this)">
                                <span class="option-letter">B</span> Paragraph 3 adds another benefit of reading (stress reduction) to those mentioned in paragraph 2
                            </button>
                            <button class="option-btn" onclick="checkAnswer(15, 'C', this)">
                                <span class="option-letter">C</span> Paragraph 3 repeats the same information as paragraph 2
                            </button>
                            <button class="option-btn" onclick="checkAnswer(15, 'D', this)">
                                <span class="option-letter">D</span> Paragraph 3 introduces a completely unrelated topic about sleep
                            </button>
                        </div>
                        <div class="feedback" id="feedback-15"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-16">
                        <div class="question-meta">
                            <span>Q16</span>
                            <span class="skill-tag">Author's Purpose</span>
                        </div>
                        <p class="question-text">What is the writer's main purpose in writing this passage?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(16, 'A', this)">
                                <span class="option-letter">A</span> To argue that all screen time should be eliminated
                            </button>
                            <button class="option-btn" onclick="checkAnswer(16, 'B', this)">
                                <span class="option-letter">B</span> To present research showing reading offers cognitive, emotional, and critical thinking benefits
                            </button>
                            <button class="option-btn" onclick="checkAnswer(16, 'C', this)">
                                <span class="option-letter">C</span> To promote specific books or authors
                            </button>
                            <button class="option-btn" onclick="checkAnswer(16, 'D', this)">
                                <span class="option-letter">D</span> To criticize people who prefer digital media
                            </button>
                        </div>
                        <div class="feedback" id="feedback-16"></div>
                    </div>
                </div>
                
                <!-- Questions for Passage 5 -->
                <div class="questions-section" data-passage="5">
                    <div class="question-box" id="qbox-17">
                        <div class="question-meta">
                            <span>Q17</span>
                            <span class="skill-tag">Detail</span>
                        </div>
                        <p class="question-text">According to the passage, what is one principle of good digital citizenship?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(17, 'A', this)">
                                <span class="option-letter">A</span> Sharing all personal information openly online
                            </button>
                            <button class="option-btn" onclick="checkAnswer(17, 'B', this)">
                                <span class="option-letter">B</span> Protecting privacy and evaluating information
                            </button>
                            <button class="option-btn" onclick="checkAnswer(17, 'C', this)">
                                <span class="option-letter">C</span> Responding immediately to all online messages
                            </button>
                            <button class="option-btn" onclick="checkAnswer(17, 'D', this)">
                                <span class="option-letter">D</span> Avoiding all online interactions
                            </button>
                        </div>
                        <div class="feedback" id="feedback-17"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-18">
                        <div class="question-meta">
                            <span>Q18</span>
                            <span class="skill-tag">Inference</span>
                        </div>
                        <p class="question-text">Based on the passage, what might be a result of practicing digital citizenship?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(18, 'A', this)">
                                <span class="option-letter">A</span> Increased online conflicts and misunderstandings
                            </button>
                            <button class="option-btn" onclick="checkAnswer(18, 'B', this)">
                                <span class="option-letter">B</span> More positive, informed, and respectful online communities
                            </button>
                            <button class="option-btn" onclick="checkAnswer(18, 'C', this)">
                                <span class="option-letter">C</span> Complete avoidance of technology
                            </button>
                            <button class="option-btn" onclick="checkAnswer(18, 'D', this)">
                                <span class="option-letter">D</span> Faster internet speeds for everyone
                            </button>
                        </div>
                        <div class="feedback" id="feedback-18"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-19">
                        <div class="question-meta">
                            <span>Q19</span>
                            <span class="skill-tag">Vocabulary</span>
                        </div>
                        <p class="question-text">In the final paragraph, "integrity" most nearly means:</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(19, 'A', this)">
                                <span class="option-letter">A</span> following rules only when being watched
                            </button>
                            <button class="option-btn" onclick="checkAnswer(19, 'B', this)">
                                <span class="option-letter">B</span> honesty and strong moral principles
                            </button>
                            <button class="option-btn" onclick="checkAnswer(19, 'C', this)">
                                <span class="option-letter">C</span> technical skill with computers
                            </button>
                            <button class="option-btn" onclick="checkAnswer(19, 'D', this)">
                                <span class="option-letter">D</span> popularity on social media
                            </button>
                        </div>
                        <div class="feedback" id="feedback-19"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-20">
                        <div class="question-meta">
                            <span>Q20</span>
                            <span class="skill-tag">Main Idea</span>
                        </div>
                        <p class="question-text">What is the central message of this passage about digital citizenship?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(20, 'A', this)">
                                <span class="option-letter">A</span> The internet is dangerous and should be avoided
                            </button>
                            <button class="option-btn" onclick="checkAnswer(20, 'B', this)">
                                <span class="option-letter">B</span> Being a good digital citizen means using technology responsibly, respectfully, and safely to empower ourselves and our communities
                            </button>
                            <button class="option-btn" onclick="checkAnswer(20, 'C', this)">
                                <span class="option-letter">C</span> Only young people need to learn about digital citizenship
                            </button>
                            <button class="option-btn" onclick="checkAnswer(20, 'D', this)">
                                <span class="option-letter">D</span> Digital footprints don't matter in the long term
                            </button>
                        </div>
                        <div class="feedback" id="feedback-20"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Navigation -->
        <div class="navigation" id="navigation">
            <button class="nav-btn prev" onclick="prevSection()" id="prev-btn" disabled>‚Üê Previous</button>
            <span class="passage-indicator" id="passage-indicator">Passage 1 of 5</span>
            <button class="nav-btn next" onclick="nextSection()" id="next-btn">Next ‚Üí</button>
        </div>
        
        <!-- Results Screen -->
        <div class="results-screen" id="results-screen">
            <div class="results-header">
                <h2>Test Completed!</h2>
                <p>Here are your results for Reading Practice 05</p>
            </div>
            
            <div class="score-circle" id="final-score">0/20</div>
            
            <div class="results-meta">
                <div class="meta-item">
                    <div class="meta-label">Tester Name</div>
                    <div class="meta-value" id="result-name">-</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Date & Time</div>
                    <div class="meta-value" id="result-datetime">-</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Time Taken</div>
                    <div class="meta-value" id="result-duration">-</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Accuracy</div>
                    <div class="meta-value" id="result-accuracy">0%</div>
                </div>
            </div>
            
            <div class="skills-summary">
                <h3>Reading Skills Analysis</h3>
                <div id="skills-breakdown">
                    <!-- Skills breakdown will be inserted here by JavaScript -->
                </div>
            </div>
            
            <div class="export-section">
                <h3>Share Your Results</h3>
                <div class="export-buttons">
                    <button class="export-btn btn-wechat" onclick="copyForWeChat()">
                        üí¨ Copy for WeChat
                    </button>
                    <button class="export-btn btn-email" onclick="emailResults()">
                        üìß Email Results
                    </button>
                    <button class="export-btn btn-lms" onclick="downloadForLMS()">
                        üì§ Download for LMS
                    </button>
                    <button class="export-btn btn-download" onclick="downloadPDF()">
                        üìÑ Save as PDF
                    </button>
                </div>
            </div>
            
            <button class="start-btn" onclick="restartTest()" style="margin-top: 20px;">
                üîÑ Take Another Practice Test
            </button>
        </div>
    </div>
    
    <div class="toast" id="toast">Results copied to clipboard!</div>
    
    <script>
        // Answer Key & Explanations with Skill Mapping
        const answers = {
            1: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! The passage states: "Keep your bedroom... cool (around 18-20¬∞C or 65-68¬∞F)."<br><br>‚ùå A: Too cold; not recommended.<br>‚ùå C: Too warm; may disrupt sleep.<br>‚ùå D: Too warm; not ideal for sleep quality.',
                skill: 'Detail Comprehension'
            },
            2: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! The tip states: "If you can\'t fall asleep after 20 minutes, get up and do a quiet activity until you feel sleepy."<br><br>‚ùå A: Staying in bed can create negative associations.<br>‚ùå C: Screens can disrupt sleep.<br>‚ùå D: Caffeine is a stimulant that interferes with sleep.',
                skill: 'Detail Comprehension'
            },
            3: { 
                correct: 'C', 
                explanation: '‚úÖ Correct! Vigorous exercise right before bed is NOT mentioned; in fact, the passage recommends calming activities for bedtime routine.<br><br>‚ùå A, B, D: All explicitly listed as sleep habit tips.',
                skill: 'Detail Comprehension (NOT)'
            },
            4: { 
                correct: 'A', 
                explanation: '‚úÖ Correct! Context shows the garden is a place of "calm" and "quiet focus that melted away daily stress"‚Äîa sanctuary is a place of safety and peace.<br><br>‚ùå B: Not about size or public access.<br>‚ùå C: The garden includes flowers, not just vegetables.<br>‚ùå D: No mention of expensive tools.',
                skill: 'Vocabulary in Context'
            },
            5: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 1 states: "I agreed out of politeness."<br><br>‚ùå A: Writer initially thought gardening seemed like hard work.<br>‚ùå C: No event mentioned.<br>‚ùå D: No payment discussed; it was a neighborly invitation.',
                skill: 'Detail Comprehension'
            },
            6: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Mrs. Kim says: "Plants are like people. They need attention, but not too much"‚Äîshowing she values balance and patience.<br><br>‚ùå A: Opposite of her "not too much" advice.<br>‚ùå C: She grew flowers (coneflowers), not just vegetables.<br>‚ùå D: She invited the writer to help, showing she enjoys sharing gardening.',
                skill: 'Inference'
            },
            7: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Context: "vibrant purple coneflowers swaying in the breeze" after describing growth from shoots to buds‚Äîvibrant means bright and full of life.<br><br>‚ùå A: Opposite meaning.<br>‚ùå C: "Vibrant" describes color/intensity, not size.<br>‚ùå D: No mention of cost or rarity.',
                skill: 'Vocabulary in Context'
            },
            8: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Final paragraph emphasizes: "growth takes time, patience, and care‚Äînot just for plants, but for ourselves" and "grow one day at a time"‚Äîhighlighting personal growth through new experiences.<br><br>‚ùå A: Writer succeeded with a small balcony garden.<br>‚ùå C: Coneflowers were an example, not the main message.<br>‚ùå D: Helping neighbors was the start, but the focus is on personal transformation.',
                skill: 'Main Idea'
            },
            9: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 1 states: "current changes are happening faster than ever before‚Äîand human activities are the main cause." Paragraph 2 explains how burning fossil fuels releases greenhouse gases.<br><br>‚ùå A: Natural cycles are mentioned as historical context, not current cause.<br>‚ùå C, D: Not discussed as primary drivers of current change.',
                skill: 'Detail Comprehension'
            },
            10: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Sentence: "we release greenhouse gases like carbon dioxide... These gases trap heat..." ‚Äî "These gases" refers to the greenhouse gases just mentioned.<br><br>‚ùå A: Fossil fuels are the source, not the gases themselves.<br>‚ùå C: Oxygen/nitrogen aren\'t greenhouse gases discussed here.<br>‚ùå D: Water vapor isn\'t the focus of this sentence.',
                skill: 'Reference'
            },
            11: { 
                correct: 'A', 
                explanation: '‚úÖ Correct! Paragraph 3 lists consequences including: "more frequent and intense extreme weather (heatwaves, storms, droughts)."<br><br>‚ùå B: Population changes aren\'t mentioned as a direct consequence.<br>‚ùå C: Seasons are shifting, not uniformly lengthening.<br>‚ùå D: Volcanic activity isn\'t linked to climate change in this passage.',
                skill: 'Detail Comprehension'
            },
            12: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Passage states vulnerable communities "often face the greatest impacts"‚Äîimplying they have fewer resources (money, infrastructure, support) to adapt to climate effects.<br><br>‚ùå A: Not supported; vulnerability isn\'t about causing pollution.<br>‚ùå C: Vulnerable communities exist in many settings, not just coasts.<br>‚ùå D: Not discussed; the focus is on impacts, not energy choices.',
                skill: 'Inference'
            },
            13: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 2 states: "Studies using brain scans show that reading fiction activates regions associated with understanding others\' thoughts and feelings."<br><br>‚ùå A: Reading increases beneficial brain activity.<br>‚ùå C: Benefits extend beyond math to empathy, vocabulary, focus.<br>‚ùå D: Passage contrasts reading with passive screen time.',
                skill: 'Detail Comprehension'
            },
            14: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 3 states: "Just six minutes of reading can lower heart rate and ease muscle tension more effectively than many other relaxation methods."<br><br>‚ùå A: Opposite; reading reduces stress.<br>‚ùå C: Reading before bed can improve sleep quality.<br>‚ùå D: Location isn\'t specified; benefits apply generally.',
                skill: 'Detail Comprehension'
            },
            15: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 2 discusses cognitive benefits (vocabulary, focus, empathy); paragraph 3 adds emotional/physical benefits (stress reduction, sleep improvement)‚Äîbuilding a comprehensive case for reading.<br><br>‚ùå A: No contrast; paragraph 3 expands on benefits.<br>‚ùå C: New content about stress, not repetition.<br>‚ùå D: Sleep is mentioned as a benefit of reading, not a new topic.',
                skill: 'Text Structure'
            },
            16: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Passage presents research on reading\'s benefits for cognition, empathy, stress, and critical thinking, concluding it shapes "our capacity to understand and improve the world."<br><br>‚ùå A: Passage advocates mindful reading, not eliminating all screens.<br>‚ùå C: No specific books promoted.<br>‚ùå D: Tone is encouraging about reading\'s value, not critical of other media.',
                skill: 'Author\'s Purpose'
            },
            17: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 2 lists key principles: "Protecting privacy... Respecting others... Evaluating information."<br><br>‚ùå A: Opposite of protecting privacy.<br>‚ùå C: Passage advises pausing before responding.<br>‚ùå D: Digital citizenship is about responsible use, not avoidance.',
                skill: 'Detail Comprehension'
            },
            18: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Passage states digital citizenship empowers us "to learn, connect, create, and contribute positively" and that choices "shape not just our online experience, but our communities and society."<br><br>‚ùå A: Opposite goal; digital citizenship reduces conflicts.<br>‚ùå C: Passage states these skills are "essential for everyone."<br>‚ùå D: Passage emphasizes that "digital footprints last."',
                skill: 'Inference'
            },
            19: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Context: "navigate it with wisdom and integrity" alongside principles like respecting others and evaluating information‚Äîintegrity means honesty and strong moral principles.<br><br>‚ùå A: Opposite; integrity means doing right even when unobserved.<br>‚ùå C: Technical skill isn\'t the focus of "integrity."<br>‚ùå D: Popularity isn\'t linked to integrity in this context.',
                skill: 'Vocabulary in Context'
            },
            20: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Passage defines digital citizenship as using technology "responsibly, respectfully, and safely" to "empower" ourselves and contribute positively, concluding these choices shape communities and society.<br><br>‚ùå A: Directly contradicted; passage advocates engaged, wise use.<br>‚ùå C: Passage states these skills are "essential for everyone."<br>‚ùå D: Directly contradicted; "digital footprints last."',
                skill: 'Main Idea'
            }
        };

        // Question to Passage Mapping
        const questionToPassage = {
            1:1, 2:1, 3:1, 4:1,
            5:2, 6:2, 7:2, 8:2,
            9:3, 10:3, 11:3, 12:3,
            13:4, 14:4, 15:4, 16:4,
            17:5, 18:5, 19:5, 20:5
        };

        // State Variables
        let currentSection = 1;
        let score = 0;
        let answered = {};
        let timerSeconds = 0;
        let timerInterval;
        let testerName = '';
        let testStartTime;
        let testEndTime;

        // DOM Elements
        const startScreen = document.getElementById('start-screen');
        const testLayout = document.getElementById('test-layout');
        const resultsScreen = document.getElementById('results-screen');
        const nameInput = document.getElementById('tester-name');
        const nameError = document.getElementById('name-error');
        const startBtn = document.getElementById('start-btn');
        const timerDisplay = document.getElementById('timer');
        const scoreDisplay = document.getElementById('score-display');
        const passageIndicator = document.getElementById('passage-indicator');
        const toast = document.getElementById('toast');

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            startBtn.addEventListener('click', startTest);
            nameInput.addEventListener('input', validateName);
        });

        // Name Validation - Block Chinese Characters
        function validateName() {
            const name = nameInput.value.trim();
            const hasChinese = /[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u.test(name);
            
            if (hasChinese) {
                nameError.classList.add('show');
                startBtn.disabled = true;
            } else {
                nameError.classList.remove('show');
                startBtn.disabled = name === '';
            }
        }

        // Start Test
        function startTest() {
            testerName = nameInput.value.trim() || 'Anonymous';
            testStartTime = new Date();
            
            // Hide start screen, show test layout
            startScreen.style.display = 'none';
            testLayout.classList.add('active');
            
            // Show first passage and questions
            document.querySelector(`[data-passage="1"]`).classList.add('active');
            document.querySelector(`.questions-section[data-passage="1"]`).classList.add('active');
            
            // Start timer
            startTimer();
            
            // Update header
            updateHeader();
        }

        // Timer Functions
        function startTimer() {
            timerInterval = setInterval(() => {
                timerSeconds++;
                const mins = Math.floor(timerSeconds / 60).toString().padStart(2, '0');
                const secs = (timerSeconds % 60).toString().padStart(2, '0');
                timerDisplay.textContent = `${mins}:${secs}`;
            }, 1000);
        }

        // Check Answer with Feedback
        function checkAnswer(questionNum, selected, btn) {
            if (answered[questionNum]) return;

            answered[questionNum] = selected;
            const feedback = document.getElementById(`feedback-${questionNum}`);
            const allBtns = btn.parentElement.querySelectorAll('.option-btn');
            
            allBtns.forEach(b => b.disabled = true);

            if (selected === answers[questionNum].correct) {
                score++;
                btn.classList.add('correct');
                feedback.classList.add('correct');
                feedback.innerHTML = `<div class="feedback-title">‚úÖ Correct!</div>${answers[questionNum].explanation}`;
            } else {
                btn.classList.add('incorrect');
                feedback.classList.add('incorrect');
                feedback.innerHTML = `<div class="feedback-title">‚ùå Incorrect</div>${answers[questionNum].explanation}`;
                
                allBtns.forEach(b => {
                    if (b.textContent.trim().startsWith(answers[questionNum].correct + '.')) {
                        b.classList.add('correct');
                    }
                });
            }

            feedback.style.display = 'block';
            updateScoreDisplay();
            checkPassageComplete();
        }

        // Check if Current Passage Questions are Complete
        function checkPassageComplete() {
            const currentPassageQuestions = [];
            for (let q = 1; q <= 20; q++) {
                if (questionToPassage[q] === currentSection) {
                    currentPassageQuestions.push(q);
                }
            }
            
            const allAnswered = currentPassageQuestions.every(q => answered[q]);
            if (allAnswered && currentSection < 5) {
                document.getElementById('next-btn').textContent = 'Next Passage ‚Üí';
            }
        }

        // Navigation Functions
        function nextSection() {
            const currentPassageQuestions = [];
            for (let q = 1; q <= 20; q++) {
                if (questionToPassage[q] === currentSection) {
                    currentPassageQuestions.push(q);
                }
            }
            
            const allAnswered = currentPassageQuestions.every(q => answered[q]);
            if (!allAnswered) {
                alert(`Please answer all ${currentPassageQuestions.length} questions in this passage before continuing.`);
                return;
            }
            
            if (Object.keys(answered).length === 20) {
                showResults();
                return;
            }
            
            if (currentSection < 5) {
                // Hide current passage and questions
                document.querySelector(`[data-passage="${currentSection}"]`).classList.remove('active');
                document.querySelector(`.questions-section[data-passage="${currentSection}"]`).classList.remove('active');
                
                // Show next passage and questions
                currentSection++;
                document.querySelector(`[data-passage="${currentSection}"]`).classList.add('active');
                document.querySelector(`.questions-section[data-passage="${currentSection}"]`).classList.add('active');
                
                updateHeader();
                document.getElementById('prev-btn').disabled = false;
                
                // Scroll columns to top
                document.querySelector('.questions-column').scrollTop = 0;
                document.querySelector('.passage-column').scrollTop = 0;
            }
        }

        function prevSection() {
            if (currentSection > 1) {
                // Hide current
                document.querySelector(`[data-passage="${currentSection}"]`).classList.remove('active');
                document.querySelector(`.questions-section[data-passage="${currentSection}"]`).classList.remove('active');
                
                // Show previous
                currentSection--;
                document.querySelector(`[data-passage="${currentSection}"]`).classList.add('active');
                document.querySelector(`.questions-section[data-passage="${currentSection}"]`).classList.add('active');
                
                updateHeader();
                document.getElementById('next-btn').textContent = 'Next ‚Üí';
                if (currentSection === 1) {
                    document.getElementById('prev-btn').disabled = true;
                }
                
                document.querySelector('.questions-column').scrollTop = 0;
                document.querySelector('.passage-column').scrollTop = 0;
            }
        }

        // Update Header Display
        function updateHeader() {
            passageIndicator.textContent = `Passage ${currentSection} of 5`;
            updateScoreDisplay();
        }

        function updateScoreDisplay() {
            scoreDisplay.textContent = `${score}/${Object.keys(answered).length}`;
        }

        // Show Results Screen
        function showResults() {
            testEndTime = new Date();
            clearInterval(timerInterval);
            
            // Hide test layout and navigation
            testLayout.classList.remove('active');
            document.getElementById('navigation').style.display = 'none';
            
            // Show results screen
            resultsScreen.classList.add('active');
            
            // Populate results
            document.getElementById('result-name').textContent = testerName;
            document.getElementById('result-datetime').textContent = testEndTime.toLocaleString();
            
            const durationMs = testEndTime - testStartTime;
            const durationMins = Math.floor(durationMs / 60000);
            const durationSecs = Math.floor((durationMs % 60000) / 1000);
            document.getElementById('result-duration').textContent = 
                `${durationMins}m ${durationSecs.toString().padStart(2, '0')}s`;
            
            const finalScore = `${score}/20`;
            document.getElementById('final-score').textContent = finalScore;
            document.getElementById('result-accuracy').textContent = 
                `${Math.round((score / 20) * 100)}%`;
            
            generateSkillsBreakdown();
        }

        // Generate Skills Analysis
        function generateSkillsBreakdown() {
            const skillsBreakdown = document.getElementById('skills-breakdown');
            skillsBreakdown.innerHTML = '';
            
            const skillGroups = {};
            for (let q = 1; q <= 20; q++) {
                const skill = answers[q].skill;
                if (!skillGroups[skill]) {
                    skillGroups[skill] = { total: 0, correct: 0, questions: [] };
                }
                skillGroups[skill].total++;
                if (answered[q] === answers[q].correct) {
                    skillGroups[skill].correct++;
                } else {
                    skillGroups[skill].questions.push(q);
                }
            }
            
            Object.entries(skillGroups).forEach(([skill, data]) => {
                const isMastered = data.correct === data.total;
                const skillItem = document.createElement('div');
                skillItem.className = `skill-item ${isMastered ? 'mastered' : 'missed'}`;
                
                let missedInfo = '';
                if (!isMastered && data.questions.length > 0) {
                    missedInfo = `<br><small style="color: #b71c1c">Missed: Q${data.questions.join(', Q')}</small>`;
                }
                
                skillItem.innerHTML = `
                    <div>
                        <strong>${skill}</strong>
                        <div style="font-size: 0.9rem; color: #616161">${data.correct}/${data.total} correct</div>
                        ${missedInfo}
                    </div>
                    <div style="font-weight: bold; color: ${isMastered ? '#2e7d32' : '#c62828'}">
                        ${isMastered ? '‚úì Mastered' : '‚ö† Review'}
                    </div>
                `;
                skillsBreakdown.appendChild(skillItem);
            });
        }

        // Export Functions
        function copyForWeChat() {
            const durationMs = testEndTime - testStartTime;
            const durationMins = Math.floor(durationMs / 60000);
            const durationSecs = Math.floor((durationMs % 60000) / 1000);
            const accuracy = Math.round((score / 20) * 100);
            
            const text = `üìö Reading Practice 05 Results\n\n` +
                         `üë§ Name: ${testerName}\n` +
                         `üìÖ Date: ${testEndTime.toLocaleDateString()}\n` +
                         `‚è±Ô∏è Time: ${durationMins}m ${durationSecs}s\n` +
                         `‚úÖ Score: ${score}/20 (${accuracy}%)\n\n` +
                         `üìä Skills Review:\n`;
            
            const skillGroups = {};
            for (let q = 1; q <= 20; q++) {
                const skill = answers[q].skill;
                if (!skillGroups[skill]) skillGroups[skill] = { total: 0, correct: 0 };
                skillGroups[skill].total++;
                if (answered[q] === answers[q].correct) skillGroups[skill].correct++;
            }
            
            Object.entries(skillGroups).forEach(([skill, data]) => {
                const status = data.correct === data.total ? '‚úì' : '‚ö†';
                text += `${status} ${skill}: ${data.correct}/${data.total}\n`;
            });
            
            text += `\nüí° Focus on skills marked with ‚ö† for improvement.`;
            
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-9999px';
            document.body.appendChild(textArea);
            textArea.select();
            
            try {
                document.execCommand('copy');
                showToast('Results copied! Paste in WeChat to share.');
            } catch (err) {
                alert('Please manually copy these results:\n\n' + text);
            }
            
            document.body.removeChild(textArea);
        }

        function emailResults() {
            const durationMs = testEndTime - testStartTime;
            const durationMins = Math.floor(durationMs / 60000);
            const durationSecs = Math.floor((durationMs % 60000) / 1000);
            const accuracy = Math.round((score / 20) * 100);
            
            let emailBody = `Reading Practice 05 Results\n\n`;
            emailBody += `Student: ${testerName}\n`;
            emailBody += `Date Completed: ${testEndTime.toLocaleString()}\n`;
            emailBody += `Time Taken: ${durationMins} minutes, ${durationSecs} seconds\n`;
            emailBody += `Score: ${score} out of 20 questions (${accuracy}% accuracy)\n\n`;
            
            emailBody += `Detailed Results:\n`;
            emailBody += `----------------\n`;
            
            for (let q = 1; q <= 20; q++) {
                const isCorrect = answered[q] === answers[q].correct;
                emailBody += `Q${q} [${answers[q].skill}]: ${isCorrect ? '‚úì Correct' : '‚úó Incorrect'}\n`;
            }
            
            emailBody += `\nSkills Analysis:\n`;
            const skillGroups = {};
            for (let q = 1; q <= 20; q++) {
                const skill = answers[q].skill;
                if (!skillGroups[skill]) skillGroups[skill] = { total: 0, correct: 0 };
                skillGroups[skill].total++;
                if (answered[q] === answers[q].correct) skillGroups[skill].correct++;
            }
            
            Object.entries(skillGroups).forEach(([skill, data]) => {
                emailBody += `- ${skill}: ${data.correct}/${data.total} correct\n`;
            });
            
            const subject = encodeURIComponent(`Reading Practice 05 Results - ${testerName}`);
            const body = encodeURIComponent(emailBody);
            
            window.location.href = `mailto:?subject=${subject}&body=${body}`;
        }

        function downloadForLMS() {
            const resultsData = {
                testName: "Reading Practice 05",
                studentName: testerName,
                completedAt: testEndTime.toISOString(),
                durationSeconds: timerSeconds,
                totalQuestions: 20,
                correctAnswers: score,
                accuracyPercent: Math.round((score / 20) * 100),
                questionResults: [],
                skillsAnalysis: {}
            };
            
            for (let q = 1; q <= 20; q++) {
                resultsData.questionResults.push({
                    questionNumber: q,
                    skill: answers[q].skill,
                    selectedAnswer: answered[q],
                    correctAnswer: answers[q].correct,
                    isCorrect: answered[q] === answers[q].correct
                });
            }
            
            const skillGroups = {};
            for (let q = 1; q <= 20; q++) {
                const skill = answers[q].skill;
                if (!skillGroups[skill]) {
                    skillGroups[skill] = { 
                        totalQuestions: 0, 
                        correctAnswers: 0,
                        missedQuestions: []
                    };
                }
                skillGroups[skill].totalQuestions++;
                if (answered[q] === answers[q].correct) {
                    skillGroups[skill].correctAnswers++;
                } else {
                    skillGroups[skill].missedQuestions.push(q);
                }
            }
            resultsData.skillsAnalysis = skillGroups;
            
            const dataStr = "text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(resultsData, null, 2));
            const downloadAnchorNode = document.createElement('a');
            downloadAnchorNode.setAttribute("href", dataStr);
            downloadAnchorNode.setAttribute("download", `reading_practice_05_${testerName.replace(/\s+/g, '_')}_${new Date().toISOString().slice(0,10)}.json`);
            document.body.appendChild(downloadAnchorNode);
            downloadAnchorNode.click();
            downloadAnchorNode.remove();
            
            showToast('Results downloaded for LMS upload!');
        }

        function downloadPDF() {
            alert(`PDF generation requires additional libraries. For this demo:\n\n1. Copy your results using the "Copy for WeChat" button\n2. Paste into a document\n3. Save as PDF using your browser's print function (Ctrl+P ‚Üí Save as PDF)\n\nIn a production version, this would generate a professional PDF report automatically.`);
        }

        function showToast(message) {
            toast.textContent = message;
            toast.style.display = 'block';
            setTimeout(() => {
                toast.style.display = 'none';
            }, 3000);
        }

        // Restart Test
        function restartTest() {
            currentSection = 1;
            score = 0;
            answered = {};
            timerSeconds = 0;
            testerName = '';
            
            nameInput.value = '';
            nameError.classList.remove('show');
            startBtn.disabled = true;
            document.getElementById('next-btn').textContent = 'Next ‚Üí';
            document.getElementById('prev-btn').disabled = true;
            document.getElementById('passage-indicator').textContent = 'Passage 1 of 5';
            
            document.querySelectorAll('.feedback').forEach(fb => {
                fb.style.display = 'none';
                fb.classList.remove('correct', 'incorrect');
            });
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('correct', 'incorrect');
                btn.disabled = false;
            });
            
            resultsScreen.classList.remove('active');
            startScreen.style.display = 'block';
            
            timerDisplay.textContent = '00:00';
            scoreDisplay.textContent = '0/0';
            
            clearInterval(timerInterval);
        }
    </script>
</body>
</html>