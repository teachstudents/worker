<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading Practice 01</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #27ae60;
            --error: #e74c3c;
            --warning: #f39c12;
            --light: #f8f9fa;
            --dark: #2c3e50;
            --gray: #6c757d;
            --border: #dee2e6;
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
            font-size: 16px;
            line-height: 1.6;
            color: #333;
            background-color: #f5f7fa;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        /* Header Styles */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .header-title {
            font-size: 1.4rem;
            font-weight: 600;
        }
        
        .header-stats {
            display: flex;
            gap: 20px;
            font-size: 1rem;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .timer {
            font-weight: bold;
            color: #ffcc00;
        }
        
        .score-display {
            font-weight: bold;
        }
        
        /* Start Screen */
        .start-screen {
            padding: 40px;
            text-align: center;
        }
        
        .start-screen h2 {
            margin-bottom: 25px;
            color: var(--primary);
            font-size: 1.8rem;
        }
        
        .name-input-group {
            margin: 30px 0;
        }
        
        .name-input-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            font-size: 1.1rem;
        }
        
        .name-input {
            width: 100%;
            max-width: 400px;
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 6px;
            font-size: 1.1rem;
            transition: border-color 0.3s;
        }
        
        .name-input:focus {
            outline: none;
            border-color: var(--secondary);
        }
        
        .error-message {
            color: var(--error);
            margin-top: 8px;
            font-size: 0.95rem;
            display: none;
        }
        
        .error-message.show {
            display: block;
        }
        
        .start-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 14px 35px;
            font-size: 1.1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.3s;
            font-weight: 500;
            margin-top: 10px;
        }
        
        .start-btn:hover {
            background: #2980b9;
        }
        
        .start-btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
        }
        
        .instructions {
            background: var(--light);
            border-left: 4px solid var(--secondary);
            padding: 15px;
            margin: 25px 0;
            border-radius: 0 6px 6px 0;
            text-align: left;
        }
        
        .instructions ul {
            padding-left: 20px;
            margin-top: 10px;
        }
        
        .instructions li {
            margin-bottom: 5px;
        }
        
        /* Test Content */
        .passage-section {
            padding: 25px;
            display: none;
        }
        
        .passage-section.active {
            display: block;
            animation: fadeIn 0.4s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .passage-title {
            color: var(--primary);
            font-size: 1.5rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--secondary);
        }
        
        .passage-text {
            background: var(--light);
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 30px;
            font-size: 1.05rem;
            line-height: 1.7;
            border-left: 4px solid var(--secondary);
        }
        
        .question-box {
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        
        .question-text {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .question-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .skill-tag {
            background: #e1f0fa;
            color: var(--secondary);
            padding: 3px 10px;
            border-radius: 15px;
            font-weight: 500;
        }
        
        .options {
            display: grid;
            gap: 12px;
            margin-top: 10px;
        }
        
        .option-btn {
            padding: 14px 20px;
            border: 2px solid var(--border);
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.05rem;
            text-align: left;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .option-btn:hover {
            background: #f8f9fa;
            border-color: var(--secondary);
        }
        
        .option-btn.correct {
            background: #d4edda;
            border-color: var(--success);
            color: #155724;
            font-weight: 500;
        }
        
        .option-btn.incorrect {
            background: #f8d7da;
            border-color: var(--error);
            color: #721c24;
            font-weight: 500;
        }
        
        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.85;
        }
        
        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--secondary);
            color: white;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .option-btn.correct .option-letter {
            background: var(--success);
        }
        
        .option-btn.incorrect .option-letter {
            background: var(--error);
        }
        
        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none;
            font-size: 1rem;
            line-height: 1.6;
        }
        
        .feedback.correct {
            background: #d4edda;
            border: 1px solid var(--success);
            color: #155724;
        }
        
        .feedback.incorrect {
            background: #f8d7da;
            border: 1px solid var(--error);
            color: #721c24;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* Navigation */
        .navigation {
            padding: 20px 25px;
            background: var(--light);
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-btn {
            padding: 12px 28px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1.05rem;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .nav-btn.prev {
            background: #95a5a6;
            color: white;
        }
        
        .nav-btn.next {
            background: var(--secondary);
            color: white;
        }
        
        .nav-btn.next:hover {
            background: #2980b9;
        }
        
        .nav-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .passage-indicator {
            font-weight: 500;
            color: var(--primary);
        }
        
        /* Results Screen */
        .results-screen {
            padding: 30px;
            display: none;
            text-align: center;
        }
        
        .results-screen.active {
            display: block;
        }
        
        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--success) 0%, #2ecc71 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            margin: 0 auto 25px;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.4);
        }
        
        .results-header {
            margin-bottom: 30px;
        }
        
        .results-header h2 {
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .results-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 25px 0;
            text-align: left;
        }
        
        .meta-item {
            background: var(--light);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--secondary);
        }
        
        .meta-label {
            font-size: 0.9rem;
            color: var(--gray);
            margin-bottom: 5px;
        }
        
        .meta-value {
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--dark);
        }
        
        .skills-summary {
            margin: 30px 0;
            text-align: left;
        }
        
        .skills-summary h3 {
            margin-bottom: 15px;
            color: var(--primary);
            font-size: 1.4rem;
        }
        
        .skill-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 15px;
            margin-bottom: 10px;
            border-radius: 6px;
            background: var(--light);
        }
        
        .skill-item.missed {
            background: #fff0f0;
            border-left: 4px solid var(--error);
        }
        
        .skill-item.mastered {
            border-left: 4px solid var(--success);
        }
        
        .export-section {
            margin: 35px 0;
            padding-top: 25px;
            border-top: 1px solid var(--border);
        }
        
        .export-section h3 {
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 1.4rem;
        }
        
        .export-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .export-btn {
            padding: 14px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.05rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        .btn-wechat {
            background: #07c160;
            color: white;
        }
        
        .btn-email {
            background: #e74c3c;
            color: white;
        }
        
        .btn-lms {
            background: var(--secondary);
            color: white;
        }
        
        .btn-download {
            background: #9b59b6;
            color: white;
        }
        
        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--dark);
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            display: none;
            animation: slideIn 0.3s, fadeOut 0.3s 2.7s forwards;
        }
        
        @keyframes slideIn {
            from { transform: translateX(200px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .header {
                padding: 12px 15px;
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .header-stats {
                width: 100%;
                justify-content: center;
            }
            
            .passage-text {
                padding: 20px 15px;
                font-size: 1rem;
            }
            
            .question-box {
                padding: 15px;
            }
            
            .options {
                grid-template-columns: 1fr;
            }
            
            .export-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .export-btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header with Timer and Score -->
        <div class="header">
            <div class="header-title">Reading Practice 01</div>
            <div class="header-stats">
                <div class="stat-item">
                    <span>‚è±Ô∏è</span>
                    <span class="timer" id="timer">00:00</span>
                </div>
                <div class="stat-item">
                    <span>‚úÖ</span>
                    <span class="score-display" id="score-display">0/20</span>
                </div>
            </div>
        </div>
        
        <!-- Start Screen -->
        <div class="start-screen" id="start-screen">
            <h2>Welcome to Reading Practice 01</h2>
            <p>Please enter your name to begin the test.</p>
            
            <div class="name-input-group">
                <label for="tester-name">Your Name (Pinyin or English only)</label>
                <input type="text" id="tester-name" class="name-input" placeholder="e.g., Zhang San or John Smith">
                <div class="error-message" id="name-error">Please use Pinyin or English characters only. Chinese characters are not accepted.</div>
            </div>
            
            <div class="instructions">
                <p><strong>Test Instructions:</strong></p>
                <ul>
                    <li>Read each passage carefully before answering questions</li>
                    <li>Select the best answer for each question</li>
                    <li>You will receive immediate feedback after each answer</li>
                    <li>The test has 20 questions across 5 passages</li>
                    <li>Estimated time: 35-40 minutes</li>
                </ul>
            </div>
            
            <button class="start-btn" id="start-btn">Start Test</button>
        </div>
        
        <!-- Passage 1 -->
        <div class="passage-section" data-passage="1">
            <h2 class="passage-title">Passage 1: Community Activities</h2>
            <div class="passage-text">
                <p>Green City Park is looking for volunteers to help with spring activities. Here are four opportunities available:</p>
                <p><strong>üå≥ Tree Planting:</strong> Saturday, April 12, 9:00-11:00 AM. Help plant young trees near the lake. Wear old clothes and bring gloves.</p>
                <p><strong>‚ôªÔ∏è Recycling Drive:</strong> Sunday, April 13, 8:00-10:00 AM. Sort recyclables and educate residents about waste reduction. Comfortable shoes and a friendly attitude required.</p>
                <p><strong>üê¶ Bird Watching:</strong> Saturday, April 19, 7:00-8:30 AM. Count local birds with expert guides. A quiet voice is essential; binoculars are helpful but not required.</p>
                <p><strong>üé® Art Workshop:</strong> Every Wednesday, 4:00-5:30 PM. Help children create art projects. Patience and basic art skills are preferred.</p>
                <p><strong>How to join:</strong> Scan the QR code on our poster, fill in your name, age, and phone number, choose your favorite activity, and wait for our confirmation message (sent within 2 days).</p>
                <p><em>Note: Volunteers under 16 must be accompanied by a parent. All volunteers receive a certificate and a community T-shirt.</em></p>
            </div>
            
            <div class="question-box" id="qbox-1">
                <div class="question-meta">
                    <span>Question 1 of 20</span>
                    <span class="skill-tag">Detail Comprehension</span>
                </div>
                <p class="question-text">If you want to help children with art projects, which activity should you choose?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(1, 'A', this)">
                        <span class="option-letter">A</span> Tree Planting
                    </button>
                    <button class="option-btn" onclick="checkAnswer(1, 'B', this)">
                        <span class="option-letter">B</span> Recycling Drive
                    </button>
                    <button class="option-btn" onclick="checkAnswer(1, 'C', this)">
                        <span class="option-letter">C</span> Bird Watching
                    </button>
                    <button class="option-btn" onclick="checkAnswer(1, 'D', this)">
                        <span class="option-letter">D</span> Art Workshop
                    </button>
                </div>
                <div class="feedback" id="feedback-1"></div>
            </div>
            
            <div class="question-box" id="qbox-2">
                <div class="question-meta">
                    <span>Question 2 of 20</span>
                    <span class="skill-tag">Detail Comprehension</span>
                </div>
                <p class="question-text">When will volunteers receive their confirmation message after signing up?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(2, 'A', this)">
                        <span class="option-letter">A</span> Immediately after signing up
                    </button>
                    <button class="option-btn" onclick="checkAnswer(2, 'B', this)">
                        <span class="option-letter">B</span> Within 2 days after signing up
                    </button>
                    <button class="option-btn" onclick="checkAnswer(2, 'C', this)">
                        <span class="option-letter">C</span> On the day of the activity
                    </button>
                    <button class="option-btn" onclick="checkAnswer(2, 'D', this)">
                        <span class="option-letter">D</span> One week before the activity
                    </button>
                </div>
                <div class="feedback" id="feedback-2"></div>
            </div>
            
            <div class="question-box" id="qbox-3">
                <div class="question-meta">
                    <span>Question 3 of 20</span>
                    <span class="skill-tag">Detail Comprehension</span>
                </div>
                <p class="question-text">Which of the following is TRUE about volunteering at Green City Park?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(3, 'A', this)">
                        <span class="option-letter">A</span> You must be over 18 years old to volunteer
                    </button>
                    <button class="option-btn" onclick="checkAnswer(3, 'B', this)">
                        <span class="option-letter">B</span> Professional experience is required for all activities
                    </button>
                    <button class="option-btn" onclick="checkAnswer(3, 'C', this)">
                        <span class="option-letter">C</span> All volunteers receive a certificate and T-shirt
                    </button>
                    <button class="option-btn" onclick="checkAnswer(3, 'D', this)">
                        <span class="option-letter">D</span> You can sign up by calling the park office
                    </button>
                </div>
                <div class="feedback" id="feedback-3"></div>
            </div>
            
            <div class="question-box" id="qbox-4">
                <div class="question-meta">
                    <span>Question 4 of 20</span>
                    <span class="skill-tag">Vocabulary in Context</span>
                </div>
                <p class="question-text">In the passage, the word "essential" (in the Bird Watching description) most nearly means:</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(4, 'A', this)">
                        <span class="option-letter">A</span> helpful but not necessary
                    </button>
                    <button class="option-btn" onclick="checkAnswer(4, 'B', this)">
                        <span class="option-letter">B</span> absolutely necessary
                    </button>
                    <button class="option-btn" onclick="checkAnswer(4, 'C', this)">
                        <span class="option-letter">C</span> interesting but optional
                    </button>
                    <button class="option-btn" onclick="checkAnswer(4, 'D', this)">
                        <span class="option-letter">D</span> difficult to achieve
                    </button>
                </div>
                <div class="feedback" id="feedback-4"></div>
            </div>
        </div>
        
        <!-- Passage 2 -->
        <div class="passage-section" data-passage="2">
            <h2 class="passage-title">Passage 2: The Power of Practice</h2>
            <div class="passage-text">
                <p>When I first joined the school debate team, I was terrified of speaking in front of others. My hands would shake, my voice would tremble, and sometimes my mind would go completely blank. I wanted to quit after the first meeting.</p>
                <p>But our coach, Mr. Davies, noticed my struggle. "Everyone starts somewhere," he told me. "The secret isn't talent‚Äîit's practice." He gave me small exercises: first speaking to just one person, then to a small group, then to the whole team. Each time, he offered gentle feedback: "Good eye contact," or "Try slowing down your speech here."</p>
                <p>Slowly, I improved. I learned that making mistakes wasn't failure‚Äîit was part of learning. When I finally gave my first full debate speech, I still felt nervous, but I finished strong. The team applauded, and Mr. Davies smiled. "See?" he said. "Practice makes progress."</p>
                <p>That experience changed how I approach challenges. Now, when I face something difficult, I break it into small steps and practice consistently. I've learned that courage isn't the absence of fear‚Äîit's moving forward despite it. And that progress, not perfection, is the real goal.</p>
            </div>
            
            <div class="question-box" id="qbox-5">
                <div class="question-meta">
                    <span>Question 5 of 20</span>
                    <span class="skill-tag">Detail Comprehension</span>
                </div>
                <p class="question-text">Why did the writer want to quit the debate team at first?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(5, 'A', this)">
                        <span class="option-letter">A</span> The coach was too strict
                    </button>
                    <button class="option-btn" onclick="checkAnswer(5, 'B', this)">
                        <span class="option-letter">B</span> They were afraid of speaking in public
                    </button>
                    <button class="option-btn" onclick="checkAnswer(5, 'C', this)">
                        <span class="option-letter">C</span> The team meetings were too long
                    </button>
                    <button class="option-btn" onclick="checkAnswer(5, 'D', this)">
                        <span class="option-letter">D</span> They didn't like debating topics
                    </button>
                </div>
                <div class="feedback" id="feedback-5"></div>
            </div>
            
            <div class="question-box" id="qbox-6">
                <div class="question-meta">
                    <span>Question 6 of 20</span>
                    <span class="skill-tag">Inference</span>
                </div>
                <p class="question-text">What can we infer about Mr. Davies as a coach?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(6, 'A', this)">
                        <span class="option-letter">A</span> He only worked with talented students
                    </button>
                    <button class="option-btn" onclick="checkAnswer(6, 'B', this)">
                        <span class="option-letter">B</span> He believed practice was more important than natural ability
                    </button>
                    <button class="option-btn" onclick="checkAnswer(6, 'C', this)">
                        <span class="option-letter">C</span> He preferred students who weren't nervous
                    </button>
                    <button class="option-btn" onclick="checkAnswer(6, 'D', this)">
                        <span class="option-letter">D</span> He focused only on winning debates
                    </button>
                </div>
                <div class="feedback" id="feedback-6"></div>
            </div>
            
            <div class="question-box" id="qbox-7">
                <div class="question-meta">
                    <span>Question 7 of 20</span>
                    <span class="skill-tag">Vocabulary in Context</span>
                </div>
                <p class="question-text">In paragraph 3, the word "tremble" most probably means:</p>
                    <div class="options">
                    <button class="option-btn" onclick="checkAnswer(7, 'A', this)">
                        <span class="option-letter">A</span> to speak very loudly
                    </button>
                    <button class="option-btn" onclick="checkAnswer(7, 'B', this)">
                        <span class="option-letter">B</span> to shake slightly from fear or nervousness
                    </button>
                    <button class="option-btn" onclick="checkAnswer(7, 'C', this)">
                        <span class="option-letter">C</span> to forget what to say
                    </button>
                    <button class="option-btn" onclick="checkAnswer(7, 'D', this)">
                        <span class="option-letter">D</span> to speak very quickly
                    </button>
                </div>
                <div class="feedback" id="feedback-7"></div>
            </div>
            
            <div class="question-box" id="qbox-8">
                <div class="question-meta">
                    <span>Question 8 of 20</span>
                    <span class="skill-tag">Main Idea</span>
                </div>
                <p class="question-text">What is the main lesson the writer learned from this experience?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(8, 'A', this)">
                        <span class="option-letter">A</span> Debating is only for naturally talented people
                    </button>
                    <button class="option-btn" onclick="checkAnswer(8, 'B', this)">
                        <span class="option-letter">B</span> Practice and small steps lead to progress, not perfection
                    </button>
                    <button class="option-btn" onclick="checkAnswer(8, 'C', this)">
                        <span class="option-letter">C</span> Coaches should always praise students
                    </button>
                    <button class="option-btn" onclick="checkAnswer(8, 'D', this)">
                        <span class="option-letter">D</span> Fear should always be avoided
                    </button>
                </div>
                <div class="feedback" id="feedback-8"></div>
            </div>
        </div>
        
        <!-- Passage 3 -->
        <div class="passage-section" data-passage="3">
            <h2 class="passage-title">Passage 3: The Science of Sleep</h2>
            <div class="passage-text">
                <p>Why do we need sleep? Scientists have discovered that sleep is essential for both physical health and mental performance. During sleep, your brain processes information from the day, strengthens memories, and clears away waste products that build up while you're awake.</p>
                <p>For students, getting enough sleep is especially important. Research shows that teenagers who sleep 8-9 hours per night perform better in school than those who stay up late. Sleep helps with concentration, problem-solving, and emotional regulation‚Äîall critical skills for learning.</p>
                <p>But many students struggle to get enough sleep. Screens from phones and computers emit blue light that can trick your brain into thinking it's still daytime, making it harder to fall asleep. Stress from schoolwork and social pressures can also interfere with sleep quality.</p>
                <p>Experts recommend these strategies for better sleep: maintain a consistent sleep schedule (even on weekends), avoid screens for at least one hour before bed, create a relaxing bedtime routine, and keep your bedroom dark, quiet, and cool. Small changes can make a big difference in how you feel and perform during the day.</p>
            </div>
            
            <div class="question-box" id="qbox-9">
                <div class="question-meta">
                    <span>Question 9 of 20</span>
                    <span class="skill-tag">Detail Comprehension</span>
                </div>
                <p class="question-text">According to the passage, what does sleep help the brain do?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(9, 'A', this)">
                        <span class="option-letter">A</span> Grow larger in size
                    </button>
                    <button class="option-btn" onclick="checkAnswer(9, 'B', this)">
                        <span class="option-letter">B</span> Process information, strengthen memories, and clear waste
                    </button>
                    <button class="option-btn" onclick="checkAnswer(9, 'C', this)">
                        <span class="option-letter">C</span> Produce more energy for physical activities
                    </button>
                    <button class="option-btn" onclick="checkAnswer(9, 'D', this)">
                        <span class="option-letter">D</span> Forget unimportant information
                    </button>
                </div>
                <div class="feedback" id="feedback-9"></div>
            </div>
            
            <div class="question-box" id="qbox-10">
                <div class="question-meta">
                    <span>Question 10 of 20</span>
                    <span class="skill-tag">Reference</span>
                </div>
                <p class="question-text">In paragraph 3, what does the word "it" refer to in the phrase "making it harder to fall asleep"?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(10, 'A', this)">
                        <span class="option-letter">A</span> the brain
                    </button>
                    <button class="option-btn" onclick="checkAnswer(10, 'B', this)">
                        <span class="option-letter">B</span> blue light from screens
                    </button>
                    <button class="option-btn" onclick="checkAnswer(10, 'C', this)">
                        <span class="option-letter">C</span> falling asleep
                    </button>
                    <button class="option-btn" onclick="checkAnswer(10, 'D', this)">
                        <span class="option-letter">D</span> thinking it's still daytime
                    </button>
                </div>
                <div class="feedback" id="feedback-10"></div>
            </div>
            
            <div class="question-box" id="qbox-11">
                <div class="question-meta">
                    <span>Question 11 of 20</span>
                    <span class="skill-tag">Detail Comprehension (NOT)</span>
                </div>
                <p class="question-text">Which of the following is NOT mentioned as a strategy for better sleep?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(11, 'A', this)">
                        <span class="option-letter">A</span> Maintaining a consistent sleep schedule
                    </button>
                    <button class="option-btn" onclick="checkAnswer(11, 'B', this)">
                        <span class="option-letter">B</span> Avoiding screens before bed
                    </button>
                    <button class="option-btn" onclick="checkAnswer(11, 'C', this)">
                        <span class="option-letter">C</span> Drinking coffee in the evening
                    </button>
                    <button class="option-btn" onclick="checkAnswer(11, 'D', this)">
                        <span class="option-letter">D</span> Keeping the bedroom dark and quiet
                    </button>
                </div>
                <div class="feedback" id="feedback-11"></div>
            </div>
            
            <div class="question-box" id="qbox-12">
                <div class="question-meta">
                    <span>Question 12 of 20</span>
                    <span class="skill-tag">Inference</span>
                </div>
                <p class="question-text">Based on the passage, why might a student who stays up late using their phone struggle in school the next day?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(12, 'A', this)">
                        <span class="option-letter">A</span> They will have more time to study
                    </button>
                    <button class="option-btn" onclick="checkAnswer(12, 'B', this)">
                        <span class="option-letter">B</span> Their brain won't have processed information properly during sleep
                    </button>
                    <button class="option-btn" onclick="checkAnswer(12, 'C', this)">
                        <span class="option-letter">C</span> They will be more creative without sleep
                    </button>
                    <button class="option-btn" onclick="checkAnswer(12, 'D', this)">
                        <span class="option-letter">D</span> Their phone will be fully charged for school
                    </button>
                </div>
                <div class="feedback" id="feedback-12"></div>
            </div>
        </div>
        
        <!-- Passage 4 -->
        <div class="passage-section" data-passage="4">
            <h2 class="passage-title">Passage 4: Digital Tools for Learning</h2>
            <div class="passage-text">
                <p>Technology has transformed how students learn. Educational apps, online resources, and digital collaboration tools offer new ways to engage with material. However, using technology effectively requires intention and strategy.</p>
                <p>When used well, digital tools can provide instant access to information, personalized learning paths, and opportunities for creative expression. For example, language learning apps use spaced repetition to help students remember vocabulary, while video platforms allow learners to pause and review complex concepts.</p>
                <p>But technology also presents challenges. Distractions from social media notifications can break focus during study sessions. The sheer volume of online information can make it difficult to distinguish reliable sources from misinformation. And excessive screen time may contribute to eye strain and sleep problems.</p>
                <p>Experts recommend these practices for productive technology use: set specific goals for each study session, use website blockers during focused work periods, verify information with multiple trusted sources, and follow the 20-20-20 rule (every 20 minutes, look at something 20 feet away for 20 seconds) to reduce eye strain. The goal isn't to avoid technology, but to use it mindfully as a tool for learning.</p>
            </div>
            
            <div class="question-box" id="qbox-13">
                <div class="question-meta">
                    <span>Question 13 of 20</span>
                    <span class="skill-tag">Detail Comprehension</span>
                </div>
                <p class="question-text">According to the passage, what is ONE benefit of educational apps for language learning?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(13, 'A', this)">
                        <span class="option-letter">A</span> They replace the need for teachers
                    </button>
                    <button class="option-btn" onclick="checkAnswer(13, 'B', this)">
                        <span class="option-letter">B</span> They use spaced repetition to help remember vocabulary
                    </button>
                    <button class="option-btn" onclick="checkAnswer(13, 'C', this)">
                        <span class="option-letter">C</span> They guarantee fluency in three months
                    </button>
                    <button class="option-btn" onclick="checkAnswer(13, 'D', this)">
                        <span class="option-letter">D</span> They eliminate the need for practice
                    </button>
                </div>
                <div class="feedback" id="feedback-13"></div>
            </div>
            
            <div class="question-box" id="qbox-14">
                <div class="question-meta">
                    <span>Question 14 of 20</span>
                    <span class="skill-tag">Detail Comprehension</span>
                </div>
                <p class="question-text">What does the "20-20-20 rule" help with, according to the passage?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(14, 'A', this)">
                        <span class="option-letter">A</span> Saving battery life on devices
                    </button>
                    <button class="option-btn" onclick="checkAnswer(14, 'B', this)">
                        <span class="option-letter">B</span> Reducing eye strain during screen use
                    </button>
                    <button class="option-btn" onclick="checkAnswer(14, 'C', this)">
                        <span class="option-letter">C</span> Improving internet connection speed
                    </button>
                    <button class="option-btn" onclick="checkAnswer(14, 'D', this)">
                        <span class="option-letter">D</span> Organizing digital files efficiently
                    </button>
                </div>
                <div class="feedback" id="feedback-14"></div>
            </div>
            
            <div class="question-box" id="qbox-15">
                <div class="question-meta">
                    <span>Question 15 of 20</span>
                    <span class="skill-tag">Text Structure</span>
                </div>
                <p class="question-text">How is paragraph 3 related to paragraph 2 in the passage?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(15, 'A', this)">
                        <span class="option-letter">A</span> Paragraph 3 provides examples that support the ideas in paragraph 2
                    </button>
                    <button class="option-btn" onclick="checkAnswer(15, 'B', this)">
                        <span class="option-letter">B</span> Paragraph 3 presents challenges that contrast with the benefits in paragraph 2
                    </button>
                    <button class="option-btn" onclick="checkAnswer(15, 'C', this)">
                        <span class="option-letter">C</span> Paragraph 3 repeats the same information as paragraph 2 in different words
                    </button>
                    <button class="option-btn" onclick="checkAnswer(15, 'D', this)">
                        <span class="option-letter">D</span> Paragraph 3 introduces a completely new topic unrelated to paragraph 2
                    </button>
                </div>
                <div class="feedback" id="feedback-15"></div>
            </div>
            
            <div class="question-box" id="qbox-16">
                <div class="question-meta">
                    <span>Question 16 of 20</span>
                    <span class="skill-tag">Author's Purpose</span>
                </div>
                <p class="question-text">What is the writer's main purpose in writing this passage?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(16, 'A', this)">
                        <span class="option-letter">A</span> To convince readers to avoid all technology
                    </button>
                    <button class="option-btn" onclick="checkAnswer(16, 'B', this)">
                        <span class="option-letter">B</span> To explain both benefits and challenges of educational technology, and suggest mindful use
                    </button>
                    <button class="option-btn" onclick="checkAnswer(16, 'C', this)">
                        <span class="option-letter">C</span> To promote specific educational apps and websites
                    </button>
                    <button class="option-btn" onclick="checkAnswer(16, 'D', this)">
                        <span class="option-letter">D</span> To argue that traditional learning methods are superior
                    </button>
                </div>
                <div class="feedback" id="feedback-16"></div>
            </div>
        </div>
        
        <!-- Passage 5 -->
        <div class="passage-section" data-passage="5">
            <h2 class="passage-title">Passage 5: Building Resilience</h2>
            <div class="passage-text">
                <p>Resilience‚Äîthe ability to recover from difficulties‚Äîis a skill that can be developed, not an innate trait. Research in psychology shows that resilient people aren't those who never face challenges, but those who have learned effective ways to respond to them.</p>
                <p>One key strategy is cognitive reframing: changing how you interpret difficult situations. Instead of thinking "I failed this test, so I'm bad at math," a resilient person might think "This test was challenging, but I can learn from my mistakes and improve." This shift in perspective reduces helplessness and opens pathways to solutions.</p>
                <p>Another important factor is social support. Having trusted friends, family members, or mentors to talk with during tough times provides emotional comfort and practical advice. Studies show that people with strong support networks recover more quickly from setbacks.</p>
                <p>Finally, resilient people practice self-compassion. They treat themselves with the same kindness they would offer a friend facing similar challenges. This doesn't mean avoiding responsibility, but rather acknowledging difficulties without harsh self-judgment. As psychologist Dr. Elena Martinez notes: "Resilience isn't about bouncing back to where you were‚Äîit's about growing through what you've experienced."</p>
            </div>
            
            <div class="question-box" id="qbox-17">
                <div class="question-meta">
                    <span>Question 17 of 20</span>
                    <span class="skill-tag">Detail Comprehension</span>
                </div>
                <p class="question-text">According to the passage, what is cognitive reframing?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(17, 'A', this)">
                        <span class="option-letter">A</span> Avoiding difficult situations altogether
                    </button>
                    <button class="option-btn" onclick="checkAnswer(17, 'B', this)">
                        <span class="option-letter">B</span> Changing how you interpret difficult situations
                    </button>
                    <button class="option-btn" onclick="checkAnswer(17, 'C', this)">
                        <span class="option-letter">C</span> Asking others to solve your problems
                    </button>
                    <button class="option-btn" onclick="checkAnswer(17, 'D', this)">
                        <span class="option-letter">D</span> Ignoring your emotions during challenges
                    </button>
                </div>
                <div class="feedback" id="feedback-17"></div>
            </div>
            
            <div class="question-box" id="qbox-18">
                <div class="question-meta">
                    <span>Question 18 of 20</span>
                    <span class="skill-tag">Inference</span>
                </div>
                <p class="question-text">Based on the passage, what would a resilient person likely do after receiving a poor grade?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(18, 'A', this)">
                        <span class="option-letter">A</span> Give up on the subject entirely
                    </button>
                    <button class="option-btn" onclick="checkAnswer(18, 'B', this)">
                        <span class="option-letter">B</span> Blame the teacher for the difficult test
                    </button>
                    <button class="option-btn" onclick="checkAnswer(18, 'C', this)">
                        <span class="option-letter">C</span> Analyze mistakes and create a plan to improve
                    </button>
                    <button class="option-btn" onclick="checkAnswer(18, 'D', this)">
                        <span class="option-letter">D</span> Avoid looking at the test to forget about it
                    </button>
                </div>
                <div class="feedback" id="feedback-18"></div>
            </div>
            
            <div class="question-box" id="qbox-19">
                <div class="question-meta">
                    <span>Question 19 of 20</span>
                    <span class="skill-tag">Vocabulary in Context</span>
                </div>
                <p class="question-text">In the final paragraph, the word "innate" most nearly means:</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(19, 'A', this)">
                        <span class="option-letter">A</span> learned through experience
                    </button>
                    <button class="option-btn" onclick="checkAnswer(19, 'B', this)">
                        <span class="option-letter">B</span> present from birth; natural
                    </button>
                    <button class="option-btn" onclick="checkAnswer(19, 'C', this)">
                        <span class="option-letter">C</span> difficult to understand
                    </button>
                    <button class="option-btn" onclick="checkAnswer(19, 'D', this)">
                        <span class="option-letter">D</span> easily changed or improved
                    </button>
                </div>
                <div class="feedback" id="feedback-19"></div>
            </div>
            
            <div class="question-box" id="qbox-20">
                <div class="question-meta">
                    <span>Question 20 of 20</span>
                    <span class="skill-tag">Main Idea</span>
                </div>
                <p class="question-text">What is the central message of this passage about resilience?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(20, 'A', this)">
                        <span class="option-letter">A</span> Resilience is a fixed trait that only some people have
                    </button>
                    <button class="option-btn" onclick="checkAnswer(20, 'B', this)">
                        <span class="option-letter">B</span> Resilience can be developed through specific strategies like reframing, support, and self-compassion
                    </button>
                    <button class="option-btn" onclick="checkAnswer(20, 'C', this)">
                        <span class="option-letter">C</span> Avoiding challenges is the best way to stay resilient
                    </button>
                    <button class="option-btn" onclick="checkAnswer(20, 'D', this)">
                        <span class="option-letter">D</span> Resilience is only important for academic success
                    </button>
                </div>
                <div class="feedback" id="feedback-20"></div>
            </div>
        </div>
        
        <!-- Navigation -->
        <div class="navigation" id="navigation">
            <button class="nav-btn prev" onclick="prevSection()" id="prev-btn" disabled>‚Üê Previous</button>
            <span class="passage-indicator" id="passage-indicator">Passage 1 of 5</span>
            <button class="nav-btn next" onclick="nextSection()" id="next-btn">Next ‚Üí</button>
        </div>
        
        <!-- Results Screen -->
        <div class="results-screen" id="results-screen">
            <div class="results-header">
                <h2>Test Completed!</h2>
                <p>Here are your results for Reading Practice 01</p>
            </div>
            
            <div class="score-circle" id="final-score">0/20</div>
            
            <div class="results-meta">
                <div class="meta-item">
                    <div class="meta-label">Tester Name</div>
                    <div class="meta-value" id="result-name">-</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Date & Time</div>
                    <div class="meta-value" id="result-datetime">-</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Time Taken</div>
                    <div class="meta-value" id="result-duration">-</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Accuracy</div>
                    <div class="meta-value" id="result-accuracy">0%</div>
                </div>
            </div>
            
            <div class="skills-summary">
                <h3>Reading Skills Analysis</h3>
                <div id="skills-breakdown">
                    <!-- Skills breakdown will be inserted here by JavaScript -->
                </div>
            </div>
            
            <div class="export-section">
                <h3>Share Your Results</h3>
                <div class="export-buttons">
                    <button class="export-btn btn-wechat" onclick="copyForWeChat()">
                        üí¨ Copy for WeChat
                    </button>
                    <button class="export-btn btn-email" onclick="emailResults()">
                        üìß Email Results
                    </button>
                    <button class="export-btn btn-lms" onclick="downloadForLMS()">
                        üì§ Download for LMS
                    </button>
                    <button class="export-btn btn-download" onclick="downloadPDF()">
                        üìÑ Save as PDF
                    </button>
                </div>
            </div>
            
            <button class="start-btn" onclick="restartTest()" style="margin-top: 20px;">
                üîÑ Take Another Practice Test
            </button>
        </div>
    </div>
    
    <div class="toast" id="toast">Results copied to clipboard!</div>
    
    <script>
        // Answer Key & Explanations with Skill Mapping
        const answers = {
            1: { 
                correct: 'D', 
                explanation: '‚úÖ Correct! The Art Workshop description states: "Help children create art projects."<br><br>‚ùå A: Tree Planting is for planting trees.<br>‚ùå B: Recycling Drive is for sorting recyclables.<br>‚ùå C: Bird Watching is for counting birds.',
                skill: 'Detail Comprehension'
            },
            2: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! The "How to join" section states: "Wait for our confirmation message (sent within 2 days)."<br><br>‚ùå A: Not immediate.<br>‚ùå C: Not on activity day.<br>‚ùå D: Not one week before.',
                skill: 'Detail Comprehension'
            },
            3: { 
                correct: 'C', 
                explanation: '‚úÖ Correct! The note section states: "All volunteers receive a certificate and a community T-shirt."<br><br>‚ùå A: Volunteers under 16 can join with a parent.<br>‚ùå B: Only basic skills preferred for Art Workshop.<br>‚ùå D: Sign up is via QR code, not phone.',
                skill: 'Detail Comprehension'
            },
            4: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Context shows "A quiet voice is essential" means it\'s absolutely necessary for bird watching.<br><br>‚ùå A: "Essential" means necessary, not optional.<br>‚ùå C: Not about interest level.<br>‚ùå D: Not about difficulty.',
                skill: 'Vocabulary in Context'
            },
            5: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 1 states: "I was terrified of speaking in front of others."<br><br>‚ùå A: Coach was supportive, not strict.<br>‚ùå C: Meeting length not mentioned.<br>‚ùå D: Topics not discussed as an issue.',
                skill: 'Detail Comprehension'
            },
            6: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Coach said: "The secret isn\'t talent‚Äîit\'s practice," showing he valued practice over natural ability.<br><br>‚ùå A: He helped a struggling student.<br>‚ùå C: He worked with nervous students.<br>‚ùå D: Focus was on progress, not just winning.',
                skill: 'Inference'
            },
            7: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Context shows "my voice would tremble" alongside "hands would shake" and "mind would go blank" - all signs of nervousness.<br><br>‚ùå A: Opposite of trembling.<br>‚ùå C: That\'s "mind going blank".<br>‚ùå D: Not indicated.',
                skill: 'Vocabulary in Context'
            },
            8: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Final paragraph states: "progress, not perfection, is the real goal" and describes breaking challenges into small steps.<br><br>‚ùå A: Opposite of passage message.<br>‚ùå C: Too narrow; not the main lesson.<br>‚ùå D: Passage says courage is moving forward despite fear.',
                skill: 'Main Idea'
            },
            9: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 1 states sleep helps brain "process information from the day, strengthen memories, and clear away waste products."<br><br>‚ùå A: Not mentioned.<br>‚ùå C: Not the focus.<br>‚ùå D: Opposite of memory strengthening.',
                skill: 'Detail Comprehension'
            },
            10: { 
                correct: 'C', 
                explanation: '‚úÖ Correct! "Making it harder to fall asleep" - "it" refers to the action of falling asleep, which is made harder by blue light.<br><br>‚ùå A: Brain is the subject, not the object.<br>‚ùå B: Blue light is the cause, not what\'s made harder.<br>‚ùå D: That\'s what the brain thinks, not what\'s made harder.',
                skill: 'Reference'
            },
            11: { 
                correct: 'C', 
                explanation: '‚úÖ Correct! Coffee is NOT mentioned; in fact, avoiding stimulants before bed would be logical advice.<br><br>‚ùå A, B, D: All explicitly listed as sleep strategies in paragraph 4.',
                skill: 'Detail Comprehension (NOT)'
            },
            12: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Passage states sleep helps brain "process information" and "strengthen memories" - without this, learning is impaired.<br><br>‚ùå A: Less sleep = less study time.<br>‚ùå C: Not supported; sleep deprivation reduces creativity.<br>‚ùå D: Irrelevant to academic performance.',
                skill: 'Inference'
            },
            13: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 2 states: "language learning apps use spaced repetition to help students remember vocabulary."<br><br>‚ùå A: Apps supplement, don\'t replace teachers.<br>‚ùå C: No guarantee mentioned.<br>‚ùå D: Practice is still essential.',
                skill: 'Detail Comprehension'
            },
            14: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! The 20-20-20 rule is introduced in the context of reducing eye strain from screen use.<br><br>‚ùå A, C, D: Not related to the rule\'s purpose as described.',
                skill: 'Detail Comprehension'
            },
            15: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 2 lists benefits of technology; paragraph 3 begins with "But technology also presents challenges" - a clear contrast structure.<br><br>‚ùå A: Examples were in paragraph 2.<br>‚ùå C: Not repetition; new content.<br>‚ùå D: Directly related as contrasting ideas.',
                skill: 'Text Structure'
            },
            16: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Passage presents both benefits (para 2) and challenges (para 3) of edtech, then suggests mindful use strategies (para 4).<br><br>‚ùå A: Opposite; passage encourages mindful use, not avoidance.<br>‚ùå C: No specific products promoted.<br>‚ùå D: Passage values technology when used well.',
                skill: 'Author\'s Purpose'
            },
            17: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 2 defines cognitive reframing as: "changing how you interpret difficult situations."<br><br>‚ùå A: Avoidance isn\'t reframing.<br>‚ùå C: That\'s seeking support, not reframing.<br>‚ùå D: Opposite of acknowledging emotions.',
                skill: 'Detail Comprehension'
            },
            18: { 
                correct: 'C', 
                explanation: '‚úÖ Correct! Resilient people use cognitive reframing: "This test was challenging, but I can learn from my mistakes and improve."<br><br>‚ùå A, B, D: All represent non-resilient responses described in the passage as unhelpful.',
                skill: 'Inference'
            },
            19: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Passage states resilience "is a skill that can be developed, not an innate trait" - contrasting learnable vs. born-with qualities.<br><br>‚ùå A: That\'s the opposite of innate.<br>‚ùå C: Not about difficulty of understanding.<br>‚ùå D: Innate traits are typically hard to change.',
                skill: 'Vocabulary in Context'
            },
            20: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Passage opens by stating resilience "is a skill that can be developed," then details three strategies (reframing, support, self-compassion).<br><br>‚ùå A: Directly contradicted in first sentence.<br>‚ùå C: Avoidance isn\'t recommended.<br>‚ùå D: Resilience discussed for life challenges generally.',
                skill: 'Main Idea'
            }
        };

        // Question to Passage Mapping
        const questionToPassage = {
            1:1, 2:1, 3:1, 4:1,
            5:2, 6:2, 7:2, 8:2,
            9:3, 10:3, 11:3, 12:3,
            13:4, 14:4, 15:4, 16:4,
            17:5, 18:5, 19:5, 20:5
        };

        // State Variables
        let currentSection = 1;
        let score = 0;
        let answered = {};
        let timerSeconds = 0;
        let timerInterval;
        let testerName = '';
        let testStartTime;
        let testEndTime;

        // DOM Elements
        const startScreen = document.getElementById('start-screen');
        const resultsScreen = document.getElementById('results-screen');
        const nameInput = document.getElementById('tester-name');
        const nameError = document.getElementById('name-error');
        const startBtn = document.getElementById('start-btn');
        const timerDisplay = document.getElementById('timer');
        const scoreDisplay = document.getElementById('score-display');
        const passageIndicator = document.getElementById('passage-indicator');
        const toast = document.getElementById('toast');

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            startBtn.addEventListener('click', startTest);
            nameInput.addEventListener('input', validateName);
        });

        // Name Validation - Block Chinese Characters
        function validateName() {
            const name = nameInput.value.trim();
            // Regex to detect Chinese characters (Unicode range for CJK)
            const hasChinese = /[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u.test(name);
            
            if (hasChinese) {
                nameError.classList.add('show');
                startBtn.disabled = true;
            } else {
                nameError.classList.remove('show');
                startBtn.disabled = name === '';
            }
        }

        // Start Test
        function startTest() {
            testerName = nameInput.value.trim() || 'Anonymous';
            testStartTime = new Date();
            
            // Hide start screen, show first passage
            startScreen.style.display = 'none';
            document.querySelector(`[data-passage="1"]`).classList.add('active');
            
            // Start timer
            startTimer();
            
            // Update header
            updateHeader();
        }

        // Timer Functions
        function startTimer() {
            timerInterval = setInterval(() => {
                timerSeconds++;
                const mins = Math.floor(timerSeconds / 60).toString().padStart(2, '0');
                const secs = (timerSeconds % 60).toString().padStart(2, '0');
                timerDisplay.textContent = `${mins}:${secs}`;
            }, 1000);
        }

        // Check Answer with Feedback
        function checkAnswer(questionNum, selected, btn) {
            if (answered[questionNum]) return; // Prevent multiple answers

            answered[questionNum] = selected;
            const feedback = document.getElementById(`feedback-${questionNum}`);
            const allBtns = btn.parentElement.querySelectorAll('.option-btn');
            
            // Disable all buttons for this question
            allBtns.forEach(b => b.disabled = true);

            // Check answer and provide feedback
            if (selected === answers[questionNum].correct) {
                score++;
                btn.classList.add('correct');
                feedback.classList.add('correct');
                feedback.innerHTML = `<div class="feedback-title">‚úÖ Correct!</div>${answers[questionNum].explanation}`;
            } else {
                btn.classList.add('incorrect');
                feedback.classList.add('incorrect');
                feedback.innerHTML = `<div class="feedback-title">‚ùå Incorrect</div>${answers[questionNum].explanation}`;
                
                // Highlight correct answer
                allBtns.forEach(b => {
                    if (b.textContent.trim().startsWith(answers[questionNum].correct + '.')) {
                        b.classList.add('correct');
                    }
                });
            }

            feedback.style.display = 'block';
            updateScoreDisplay();
            
            // Check if all questions in current passage are answered
            checkPassageComplete();
        }

        // Check if Current Passage is Complete
        function checkPassageComplete() {
            const currentPassageQuestions = [];
            for (let q = 1; q <= 20; q++) {
                if (questionToPassage[q] === currentSection) {
                    currentPassageQuestions.push(q);
                }
            }
            
            const allAnswered = currentPassageQuestions.every(q => answered[q]);
            if (allAnswered && currentSection < 5) {
                document.getElementById('next-btn').textContent = 'Next Passage ‚Üí';
            }
        }

        // Navigation Functions
        function nextSection() {
            // Check if all questions in current passage are answered
            const currentPassageQuestions = [];
            for (let q = 1; q <= 20; q++) {
                if (questionToPassage[q] === currentSection) {
                    currentPassageQuestions.push(q);
                }
            }
            
            const allAnswered = currentPassageQuestions.every(q => answered[q]);
            if (!allAnswered) {
                alert(`Please answer all ${currentPassageQuestions.length} questions in this passage before continuing.`);
                return;
            }
            
            // If all 20 questions answered, show results
            if (Object.keys(answered).length === 20) {
                showResults();
                return;
            }
            
            // Move to next passage
            if (currentSection < 5) {
                document.querySelector(`[data-passage="${currentSection}"]`).classList.remove('active');
                currentSection++;
                document.querySelector(`[data-passage="${currentSection}"]`).classList.add('active');
                updateHeader();
                document.getElementById('prev-btn').disabled = false;
                window.scrollTo(0, 0);
            }
        }

        function prevSection() {
            if (currentSection > 1) {
                document.querySelector(`[data-passage="${currentSection}"]`).classList.remove('active');
                currentSection--;
                document.querySelector(`[data-passage="${currentSection}"]`).classList.add('active');
                updateHeader();
                document.getElementById('next-btn').textContent = 'Next ‚Üí';
                if (currentSection === 1) {
                    document.getElementById('prev-btn').disabled = true;
                }
                window.scrollTo(0, 0);
            }
        }

        // Update Header Display
        function updateHeader() {
            passageIndicator.textContent = `Passage ${currentSection} of 5`;
            updateScoreDisplay();
        }

        function updateScoreDisplay() {
            scoreDisplay.textContent = `${score}/${Object.keys(answered).length}`;
        }

        // Show Results Screen
        function showResults() {
            testEndTime = new Date();
            clearInterval(timerInterval);
            
            // Hide navigation and current passage
            document.getElementById('navigation').style.display = 'none';
            document.querySelector(`[data-passage="${currentSection}"]`).classList.remove('active');
            
            // Show results screen
            resultsScreen.classList.add('active');
            
            // Populate results
            document.getElementById('result-name').textContent = testerName;
            document.getElementById('result-datetime').textContent = testEndTime.toLocaleString();
            
            // Calculate duration
            const durationMs = testEndTime - testStartTime;
            const durationMins = Math.floor(durationMs / 60000);
            const durationSecs = Math.floor((durationMs % 60000) / 1000);
            document.getElementById('result-duration').textContent = 
                `${durationMins}m ${durationSecs.toString().padStart(2, '0')}s`;
            
            // Calculate and display final score
            const finalScore = `${score}/20`;
            document.getElementById('final-score').textContent = finalScore;
            document.getElementById('result-accuracy').textContent = 
                `${Math.round((score / 20) * 100)}%`;
            
            // Generate skills breakdown
            generateSkillsBreakdown();
        }

        // Generate Skills Analysis
        function generateSkillsBreakdown() {
            const skillsBreakdown = document.getElementById('skills-breakdown');
            skillsBreakdown.innerHTML = '';
            
            // Group questions by skill
            const skillGroups = {};
            for (let q = 1; q <= 20; q++) {
                const skill = answers[q].skill;
                if (!skillGroups[skill]) {
                    skillGroups[skill] = { total: 0, correct: 0, questions: [] };
                }
                skillGroups[skill].total++;
                if (answered[q] === answers[q].correct) {
                    skillGroups[skill].correct++;
                } else {
                    skillGroups[skill].questions.push(q);
                }
            }
            
            // Create skill items
            Object.entries(skillGroups).forEach(([skill, data]) => {
                const isMastered = data.correct === data.total;
                const skillItem = document.createElement('div');
                skillItem.className = `skill-item ${isMastered ? 'mastered' : 'missed'}`;
                
                let missedInfo = '';
                if (!isMastered && data.questions.length > 0) {
                    missedInfo = `<br><small style="color: #721c24">Missed questions: ${data.questions.join(', ')}</small>`;
                }
                
                skillItem.innerHTML = `
                    <div>
                        <strong>${skill}</strong>
                        <div style="font-size: 0.9rem; color: #6c757d">${data.correct}/${data.total} correct</div>
                        ${missedInfo}
                    </div>
                    <div style="font-weight: bold; color: ${isMastered ? '#27ae60' : '#e74c3c'}">
                        ${isMastered ? '‚úì Mastered' : '‚ö† Review'}
                    </div>
                `;
                skillsBreakdown.appendChild(skillItem);
            });
        }

        // Export Functions
        function copyForWeChat() {
            const durationMs = testEndTime - testStartTime;
            const durationMins = Math.floor(durationMs / 60000);
            const durationSecs = Math.floor((durationMs % 60000) / 1000);
            const accuracy = Math.round((score / 20) * 100);
            
            const text = `üìö Reading Practice 01 Results\n\n` +
                         `üë§ Name: ${testerName}\n` +
                         `üìÖ Date: ${testEndTime.toLocaleDateString()}\n` +
                         `‚è±Ô∏è Time: ${durationMins}m ${durationSecs}s\n` +
                         `‚úÖ Score: ${score}/20 (${accuracy}%)\n\n` +
                         `üìä Skills Review:\n`;
            
            // Add skills summary
            const skillGroups = {};
            for (let q = 1; q <= 20; q++) {
                const skill = answers[q].skill;
                if (!skillGroups[skill]) skillGroups[skill] = { total: 0, correct: 0 };
                skillGroups[skill].total++;
                if (answered[q] === answers[q].correct) skillGroups[skill].correct++;
            }
            
            Object.entries(skillGroups).forEach(([skill, data]) => {
                const status = data.correct === data.total ? '‚úì' : '‚ö†';
                text += `${status} ${skill}: ${data.correct}/${data.total}\n`;
            });
            
            text += `\nüí° Focus on skills marked with ‚ö† for improvement.`;
            
            // Copy to clipboard (WeChat-compatible method)
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-9999px';
            document.body.appendChild(textArea);
            textArea.select();
            
            try {
                document.execCommand('copy');
                showToast('Results copied! Paste in WeChat to share.');
            } catch (err) {
                alert('Please manually copy these results:\n\n' + text);
            }
            
            document.body.removeChild(textArea);
        }

        function emailResults() {
            const durationMs = testEndTime - testStartTime;
            const durationMins = Math.floor(durationMs / 60000);
            const durationSecs = Math.floor((durationMs % 60000) / 1000);
            const accuracy = Math.round((score / 20) * 100);
            
            let emailBody = `Reading Practice 01 Results\n\n`;
            emailBody += `Student: ${testerName}\n`;
            emailBody += `Date Completed: ${testEndTime.toLocaleString()}\n`;
            emailBody += `Time Taken: ${durationMins} minutes, ${durationSecs} seconds\n`;
            emailBody += `Score: ${score} out of 20 questions (${accuracy}% accuracy)\n\n`;
            
            emailBody += `Detailed Results:\n`;
            emailBody += `----------------\n`;
            
            // Add each question result
            for (let q = 1; q <= 20; q++) {
                const isCorrect = answered[q] === answers[q].correct;
                emailBody += `Q${q} [${answers[q].skill}]: ${isCorrect ? '‚úì Correct' : '‚úó Incorrect'}\n`;
            }
            
            emailBody += `\nSkills Analysis:\n`;
            const skillGroups = {};
            for (let q = 1; q <= 20; q++) {
                const skill = answers[q].skill;
                if (!skillGroups[skill]) skillGroups[skill] = { total: 0, correct: 0 };
                skillGroups[skill].total++;
                if (answered[q] === answers[q].correct) skillGroups[skill].correct++;
            }
            
            Object.entries(skillGroups).forEach(([skill, data]) => {
                emailBody += `- ${skill}: ${data.correct}/${data.total} correct\n`;
            });
            
            const subject = encodeURIComponent(`Reading Practice 01 Results - ${testerName}`);
            const body = encodeURIComponent(emailBody);
            
            window.location.href = `mailto:?subject=${subject}&body=${body}`;
        }

        function downloadForLMS() {
            // Create JSON object for LMS upload
            const resultsData = {
                testName: "Reading Practice 01",
                studentName: testerName,
                completedAt: testEndTime.toISOString(),
                durationSeconds: timerSeconds,
                totalQuestions: 20,
                correctAnswers: score,
                accuracyPercent: Math.round((score / 20) * 100),
                questionResults: [],
                skillsAnalysis: {}
            };
            
            // Add question results
            for (let q = 1; q <= 20; q++) {
                resultsData.questionResults.push({
                    questionNumber: q,
                    skill: answers[q].skill,
                    selectedAnswer: answered[q],
                    correctAnswer: answers[q].correct,
                    isCorrect: answered[q] === answers[q].correct
                });
            }
            
            // Add skills analysis
            const skillGroups = {};
            for (let q = 1; q <= 20; q++) {
                const skill = answers[q].skill;
                if (!skillGroups[skill]) {
                    skillGroups[skill] = { 
                        totalQuestions: 0, 
                        correctAnswers: 0,
                        missedQuestions: []
                    };
                }
                skillGroups[skill].totalQuestions++;
                if (answered[q] === answers[q].correct) {
                    skillGroups[skill].correctAnswers++;
                } else {
                    skillGroups[skill].missedQuestions.push(q);
                }
            }
            resultsData.skillsAnalysis = skillGroups;
            
            // Create and download JSON file
            const dataStr = "text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(resultsData, null, 2));
            const downloadAnchorNode = document.createElement('a');
            downloadAnchorNode.setAttribute("href", dataStr);
            downloadAnchorNode.setAttribute("download", `reading_practice_01_${testerName.replace(/\s+/g, '_')}_${new Date().toISOString().slice(0,10)}.json`);
            document.body.appendChild(downloadAnchorNode);
            downloadAnchorNode.click();
            downloadAnchorNode.remove();
            
            showToast('Results downloaded for LMS upload!');
        }

        function downloadPDF() {
            // In a real implementation, this would use a library like jsPDF
            // For this demo, we'll show an alert with instructions
            alert(`PDF generation requires additional libraries. For this demo:\n\n1. Copy your results using the "Copy for WeChat" button\n2. Paste into a document\n3. Save as PDF using your browser's print function (Ctrl+P ‚Üí Save as PDF)\n\nIn a production version, this would generate a professional PDF report automatically.`);
        }

        function showToast(message) {
            toast.textContent = message;
            toast.style.display = 'block';
            setTimeout(() => {
                toast.style.display = 'none';
            }, 3000);
        }

        // Restart Test
        function restartTest() {
            // Reset state
            currentSection = 1;
            score = 0;
            answered = {};
            timerSeconds = 0;
            testerName = '';
            
            // Clear UI
            nameInput.value = '';
            nameError.classList.remove('show');
            startBtn.disabled = true;
            document.getElementById('next-btn').textContent = 'Next ‚Üí';
            document.getElementById('prev-btn').disabled = true;
            document.getElementById('passage-indicator').textContent = 'Passage 1 of 5';
            
            // Reset questions
            document.querySelectorAll('.feedback').forEach(fb => {
                fb.style.display = 'none';
                fb.classList.remove('correct', 'incorrect');
            });
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('correct', 'incorrect');
                btn.disabled = false;
            });
            
            // Hide results, show start screen
            resultsScreen.classList.remove('active');
            startScreen.style.display = 'block';
            
            // Reset timer display
            timerDisplay.textContent = '00:00';
            scoreDisplay.textContent = '0/0';
            
            // Stop any running timer
            clearInterval(timerInterval);
        }
    </script>
</body>
</html>