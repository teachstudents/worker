<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading Practice 06</title>
    <style>
        :root {
            --primary: #1a4d7a;
            --secondary: #2e7d32;
            --success: #388e3c;
            --error: #c62828;
            --warning: #ef6c00;
            --light: #f1f8e9;
            --dark: #0d2137;
            --gray: #455a64;
            --border: #c5cae9;
            --shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
            font-size: 16px;
            line-height: 1.6;
            color: #263238;
            background-color: #eceff1;
            padding: 15px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: var(--shadow);
            overflow: visible;
        }
        
        /* Header Styles */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .header-title {
            font-size: 1.4rem;
            font-weight: 600;
        }
        
        .header-stats {
            display: flex;
            gap: 20px;
            font-size: 1rem;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .timer {
            font-weight: bold;
            color: #ffcc80;
        }
        
        .score-display {
            font-weight: bold;
        }
        
        /* Start Screen */
        .start-screen {
            padding: 40px;
            text-align: center;
        }
        
        .start-screen h2 {
            margin-bottom: 25px;
            color: var(--primary);
            font-size: 1.8rem;
        }
        
        .name-input-group {
            margin: 30px 0;
        }
        
        .name-input-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            font-size: 1.1rem;
        }
        
        .name-input {
            width: 100%;
            max-width: 400px;
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1.1rem;
            transition: border-color 0.3s;
        }
        
        .name-input:focus {
            outline: none;
            border-color: var(--secondary);
        }
        
        .error-message {
            color: var(--error);
            margin-top: 8px;
            font-size: 0.95rem;
            display: none;
        }
        
        .error-message.show {
            display: block;
        }
        
        .start-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 14px 35px;
            font-size: 1.1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
            font-weight: 500;
            margin-top: 10px;
        }
        
        .start-btn:hover {
            background: #2e7d32;
        }
        
        .start-btn:disabled {
            background: #90a4ae;
            cursor: not-allowed;
        }
        
        .instructions {
            background: var(--light);
            border-left: 4px solid var(--secondary);
            padding: 15px;
            margin: 25px 0;
            border-radius: 0 8px 8px 0;
            text-align: left;
        }
        
        .instructions ul {
            padding-left: 20px;
            margin-top: 10px;
        }
        
        .instructions li {
            margin-bottom: 5px;
        }
        
        /* Two-Column Layout for Test Content */
        .test-layout {
            display: none;
            padding: 20px;
            gap: 20px;
        }
        
        .test-layout.active {
            display: grid;
            grid-template-columns: 3fr 1fr; /* 75% text, 25% questions */
            animation: fadeIn 0.4s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Left Column: Passage Text */
        .passage-column {
            padding-right: 15px;
            border-right: 1px solid var(--border);
            max-height: calc(100vh - 150px);
            overflow-y: auto;
        }
        
        .passage-title {
            color: var(--primary);
            font-size: 1.5rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--secondary);
        }
        
        .passage-text {
            background: var(--light);
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 1.05rem;
            line-height: 1.7;
            border-left: 4px solid var(--secondary);
        }
        
        /* Right Column: Questions - FIXED SCROLLING */
        .questions-column {
            padding-left: 15px;
            overflow-y: auto;
            max-height: calc(100vh - 150px);
            padding-bottom: 20px;
            position: relative;
            z-index: 10;
        }
        
        .question-box {
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        
        .question-text {
            font-size: 1rem;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 12px;
            line-height: 1.5;
        }
        
        .question-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.85rem;
            color: var(--gray);
        }
        
        .skill-tag {
            background: #e8f5e9;
            color: var(--secondary);
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 500;
            font-size: 0.8rem;
        }
        
        .options {
            display: grid;
            gap: 8px;
            margin-top: 8px;
        }
        
        .option-btn {
            padding: 10px 15px;
            border: 2px solid var(--border);
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.95rem;
            text-align: left;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .option-btn:hover {
            background: #f5f5f5;
            border-color: var(--secondary);
        }
        
        .option-btn.correct {
            background: #c8e6c9;
            border-color: var(--success);
            color: #1b5e20;
            font-weight: 500;
        }
        
        .option-btn.incorrect {
            background: #ffcdd2;
            border-color: var(--error);
            color: #b71c1c;
            font-weight: 500;
        }
        
        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.85;
        }
        
        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--secondary);
            color: white;
            font-weight: bold;
            font-size: 0.85rem;
            flex-shrink: 0;
        }
        
        .option-btn.correct .option-letter {
            background: var(--success);
        }
        
        .option-btn.incorrect .option-letter {
            background: var(--error);
        }
        
        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 6px;
            display: none;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .feedback.correct {
            background: #c8e6c9;
            border: 1px solid var(--success);
            color: #1b5e20;
        }
        
        .feedback.incorrect {
            background: #ffcdd2;
            border: 1px solid var(--error);
            color: #b71c1c;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 3px;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.95rem;
        }
        
        /* Navigation */
        .navigation {
            padding: 15px 25px;
            background: var(--light);
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-btn {
            padding: 10px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .nav-btn.prev {
            background: #78909c;
            color: white;
        }
        
        .nav-btn.next {
            background: var(--secondary);
            color: white;
        }
        
        .nav-btn.next:hover {
            background: #2e7d32;
        }
        
        .nav-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .passage-indicator {
            font-weight: 500;
            color: var(--primary);
            font-size: 1rem;
        }
        
        /* Results Screen */
        .results-screen {
            padding: 30px;
            display: none;
            text-align: center;
        }
        
        .results-screen.active {
            display: block;
        }
        
        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--success) 0%, #43a047 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            margin: 0 auto 25px;
            box-shadow: 0 4px 15px rgba(46, 125, 50, 0.4);
        }
        
        .results-header {
            margin-bottom: 30px;
        }
        
        .results-header h2 {
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .results-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 25px 0;
            text-align: left;
        }
        
        .meta-item {
            background: var(--light);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--secondary);
        }
        
        .meta-label {
            font-size: 0.9rem;
            color: var(--gray);
            margin-bottom: 5px;
        }
        
        .meta-value {
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--dark);
        }
        
        .skills-summary {
            margin: 30px 0;
            text-align: left;
        }
        
        .skills-summary h3 {
            margin-bottom: 15px;
            color: var(--primary);
            font-size: 1.4rem;
        }
        
        .skill-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            background: var(--light);
        }
        
        .skill-item.missed {
            background: #ffebee;
            border-left: 4px solid var(--error);
        }
        
        .skill-item.mastered {
            border-left: 4px solid var(--success);
        }
        
        .export-section {
            margin: 35px 0;
            padding-top: 25px;
            border-top: 1px solid var(--border);
        }
        
        .export-section h3 {
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 1.4rem;
        }
        
        .export-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .export-btn {
            padding: 14px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.05rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        .btn-wechat {
            background: #07c160;
            color: white;
        }
        
        .btn-email {
            background: var(--error);
            color: white;
        }
        
        .btn-lms {
            background: var(--secondary);
            color: white;
        }
        
        .btn-download {
            background: #5e35b1;
            color: white;
        }
        
        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--dark);
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            display: none;
            animation: slideIn 0.3s, fadeOut 0.3s 2.7s forwards;
        }
        
        @keyframes slideIn {
            from { transform: translateX(200px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        /* Responsive adjustments */
        @media (max-width: 900px) {
            .test-layout.active {
                grid-template-columns: 1fr; /* Stack on smaller screens */
            }
            
            .passage-column {
                border-right: none;
                border-bottom: 1px solid var(--border);
                padding-right: 0;
                padding-bottom: 15px;
                margin-bottom: 15px;
                max-height: none;
            }
            
            .questions-column {
                padding-left: 0;
                max-height: none;
            }
            
            body {
                padding: 10px;
            }
            
            .header {
                padding: 12px 15px;
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .header-stats {
                width: 100%;
                justify-content: center;
            }
            
            .passage-text {
                padding: 20px 15px;
                font-size: 1rem;
            }
            
            .question-box {
                padding: 12px;
            }
            
            .export-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .export-btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header with Timer and Score -->
        <div class="header">
            <div class="header-title">Reading Practice 06</div>
            <div class="header-stats">
                <div class="stat-item">
                    <span>‚è±Ô∏è</span>
                    <span class="timer" id="timer">00:00</span>
                </div>
                <div class="stat-item">
                    <span>‚úÖ</span>
                    <span class="score-display" id="score-display">0/20</span>
                </div>
            </div>
        </div>
        
        <!-- Start Screen -->
        <div class="start-screen" id="start-screen">
            <h2>Welcome to Reading Practice 06</h2>
            <p>Please enter your name to begin the test.</p>
            
            <div class="name-input-group">
                <label for="tester-name">Your Name (Pinyin or English only)</label>
                <input type="text" id="tester-name" class="name-input" placeholder="e.g., Li Hua or Wang Fang">
                <div class="error-message" id="name-error">Please use Pinyin or English characters only. Chinese characters are not accepted.</div>
            </div>
            
            <div class="instructions">
                <p><strong>Test Instructions:</strong></p>
                <ul>
                    <li>Read each passage carefully before answering questions</li>
                    <li>Select the best answer for each question</li>
                    <li>You will receive immediate feedback after each answer</li>
                    <li>The test has 20 questions across 5 passages</li>
                    <li>Estimated time: 35-40 minutes</li>
                </ul>
            </div>
            
            <button class="start-btn" id="start-btn">Start Test</button>
        </div>
        
        <!-- Test Layout: Two Columns -->
        <div class="test-layout" id="test-layout">
            <!-- Left Column: Passage Text -->
            <div class="passage-column">
                <!-- Passage 1: Traditional Chinese Festivals -->
                <div class="passage-section active" data-passage="1">
                    <h2 class="passage-title">Passage 1: Traditional Chinese Festivals</h2>
                    <div class="passage-text">
                        <p>China has many traditional festivals that bring families together and celebrate Chinese culture. These festivals follow the lunar calendar and have been celebrated for thousands of years.</p>
                        <p><strong>üßß Spring Festival (Chinese New Year):</strong> The most important festival, usually in January or February. Families clean their homes, prepare special foods like dumplings, and give red envelopes (hongbao) with money for good luck. Fireworks and lion dances celebrate the new year.</p>
                        <p><strong>ü•Æ Mid-Autumn Festival:</strong> Celebrated in September or October when the moon is fullest. Families gather to eat mooncakes, admire the full moon, and share stories about Chang'e, the moon goddess. It symbolizes family reunion and harmony.</p>
                        <p><strong>üêâ Dragon Boat Festival:</strong> Held in June, this festival honors the poet Qu Yuan. People race dragon boats and eat zongzi (sticky rice dumplings wrapped in bamboo leaves). It promotes teamwork and remembrance of cultural heroes.</p>
                        <p><strong>üéã Tips for celebrating:</strong> Learn about the stories behind each festival, try making traditional foods with family, and share these customs with friends from other cultures.</p>
                        <p><em>Remember: These festivals teach us about respect for elders, family unity, and appreciation of Chinese heritage.</em></p>
                    </div>
                </div>
                
                <!-- Passage 2: A Teamwork Story -->
                <div class="passage-section" data-passage="2">
                    <h2 class="passage-title">Passage 2: The School Science Fair</h2>
                    <div class="passage-text">
                        <p>When our teacher announced the school science fair, I felt nervous. "We need to work in teams of four," she said. I hoped to be with my friends, but the teams were chosen randomly.</p>
                        <p>My team included Lin, who loved experiments; Mei, who was great at drawing posters; and Xiao, who could explain ideas clearly. At first, we struggled. Lin wanted to build a volcano; Mei preferred a plant growth project; Xiao suggested a simple circuit. I felt overwhelmed.</p>
                        <p>Then our teacher reminded us: "Teamwork means listening to each other and finding a solution together." We took a deep breath and shared our ideas again. Slowly, we combined our strengths: Lin's experiment skills, Mei's art, Xiao's explanations, and my organization. We created a project about renewable energy using a small solar panel.</p>
                        <p>On fair day, we presented our project confidently. We didn't win first prize, but we learned something more valuable: when people with different talents work together respectfully, they can achieve great things. As our teacher said: "Unity is strength."</p>
                    </div>
                </div>
                
                <!-- Passage 3: Protecting Our Environment -->
                <div class="passage-section" data-passage="3">
                    <h2 class="passage-title">Passage 3: Green Actions for a Better China</h2>
                    <div class="passage-text">
                        <p>China is taking important steps to protect the environment and build a beautiful, sustainable future. Everyone can contribute through small, daily actions.</p>
                        <p><strong>‚ôªÔ∏è Reduce, Reuse, Recycle:</strong> Sort waste into recyclables, kitchen waste, hazardous waste, and other waste. Use reusable bags, bottles, and containers. Repair items instead of replacing them when possible.</p>
                        <p><strong>üö≤ Green Transportation:</strong> Walk, cycle, or use public transport like buses and subways for short trips. Many Chinese cities have expanded bike-sharing programs and electric bus fleets to reduce air pollution.</p>
                        <p><strong>üå≥ Plant Trees and Protect Nature:</strong> Participate in community tree-planting activities. Protect parks and green spaces. Learn about native plants and animals in your area.</p>
                        <p><strong>üí° Save Energy at Home:</strong> Turn off lights and electronics when not in use. Choose energy-efficient appliances. Use natural light during the day.</p>
                        <p>These actions align with China's goals for ecological civilization and sustainable development. As President Xi Jinping has emphasized: "Lucid waters and lush mountains are invaluable assets." Every small effort contributes to a greener, healthier China for future generations.</p>
                    </div>
                </div>
                
                <!-- Passage 4: The Value of Physical Exercise -->
                <div class="passage-section" data-passage="4">
                    <h2 class="passage-title">Passage 4: Exercise for Health and Happiness</h2>
                    <div class="passage-text">
                        <p>Regular physical exercise is essential for students' physical health, mental well-being, and academic performance. The Chinese government encourages young people to exercise at least one hour daily.</p>
                        <p>Benefits of exercise include: stronger muscles and bones, better heart health, improved concentration in class, reduced stress, and better sleep. Team sports like basketball, football, and volleyball also teach cooperation, discipline, and resilience.</p>
                        <p>Many schools in China offer diverse activities: traditional exercises like tai chi and martial arts, modern sports, and dance. Students can choose activities they enjoy, making exercise a joyful habit rather than a chore.</p>
                        <p>Important tips for safe exercise: warm up before activity, stay hydrated, wear appropriate clothing and shoes, and listen to your body. If you feel pain, stop and rest. Exercise should feel good, not hurt.</p>
                        <p>As the saying goes: "A healthy body is the foundation of a successful life." By making exercise a regular part of daily life, students build habits that support lifelong health, happiness, and contribution to society.</p>
                    </div>
                </div>
                
                <!-- Passage 5: Technology and Learning -->
                <div class="passage-section" data-passage="5">
                    <h2 class="passage-title">Passage 5: Using Technology Wisely for Learning</h2>
                    <div class="passage-text">
                        <p>Technology offers powerful tools for learning, but using it wisely is essential. Chinese students can benefit from digital resources while maintaining healthy habits and strong values.</p>
                        <p><strong>‚úÖ Positive uses of technology:</strong> Access educational apps and online courses; research topics for school projects; connect with classmates for group study; learn new skills like coding or digital art.</p>
                        <p><strong>‚ö†Ô∏è Important reminders:</strong> Set time limits for entertainment apps; protect personal information online; verify information from reliable sources; balance screen time with outdoor activities and face-to-face interactions.</p>
                        <p>Many Chinese schools integrate technology thoughtfully: using tablets for interactive lessons, virtual field trips to cultural sites, and platforms that allow teachers to provide personalized feedback. The goal is to enhance learning, not replace human connection.</p>
                        <p>Parents and teachers can help by modeling balanced technology use and discussing digital citizenship. As the Ministry of Education emphasizes: "Technology should serve education, not control it." With wisdom and self-discipline, technology becomes a valuable partner in learning and growth.</p>
                    </div>
                </div>
            </div>
            
            <!-- Right Column: Questions -->
            <div class="questions-column">
                <!-- Questions for Passage 1 -->
                <div class="questions-section active" data-passage="1">
                    <div class="question-box" id="qbox-1">
                        <div class="question-meta">
                            <span>Q1</span>
                            <span class="skill-tag">Detail</span>
                        </div>
                        <p class="question-text">According to the passage, when is the Spring Festival usually celebrated?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(1, 'A', this)">
                                <span class="option-letter">A</span> In March or April
                            </button>
                            <button class="option-btn" onclick="checkAnswer(1, 'B', this)">
                                <span class="option-letter">B</span> In January or February
                            </button>
                            <button class="option-btn" onclick="checkAnswer(1, 'C', this)">
                                <span class="option-letter">C</span> In September or October
                            </button>
                            <button class="option-btn" onclick="checkAnswer(1, 'D', this)">
                                <span class="option-letter">D</span> In June
                            </button>
                        </div>
                        <div class="feedback" id="feedback-1"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-2">
                        <div class="question-meta">
                            <span>Q2</span>
                            <span class="skill-tag">Detail</span>
                        </div>
                        <p class="question-text">What food is traditionally eaten during the Mid-Autumn Festival?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(2, 'A', this)">
                                <span class="option-letter">A</span> Dumplings
                            </button>
                            <button class="option-btn" onclick="checkAnswer(2, 'B', this)">
                                <span class="option-letter">B</span> Zongzi
                            </button>
                            <button class="option-btn" onclick="checkAnswer(2, 'C', this)">
                                <span class="option-letter">C</span> Mooncakes
                            </button>
                            <button class="option-btn" onclick="checkAnswer(2, 'D', this)">
                                <span class="option-letter">D</span> Noodles
                            </button>
                        </div>
                        <div class="feedback" id="feedback-2"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-3">
                        <div class="question-meta">
                            <span>Q3</span>
                            <span class="skill-tag">Detail (NOT)</span>
                        </div>
                        <p class="question-text">Which activity is NOT mentioned for the Dragon Boat Festival?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(3, 'A', this)">
                                <span class="option-letter">A</span> Racing dragon boats
                            </button>
                            <button class="option-btn" onclick="checkAnswer(3, 'B', this)">
                                <span class="option-letter">B</span> Eating zongzi
                            </button>
                            <button class="option-btn" onclick="checkAnswer(3, 'C', this)">
                                <span class="option-letter">C</span> Honoring the poet Qu Yuan
                            </button>
                            <button class="option-btn" onclick="checkAnswer(3, 'D', this)">
                                <span class="option-letter">D</span> Giving red envelopes
                            </button>
                        </div>
                        <div class="feedback" id="feedback-3"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-4">
                        <div class="question-meta">
                            <span>Q4</span>
                            <span class="skill-tag">Vocabulary</span>
                        </div>
                        <p class="question-text">In the passage, "harmony" (in "symbolizes family reunion and harmony") most nearly means:</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(4, 'A', this)">
                                <span class="option-letter">A</span> disagreement and conflict
                            </button>
                            <button class="option-btn" onclick="checkAnswer(4, 'B', this)">
                                <span class="option-letter">B</span> peaceful agreement and unity
                            </button>
                            <button class="option-btn" onclick="checkAnswer(4, 'C', this)">
                                <span class="option-letter">C</span> loud celebration and noise
                            </button>
                            <button class="option-btn" onclick="checkAnswer(4, 'D', this)">
                                <span class="option-letter">D</span> competition and winning
                            </button>
                        </div>
                        <div class="feedback" id="feedback-4"></div>
                    </div>
                </div>
                
                <!-- Questions for Passage 2 -->
                <div class="questions-section" data-passage="2">
                    <div class="question-box" id="qbox-5">
                        <div class="question-meta">
                            <span>Q5</span>
                            <span class="skill-tag">Detail</span>
                        </div>
                        <p class="question-text">Why did the writer feel nervous about the science fair at first?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(5, 'A', this)">
                                <span class="option-letter">A</span> The teacher was strict
                            </button>
                            <button class="option-btn" onclick="checkAnswer(5, 'B', this)">
                                <span class="option-letter">B</span> Teams were chosen randomly, not with friends
                            </button>
                            <button class="option-btn" onclick="checkAnswer(5, 'C', this)">
                                <span class="option-letter">C</span> The writer didn't like science
                            </button>
                            <button class="option-btn" onclick="checkAnswer(5, 'D', this)">
                                <span class="option-letter">D</span> The project was too expensive
                            </button>
                        </div>
                        <div class="feedback" id="feedback-5"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-6">
                        <div class="question-meta">
                            <span>Q6</span>
                            <span class="skill-tag">Inference</span>
                        </div>
                        <p class="question-text">What can we infer about the teacher's advice on teamwork?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(6, 'A', this)">
                                <span class="option-letter">A</span> Teamwork means everyone must agree on everything
                            </button>
                            <button class="option-btn" onclick="checkAnswer(6, 'B', this)">
                                <span class="option-letter">B</span> Teamwork involves listening, sharing ideas, and finding solutions together
                            </button>
                            <button class="option-btn" onclick="checkAnswer(6, 'C', this)">
                                <span class="option-letter">C</span> Teamwork is only important for winning prizes
                            </button>
                            <button class="option-btn" onclick="checkAnswer(6, 'D', this)">
                                <span class="option-letter">D</span> Teamwork means the strongest person leads
                            </button>
                        </div>
                        <div class="feedback" id="feedback-6"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-7">
                        <div class="question-meta">
                            <span>Q7</span>
                            <span class="skill-tag">Vocabulary</span>
                        </div>
                        <p class="question-text">In paragraph 3, "overwhelmed" most probably means:</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(7, 'A', this)">
                                <span class="option-letter">A</span> feeling confident and ready
                            </button>
                            <button class="option-btn" onclick="checkAnswer(7, 'B', this)">
                                <span class="option-letter">B</span> feeling very worried or unable to cope
                            </button>
                            <button class="option-btn" onclick="checkAnswer(7, 'C', this)">
                                <span class="option-letter">C</span> feeling excited and happy
                            </button>
                            <button class="option-btn" onclick="checkAnswer(7, 'D', this)">
                                <span class="option-letter">D</span> feeling bored and uninterested
                            </button>
                        </div>
                        <div class="feedback" id="feedback-7"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-8">
                        <div class="question-meta">
                            <span>Q8</span>
                            <span class="skill-tag">Main Idea</span>
                        </div>
                        <p class="question-text">What is the central message of this passage?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(8, 'A', this)">
                                <span class="option-letter">A</span> Science fairs are only for talented students
                            </button>
                            <button class="option-btn" onclick="checkAnswer(8, 'B', this)">
                                <span class="option-letter">B</span> When people with different talents work together respectfully, they can achieve great things
                            </button>
                            <button class="option-btn" onclick="checkAnswer(8, 'C', this)">
                                <span class="option-letter">C</span> Winning prizes is the most important goal
                            </button>
                            <button class="option-btn" onclick="checkAnswer(8, 'D', this)">
                                <span class="option-letter">D</span> Teachers should choose team members carefully
                            </button>
                        </div>
                        <div class="feedback" id="feedback-8"></div>
                    </div>
                </div>
                
                <!-- Questions for Passage 3 -->
                <div class="questions-section" data-passage="3">
                    <div class="question-box" id="qbox-9">
                        <div class="question-meta">
                            <span>Q9</span>
                            <span class="skill-tag">Detail</span>
                        </div>
                        <p class="question-text">According to the passage, what are the four categories for waste sorting?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(9, 'A', this)">
                                <span class="option-letter">A</span> Paper, plastic, glass, metal
                            </button>
                            <button class="option-btn" onclick="checkAnswer(9, 'B', this)">
                                <span class="option-letter">B</span> Recyclables, kitchen waste, hazardous waste, other waste
                            </button>
                            <button class="option-btn" onclick="checkAnswer(9, 'C', this)">
                                <span class="option-letter">C</span> Organic, inorganic, dangerous, safe
                            </button>
                            <button class="option-btn" onclick="checkAnswer(9, 'D', this)">
                                <span class="option-letter">D</span> Home waste, school waste, public waste, industrial waste
                            </button>
                        </div>
                        <div class="feedback" id="feedback-9"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-10">
                        <div class="question-meta">
                            <span>Q10</span>
                            <span class="skill-tag">Reference</span>
                        </div>
                        <p class="question-text">In paragraph 2, what does "these actions" refer to in "These actions align with China's goals..."?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(10, 'A', this)">
                                <span class="option-letter">A</span> sorting waste, green transport, planting trees, saving energy
                            </button>
                            <button class="option-btn" onclick="checkAnswer(10, 'B', this)">
                                <span class="option-letter">B</span> building new factories
                            </button>
                            <button class="option-btn" onclick="checkAnswer(10, 'C', this)">
                                <span class="option-letter">C</span> using more plastic products
                            </button>
                            <button class="option-btn" onclick="checkAnswer(10, 'D', this)">
                                <span class="option-letter">D</span> driving private cars more often
                            </button>
                        </div>
                        <div class="feedback" id="feedback-10"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-11">
                        <div class="question-meta">
                            <span>Q11</span>
                            <span class="skill-tag">Detail</span>
                        </div>
                        <p class="question-text">Which green transportation method is mentioned in the passage?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(11, 'A', this)">
                                <span class="option-letter">A</span> Flying in private jets
                            </button>
                            <button class="option-btn" onclick="checkAnswer(11, 'B', this)">
                                <span class="option-letter">B</span> Walking, cycling, or using public transport
                            </button>
                            <button class="option-btn" onclick="checkAnswer(11, 'C', this)">
                                <span class="option-letter">C</span> Driving large SUVs
                            </button>
                            <button class="option-btn" onclick="checkAnswer(11, 'D', this)">
                                <span class="option-letter">D</span> Taking taxis for all trips
                            </button>
                        </div>
                        <div class="feedback" id="feedback-11"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-12">
                        <div class="question-meta">
                            <span>Q12</span>
                            <span class="skill-tag">Inference</span>
                        </div>
                        <p class="question-text">Based on the passage, why might individual actions be important for environmental protection?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(12, 'A', this)">
                                <span class="option-letter">A</span> Because individual actions have no real impact
                            </button>
                            <button class="option-btn" onclick="checkAnswer(12, 'B', this)">
                                <span class="option-letter">B</span> Because many small efforts together contribute to larger positive change
                            </button>
                            <button class="option-btn" onclick="checkAnswer(12, 'C', this)">
                                <span class="option-letter">C</span> Because only government actions matter
                            </button>
                            <button class="option-btn" onclick="checkAnswer(12, 'D', this)">
                                <span class="option-letter">D</span> Because individual actions are easier to ignore
                            </button>
                        </div>
                        <div class="feedback" id="feedback-12"></div>
                    </div>
                </div>
                
                <!-- Questions for Passage 4 -->
                <div class="questions-section" data-passage="4">
                    <div class="question-box" id="qbox-13">
                        <div class="question-meta">
                            <span>Q13</span>
                            <span class="skill-tag">Detail</span>
                        </div>
                        <p class="question-text">According to the passage, how much daily exercise does the Chinese government encourage for young people?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(13, 'A', this)">
                                <span class="option-letter">A</span> 15 minutes
                            </button>
                            <button class="option-btn" onclick="checkAnswer(13, 'B', this)">
                                <span class="option-letter">B</span> 30 minutes
                            </button>
                            <button class="option-btn" onclick="checkAnswer(13, 'C', this)">
                                <span class="option-letter">C</span> At least one hour
                            </button>
                            <button class="option-btn" onclick="checkAnswer(13, 'D', this)">
                                <span class="option-letter">D</span> Two hours
                            </button>
                        </div>
                        <div class="feedback" id="feedback-13"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-14">
                        <div class="question-meta">
                            <span>Q14</span>
                            <span class="skill-tag">Detail</span>
                        </div>
                        <p class="question-text">Which benefit of exercise is mentioned regarding mental well-being?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(14, 'A', this)">
                                <span class="option-letter">A</span> Exercise increases stress and anxiety
                            </button>
                            <button class="option-btn" onclick="checkAnswer(14, 'B', this)">
                                <span class="option-letter">B</span> Exercise reduces stress and improves sleep
                            </button>
                            <button class="option-btn" onclick="checkAnswer(14, 'C', this)">
                                <span class="option-letter">C</span> Exercise makes students too tired to study
                            </button>
                            <button class="option-btn" onclick="checkAnswer(14, 'D', this)">
                                <span class="option-letter">D</span> Exercise is only important for athletes
                            </button>
                        </div>
                        <div class="feedback" id="feedback-14"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-15">
                        <div class="question-meta">
                            <span>Q15</span>
                            <span class="skill-tag">Text Structure</span>
                        </div>
                        <p class="question-text">How is paragraph 3 related to paragraph 2 in the passage?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(15, 'A', this)">
                                <span class="option-letter">A</span> Paragraph 3 provides specific examples of exercise activities available in Chinese schools
                            </button>
                            <button class="option-btn" onclick="checkAnswer(15, 'B', this)">
                                <span class="option-letter">B</span> Paragraph 3 introduces a contrasting viewpoint about exercise
                            </button>
                            <button class="option-btn" onclick="checkAnswer(15, 'C', this)">
                                <span class="option-letter">C</span> Paragraph 3 repeats the same information as paragraph 2
                            </button>
                            <button class="option-btn" onclick="checkAnswer(15, 'D', this)">
                                <span class="option-letter">D</span> Paragraph 3 introduces a completely unrelated topic about diet
                            </button>
                        </div>
                        <div class="feedback" id="feedback-15"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-16">
                        <div class="question-meta">
                            <span>Q16</span>
                            <span class="skill-tag">Author's Purpose</span>
                        </div>
                        <p class="question-text">What is the writer's main purpose in writing this passage?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(16, 'A', this)">
                                <span class="option-letter">A</span> To argue that exercise is only for professional athletes
                            </button>
                            <button class="option-btn" onclick="checkAnswer(16, 'B', this)">
                                <span class="option-letter">B</span> To present the benefits of regular exercise and encourage students to make it a joyful habit
                            </button>
                            <button class="option-btn" onclick="checkAnswer(16, 'C', this)">
                                <span class="option-letter">C</span> To promote specific sports equipment brands
                            </button>
                            <button class="option-btn" onclick="checkAnswer(16, 'D', this)">
                                <span class="option-letter">D</span> To criticize students who don't exercise enough
                            </button>
                        </div>
                        <div class="feedback" id="feedback-16"></div>
                    </div>
                </div>
                
                <!-- Questions for Passage 5 -->
                <div class="questions-section" data-passage="5">
                    <div class="question-box" id="qbox-17">
                        <div class="question-meta">
                            <span>Q17</span>
                            <span class="skill-tag">Detail</span>
                        </div>
                        <p class="question-text">According to the passage, what is one positive use of technology for learning?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(17, 'A', this)">
                                <span class="option-letter">A</span> Playing video games all day
                            </button>
                            <button class="option-btn" onclick="checkAnswer(17, 'B', this)">
                                <span class="option-letter">B</span> Accessing educational apps and online courses
                            </button>
                            <button class="option-btn" onclick="checkAnswer(17, 'C', this)">
                                <span class="option-letter">C</span> Sharing personal information publicly
                            </button>
                            <button class="option-btn" onclick="checkAnswer(17, 'D', this)">
                                <span class="option-letter">D</span> Avoiding all face-to-face interactions
                            </button>
                        </div>
                        <div class="feedback" id="feedback-17"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-18">
                        <div class="question-meta">
                            <span>Q18</span>
                            <span class="skill-tag">Inference</span>
                        </div>
                        <p class="question-text">Based on the passage, what might be a result of using technology wisely for learning?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(18, 'A', this)">
                                <span class="option-letter">A</span> Technology becomes a distraction from studies
                            </button>
                            <button class="option-btn" onclick="checkAnswer(18, 'B', this)">
                                <span class="option-letter">B</span> Technology becomes a valuable partner in learning and growth
                            </button>
                            <button class="option-btn" onclick="checkAnswer(18, 'C', this)">
                                <span class="option-letter">C</span> Students become dependent on technology for all thinking
                            </button>
                            <button class="option-btn" onclick="checkAnswer(18, 'D', this)">
                                <span class="option-letter">D</span> Technology replaces the need for teachers
                            </button>
                        </div>
                        <div class="feedback" id="feedback-18"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-19">
                        <div class="question-meta">
                            <span>Q19</span>
                            <span class="skill-tag">Vocabulary</span>
                        </div>
                        <p class="question-text">In the final paragraph, "self-discipline" most nearly means:</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(19, 'A', this)">
                                <span class="option-letter">A</span> letting others control your choices
                            </button>
                            <button class="option-btn" onclick="checkAnswer(19, 'B', this)">
                                <span class="option-letter">B</span> the ability to control your own behavior and make wise choices
                            </button>
                            <button class="option-btn" onclick="checkAnswer(19, 'C', this)">
                                <span class="option-letter">C</span> following rules only when being watched
                            </button>
                            <button class="option-btn" onclick="checkAnswer(19, 'D', this)">
                                <span class="option-letter">D</span> avoiding all technology use
                            </button>
                        </div>
                        <div class="feedback" id="feedback-19"></div>
                    </div>
                    
                    <div class="question-box" id="qbox-20">
                        <div class="question-meta">
                            <span>Q20</span>
                            <span class="skill-tag">Main Idea</span>
                        </div>
                        <p class="question-text">What is the central message of this passage about technology and learning?</p>
                        <div class="options">
                            <button class="option-btn" onclick="checkAnswer(20, 'A', this)">
                                <span class="option-letter">A</span> Technology should be avoided in education
                            </button>
                            <button class="option-btn" onclick="checkAnswer(20, 'B', this)">
                                <span class="option-letter">B</span> With wisdom and self-discipline, technology can be a valuable partner in learning while maintaining healthy habits and strong values
                            </button>
                            <button class="option-btn" onclick="checkAnswer(20, 'C', this)">
                                <span class="option-letter">C</span> Technology is only useful for entertainment
                            </button>
                            <button class="option-btn" onclick="checkAnswer(20, 'D', this)">
                                <span class="option-letter">D</span> Students should use technology without any limits
                            </button>
                        </div>
                        <div class="feedback" id="feedback-20"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Navigation -->
        <div class="navigation" id="navigation">
            <button class="nav-btn prev" onclick="prevSection()" id="prev-btn" disabled>‚Üê Previous</button>
            <span class="passage-indicator" id="passage-indicator">Passage 1 of 5</span>
            <button class="nav-btn next" onclick="nextSection()" id="next-btn">Next ‚Üí</button>
        </div>
        
        <!-- Results Screen -->
        <div class="results-screen" id="results-screen">
            <div class="results-header">
                <h2>Test Completed!</h2>
                <p>Here are your results for Reading Practice 06</p>
            </div>
            
            <div class="score-circle" id="final-score">0/20</div>
            
            <div class="results-meta">
                <div class="meta-item">
                    <div class="meta-label">Tester Name</div>
                    <div class="meta-value" id="result-name">-</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Date & Time</div>
                    <div class="meta-value" id="result-datetime">-</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Time Taken</div>
                    <div class="meta-value" id="result-duration">-</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Accuracy</div>
                    <div class="meta-value" id="result-accuracy">0%</div>
                </div>
            </div>
            
            <div class="skills-summary">
                <h3>Reading Skills Analysis</h3>
                <div id="skills-breakdown">
                    <!-- Skills breakdown will be inserted here by JavaScript -->
                </div>
            </div>
            
            <div class="export-section">
                <h3>Share Your Results</h3>
                <div class="export-buttons">
                    <button class="export-btn btn-wechat" onclick="copyForWeChat()">
                        üí¨ Copy for WeChat
                    </button>
                    <button class="export-btn btn-email" onclick="emailResults()">
                        üìß Email Results
                    </button>
                    <button class="export-btn btn-lms" onclick="downloadForLMS()">
                        üì§ Download for LMS
                    </button>
                    <button class="export-btn btn-download" onclick="downloadPDF()">
                        üìÑ Save as PDF
                    </button>
                </div>
            </div>
            
            <button class="start-btn" onclick="restartTest()" style="margin-top: 20px;">
                üîÑ Take Another Practice Test
            </button>
        </div>
    </div>
    
    <div class="toast" id="toast">Results copied to clipboard!</div>
    
    <script>
        // Answer Key & Explanations with Skill Mapping - Culturally Appropriate Content
        const answers = {
            1: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! The passage states: "Spring Festival (Chinese New Year): The most important festival, usually in January or February."<br><br>‚ùå A: March/April is Qingming Festival time.<br>‚ùå C: September/October is Mid-Autumn Festival.<br>‚ùå D: June is Dragon Boat Festival.',
                skill: 'Detail Comprehension'
            },
            2: { 
                correct: 'C', 
                explanation: '‚úÖ Correct! The Mid-Autumn Festival section states: "Families gather to eat mooncakes."<br><br>‚ùå A: Dumplings are for Spring Festival.<br>‚ùå B: Zongzi are for Dragon Boat Festival.<br>‚ùå D: Noodles aren\'t specifically mentioned for this festival.',
                skill: 'Detail Comprehension'
            },
            3: { 
                correct: 'D', 
                explanation: '‚úÖ Correct! Giving red envelopes (hongbao) is mentioned for Spring Festival, NOT Dragon Boat Festival. Dragon Boat Festival activities include racing boats, eating zongzi, and honoring Qu Yuan.<br><br>‚ùå A, B, C: All explicitly mentioned for Dragon Boat Festival.',
                skill: 'Detail Comprehension (NOT)'
            },
            4: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Context shows Mid-Autumn Festival "symbolizes family reunion and harmony"‚Äîharmony means peaceful agreement and unity among family members.<br><br>‚ùå A: Opposite meaning.<br>‚ùå C: Celebration is part of it, but harmony is about peaceful unity.<br>‚ùå D: Competition isn\'t the focus of this festival.',
                skill: 'Vocabulary in Context'
            },
            5: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 1 states: "I hoped to be with my friends, but the teams were chosen randomly." This caused initial nervousness.<br><br>‚ùå A: Teacher was supportive, not strict.<br>‚ùå C: Writer participated actively in science project.<br>‚ùå D: Cost isn\'t mentioned as a concern.',
                skill: 'Detail Comprehension'
            },
            6: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Teacher said: "Teamwork means listening to each other and finding a solution together." The team then shared ideas and combined strengths.<br><br>‚ùå A: Teamwork doesn\'t require unanimous agreement on everything.<br>‚ùå C: They learned value beyond winning prizes.<br>‚ùå D: Leadership wasn\'t about strength but collaboration.',
                skill: 'Inference'
            },
            7: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Context: "I felt overwhelmed" after teammates had different ideas and the writer didn\'t know how to proceed‚Äîmeaning feeling worried or unable to cope initially.<br><br>‚ùå A: Opposite of overwhelmed.<br>‚ùå C: Not excitement at that moment.<br>‚ùå D: Writer was engaged, not bored.',
                skill: 'Vocabulary in Context'
            },
            8: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Final paragraph states: "when people with different talents work together respectfully, they can achieve great things" and "Unity is strength."<br><br>‚ùå A: Contradicted by random team success.<br>‚ùå C: "We didn\'t win first prize, but we learned something more valuable."<br>‚ùå D: Random selection worked well with good teamwork.',
                skill: 'Main Idea'
            },
            9: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 1 states: "Sort waste into recyclables, kitchen waste, hazardous waste, and other waste."<br><br>‚ùå A: These are subtypes of recyclables, not the four main categories.<br>‚ùå C: Not the terminology used in the passage.<br>‚ùå D: Not mentioned as the sorting system.',
                skill: 'Detail Comprehension'
            },
            10: { 
                correct: 'A', 
                explanation: '‚úÖ Correct! "These actions" refers to the four green actions just listed: sorting waste, green transportation, planting trees, and saving energy.<br><br>‚ùå B, C, D: These contradict the passage\'s environmental message.',
                skill: 'Reference'
            },
            11: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 2 states: "Walk, cycle, or use public transport like buses and subways for short trips."<br><br>‚ùå A, C, D: These increase pollution, contrary to green transportation goals.',
                skill: 'Detail Comprehension'
            },
            12: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Passage concludes: "Every small effort contributes to a greener, healthier China for future generations"‚Äîimplying collective impact of individual actions.<br><br>‚ùå A: Contradicts the passage\'s message.<br>‚ùå C: Passage emphasizes everyone can contribute.<br>‚ùå D: Not supported; individual actions are valued.',
                skill: 'Inference'
            },
            13: { 
                correct: 'C', 
                explanation: '‚úÖ Correct! First paragraph states: "The Chinese government encourages young people to exercise at least one hour daily."<br><br>‚ùå A, B: Less than recommended.<br>‚ùå D: More than the stated minimum.',
                skill: 'Detail Comprehension'
            },
            14: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 1 lists benefits including: "reduced stress, and better sleep."<br><br>‚ùå A: Opposite of stated benefits.<br>‚ùå C: Exercise improves, not harms, academic performance.<br>‚ùå D: Benefits apply to all students, not just athletes.',
                skill: 'Detail Comprehension'
            },
            15: { 
                correct: 'A', 
                explanation: '‚úÖ Correct! Paragraph 2 lists general benefits of exercise; paragraph 3 provides specific examples of activities available in Chinese schools (tai chi, martial arts, modern sports, dance).<br><br>‚ùå B: No contrast; paragraph 3 elaborates on implementation.<br>‚ùå C: New content about activity types.<br>‚ùå D: Directly related as practical examples.',
                skill: 'Text Structure'
            },
            16: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Passage presents exercise benefits (physical, mental, academic) and encourages making it "a joyful habit" that supports "lifelong health, happiness, and contribution to society."<br><br>‚ùå A: Passage encourages exercise for all students.<br>‚ùå C: No brands promoted.<br>‚ùå D: Tone is encouraging, not critical.',
                skill: 'Author\'s Purpose'
            },
            17: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 1 lists positive uses including: "Access educational apps and online courses."<br><br>‚ùå A: Entertainment without limits is cautioned against.<br>‚ùå C: Protecting personal information is advised.<br>‚ùå D: Balance with face-to-face interactions is recommended.',
                skill: 'Detail Comprehension'
            },
            18: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Final paragraph states: "With wisdom and self-discipline, technology becomes a valuable partner in learning and growth."<br><br>‚ùå A: Opposite of wise use.<br>‚ùå C: Passage promotes active, thoughtful use.<br>‚ùå D: Technology enhances, doesn\'t replace, teachers.',
                skill: 'Inference'
            },
            19: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Context: "With wisdom and self-discipline, technology becomes a valuable partner"‚Äîself-discipline means controlling one\'s own behavior to make wise choices about technology use.<br><br>‚ùå A: Opposite of self-discipline.<br>‚ùå C: Self-discipline means doing right even when unobserved.<br>‚ùå D: Passage advocates balanced use, not avoidance.',
                skill: 'Vocabulary in Context'
            },
            20: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Passage defines wise technology use as accessing educational resources while maintaining healthy habits, strong values, and human connection, concluding it can be "a valuable partner in learning and growth."<br><br>‚ùå A: Passage advocates thoughtful integration, not avoidance.<br>‚ùå C: Educational uses are emphasized.<br>‚ùå D: Time limits and balance are recommended.',
                skill: 'Main Idea'
            }
        };

        // Question to Passage Mapping
        const questionToPassage = {
            1:1, 2:1, 3:1, 4:1,
            5:2, 6:2, 7:2, 8:2,
            9:3, 10:3, 11:3, 12:3,
            13:4, 14:4, 15:4, 16:4,
            17:5, 18:5, 19:5, 20:5
        };

        // State Variables
        let currentSection = 1;
        let score = 0;
        let answered = {};
        let timerSeconds = 0;
        let timerInterval;
        let testerName = '';
        let testStartTime;
        let testEndTime;

        // DOM Elements
        const startScreen = document.getElementById('start-screen');
        const testLayout = document.getElementById('test-layout');
        const resultsScreen = document.getElementById('results-screen');
        const nameInput = document.getElementById('tester-name');
        const nameError = document.getElementById('name-error');
        const startBtn = document.getElementById('start-btn');
        const timerDisplay = document.getElementById('timer');
        const scoreDisplay = document.getElementById('score-display');
        const passageIndicator = document.getElementById('passage-indicator');
        const toast = document.getElementById('toast');

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            startBtn.addEventListener('click', startTest);
            nameInput.addEventListener('input', validateName);
        });

        // Name Validation - Block Chinese Characters
        function validateName() {
            const name = nameInput.value.trim();
            const hasChinese = /[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u.test(name);
            
            if (hasChinese) {
                nameError.classList.add('show');
                startBtn.disabled = true;
            } else {
                nameError.classList.remove('show');
                startBtn.disabled = name === '';
            }
        }

        // Start Test
        function startTest() {
            testerName = nameInput.value.trim() || 'Anonymous';
            testStartTime = new Date();
            
            // Hide start screen, show test layout
            startScreen.style.display = 'none';
            testLayout.classList.add('active');
            
            // Show first passage and questions
            document.querySelector(`[data-passage="1"]`).classList.add('active');
            document.querySelector(`.questions-section[data-passage="1"]`).classList.add('active');
            
            // Start timer
            startTimer();
            
            // Update header
            updateHeader();
        }

        // Timer Functions
        function startTimer() {
            timerInterval = setInterval(() => {
                timerSeconds++;
                const mins = Math.floor(timerSeconds / 60).toString().padStart(2, '0');
                const secs = (timerSeconds % 60).toString().padStart(2, '0');
                timerDisplay.textContent = `${mins}:${secs}`;
            }, 1000);
        }

        // Check Answer with Feedback
        function checkAnswer(questionNum, selected, btn) {
            if (answered[questionNum]) return;

            answered[questionNum] = selected;
            const feedback = document.getElementById(`feedback-${questionNum}`);
            const allBtns = btn.parentElement.querySelectorAll('.option-btn');
            
            allBtns.forEach(b => b.disabled = true);

            if (selected === answers[questionNum].correct) {
                score++;
                btn.classList.add('correct');
                feedback.classList.add('correct');
                feedback.innerHTML = `<div class="feedback-title">‚úÖ Correct!</div>${answers[questionNum].explanation}`;
            } else {
                btn.classList.add('incorrect');
                feedback.classList.add('incorrect');
                feedback.innerHTML = `<div class="feedback-title">‚ùå Incorrect</div>${answers[questionNum].explanation}`;
                
                allBtns.forEach(b => {
                    if (b.textContent.trim().startsWith(answers[questionNum].correct + '.')) {
                        b.classList.add('correct');
                    }
                });
            }

            feedback.style.display = 'block';
            updateScoreDisplay();
            checkPassageComplete();
        }

        // Check if Current Passage Questions are Complete
        function checkPassageComplete() {
            const currentPassageQuestions = [];
            for (let q = 1; q <= 20; q++) {
                if (questionToPassage[q] === currentSection) {
                    currentPassageQuestions.push(q);
                }
            }
            
            const allAnswered = currentPassageQuestions.every(q => answered[q]);
            if (allAnswered && currentSection < 5) {
                document.getElementById('next-btn').textContent = 'Next Passage ‚Üí';
            }
        }

        // Navigation Functions
        function nextSection() {
            const currentPassageQuestions = [];
            for (let q = 1; q <= 20; q++) {
                if (questionToPassage[q] === currentSection) {
                    currentPassageQuestions.push(q);
                }
            }
            
            const allAnswered = currentPassageQuestions.every(q => answered[q]);
            if (!allAnswered) {
                alert(`Please answer all ${currentPassageQuestions.length} questions in this passage before continuing.`);
                return;
            }
            
            if (Object.keys(answered).length === 20) {
                showResults();
                return;
            }
            
            if (currentSection < 5) {
                // Hide current passage and questions
                document.querySelector(`[data-passage="${currentSection}"]`).classList.remove('active');
                document.querySelector(`.questions-section[data-passage="${currentSection}"]`).classList.remove('active');
                
                // Show next passage and questions
                currentSection++;
                document.querySelector(`[data-passage="${currentSection}"]`).classList.add('active');
                document.querySelector(`.questions-section[data-passage="${currentSection}"]`).classList.add('active');
                
                updateHeader();
                document.getElementById('prev-btn').disabled = false;
                
                // Scroll columns to top
                document.querySelector('.questions-column').scrollTop = 0;
                document.querySelector('.passage-column').scrollTop = 0;
            }
        }

        function prevSection() {
            if (currentSection > 1) {
                // Hide current
                document.querySelector(`[data-passage="${currentSection}"]`).classList.remove('active');
                document.querySelector(`.questions-section[data-passage="${currentSection}"]`).classList.remove('active');
                
                // Show previous
                currentSection--;
                document.querySelector(`[data-passage="${currentSection}"]`).classList.add('active');
                document.querySelector(`.questions-section[data-passage="${currentSection}"]`).classList.add('active');
                
                updateHeader();
                document.getElementById('next-btn').textContent = 'Next ‚Üí';
                if (currentSection === 1) {
                    document.getElementById('prev-btn').disabled = true;
                }
                
                document.querySelector('.questions-column').scrollTop = 0;
                document.querySelector('.passage-column').scrollTop = 0;
            }
        }

        // Update Header Display
        function updateHeader() {
            passageIndicator.textContent = `Passage ${currentSection} of 5`;
            updateScoreDisplay();
        }

        function updateScoreDisplay() {
            scoreDisplay.textContent = `${score}/${Object.keys(answered).length}`;
        }

        // Show Results Screen
        function showResults() {
            testEndTime = new Date();
            clearInterval(timerInterval);
            
            // Hide test layout and navigation
            testLayout.classList.remove('active');
            document.getElementById('navigation').style.display = 'none';
            
            // Show results screen
            resultsScreen.classList.add('active');
            
            // Populate results
            document.getElementById('result-name').textContent = testerName;
            document.getElementById('result-datetime').textContent = testEndTime.toLocaleString();
            
            const durationMs = testEndTime - testStartTime;
            const durationMins = Math.floor(durationMs / 60000);
            const durationSecs = Math.floor((durationMs % 60000) / 1000);
            document.getElementById('result-duration').textContent = 
                `${durationMins}m ${durationSecs.toString().padStart(2, '0')}s`;
            
            const finalScore = `${score}/20`;
            document.getElementById('final-score').textContent = finalScore;
            document.getElementById('result-accuracy').textContent = 
                `${Math.round((score / 20) * 100)}%`;
            
            generateSkillsBreakdown();
        }

        // Generate Skills Analysis
        function generateSkillsBreakdown() {
            const skillsBreakdown = document.getElementById('skills-breakdown');
            skillsBreakdown.innerHTML = '';
            
            const skillGroups = {};
            for (let q = 1; q <= 20; q++) {
                const skill = answers[q].skill;
                if (!skillGroups[skill]) {
                    skillGroups[skill] = { total: 0, correct: 0, questions: [] };
                }
                skillGroups[skill].total++;
                if (answered[q] === answers[q].correct) {
                    skillGroups[skill].correct++;
                } else {
                    skillGroups[skill].questions.push(q);
                }
            }
            
            Object.entries(skillGroups).forEach(([skill, data]) => {
                const isMastered = data.correct === data.total;
                const skillItem = document.createElement('div');
                skillItem.className = `skill-item ${isMastered ? 'mastered' : 'missed'}`;
                
                let missedInfo = '';
                if (!isMastered && data.questions.length > 0) {
                    missedInfo = `<br><small style="color: #b71c1c">Missed: Q${data.questions.join(', Q')}</small>`;
                }
                
                skillItem.innerHTML = `
                    <div>
                        <strong>${skill}</strong>
                        <div style="font-size: 0.9rem; color: #616161">${data.correct}/${data.total} correct</div>
                        ${missedInfo}
                    </div>
                    <div style="font-weight: bold; color: ${isMastered ? '#2e7d32' : '#c62828'}">
                        ${isMastered ? '‚úì Mastered' : '‚ö† Review'}
                    </div>
                `;
                skillsBreakdown.appendChild(skillItem);
            });
        }

        // Export Functions
        function copyForWeChat() {
            const durationMs = testEndTime - testStartTime;
            const durationMins = Math.floor(durationMs / 60000);
            const durationSecs = Math.floor((durationMs % 60000) / 1000);
            const accuracy = Math.round((score / 20) * 100);
            
            const text = `üìö Reading Practice 06 Results\n\n` +
                         `üë§ Name: ${testerName}\n` +
                         `üìÖ Date: ${testEndTime.toLocaleDateString()}\n` +
                         `‚è±Ô∏è Time: ${durationMins}m ${durationSecs}s\n` +
                         `‚úÖ Score: ${score}/20 (${accuracy}%)\n\n` +
                         `üìä Skills Review:\n`;
            
            const skillGroups = {};
            for (let q = 1; q <= 20; q++) {
                const skill = answers[q].skill;
                if (!skillGroups[skill]) skillGroups[skill] = { total: 0, correct: 0 };
                skillGroups[skill].total++;
                if (answered[q] === answers[q].correct) skillGroups[skill].correct++;
            }
            
            Object.entries(skillGroups).forEach(([skill, data]) => {
                const status = data.correct === data.total ? '‚úì' : '‚ö†';
                text += `${status} ${skill}: ${data.correct}/${data.total}\n`;
            });
            
            text += `\nüí° Focus on skills marked with ‚ö† for improvement.`;
            
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-9999px';
            document.body.appendChild(textArea);
            textArea.select();
            
            try {
                document.execCommand('copy');
                showToast('Results copied! Paste in WeChat to share.');
            } catch (err) {
                alert('Please manually copy these results:\n\n' + text);
            }
            
            document.body.removeChild(textArea);
        }

        function emailResults() {
            const durationMs = testEndTime - testStartTime;
            const durationMins = Math.floor(durationMs / 60000);
            const durationSecs = Math.floor((durationMs % 60000) / 1000);
            const accuracy = Math.round((score / 20) * 100);
            
            let emailBody = `Reading Practice 06 Results\n\n`;
            emailBody += `Student: ${testerName}\n`;
            emailBody += `Date Completed: ${testEndTime.toLocaleString()}\n`;
            emailBody += `Time Taken: ${durationMins} minutes, ${durationSecs} seconds\n`;
            emailBody += `Score: ${score} out of 20 questions (${accuracy}% accuracy)\n\n`;
            
            emailBody += `Detailed Results:\n`;
            emailBody += `----------------\n`;
            
            for (let q = 1; q <= 20; q++) {
                const isCorrect = answered[q] === answers[q].correct;
                emailBody += `Q${q} [${answers[q].skill}]: ${isCorrect ? '‚úì Correct' : '‚úó Incorrect'}\n`;
            }
            
            emailBody += `\nSkills Analysis:\n`;
            const skillGroups = {};
            for (let q = 1; q <= 20; q++) {
                const skill = answers[q].skill;
                if (!skillGroups[skill]) skillGroups[skill] = { total: 0, correct: 0 };
                skillGroups[skill].total++;
                if (answered[q] === answers[q].correct) skillGroups[skill].correct++;
            }
            
            Object.entries(skillGroups).forEach(([skill, data]) => {
                emailBody += `- ${skill}: ${data.correct}/${data.total} correct\n`;
            });
            
            const subject = encodeURIComponent(`Reading Practice 06 Results - ${testerName}`);
            const body = encodeURIComponent(emailBody);
            
            window.location.href = `mailto:?subject=${subject}&body=${body}`;
        }

        function downloadForLMS() {
            const resultsData = {
                testName: "Reading Practice 06",
                studentName: testerName,
                completedAt: testEndTime.toISOString(),
                durationSeconds: timerSeconds,
                totalQuestions: 20,
                correctAnswers: score,
                accuracyPercent: Math.round((score / 20) * 100),
                questionResults: [],
                skillsAnalysis: {}
            };
            
            for (let q = 1; q <= 20; q++) {
                resultsData.questionResults.push({
                    questionNumber: q,
                    skill: answers[q].skill,
                    selectedAnswer: answered[q],
                    correctAnswer: answers[q].correct,
                    isCorrect: answered[q] === answers[q].correct
                });
            }
            
            const skillGroups = {};
            for (let q = 1; q <= 20; q++) {
                const skill = answers[q].skill;
                if (!skillGroups[skill]) {
                    skillGroups[skill] = { 
                        totalQuestions: 0, 
                        correctAnswers: 0,
                        missedQuestions: []
                    };
                }
                skillGroups[skill].totalQuestions++;
                if (answered[q] === answers[q].correct) {
                    skillGroups[skill].correctAnswers++;
                } else {
                    skillGroups[skill].missedQuestions.push(q);
                }
            }
            resultsData.skillsAnalysis = skillGroups;
            
            const dataStr = "text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(resultsData, null, 2));
            const downloadAnchorNode = document.createElement('a');
            downloadAnchorNode.setAttribute("href", dataStr);
            downloadAnchorNode.setAttribute("download", `reading_practice_06_${testerName.replace(/\s+/g, '_')}_${new Date().toISOString().slice(0,10)}.json`);
            document.body.appendChild(downloadAnchorNode);
            downloadAnchorNode.click();
            downloadAnchorNode.remove();
            
            showToast('Results downloaded for LMS upload!');
        }

        function downloadPDF() {
            alert(`PDF generation requires additional libraries. For this demo:\n\n1. Copy your results using the "Copy for WeChat" button\n2. Paste into a document\n3. Save as PDF using your browser's print function (Ctrl+P ‚Üí Save as PDF)\n\nIn a production version, this would generate a professional PDF report automatically.`);
        }

        function showToast(message) {
            toast.textContent = message;
            toast.style.display = 'block';
            setTimeout(() => {
                toast.style.display = 'none';
            }, 3000);
        }

        // Restart Test
        function restartTest() {
            currentSection = 1;
            score = 0;
            answered = {};
            timerSeconds = 0;
            testerName = '';
            
            nameInput.value = '';
            nameError.classList.remove('show');
            startBtn.disabled = true;
            document.getElementById('next-btn').textContent = 'Next ‚Üí';
            document.getElementById('prev-btn').disabled = true;
            document.getElementById('passage-indicator').textContent = 'Passage 1 of 5';
            
            document.querySelectorAll('.feedback').forEach(fb => {
                fb.style.display = 'none';
                fb.classList.remove('correct', 'incorrect');
            });
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('correct', 'incorrect');
                btn.disabled = false;
            });
            
            resultsScreen.classList.remove('active');
            startScreen.style.display = 'block';
            
            timerDisplay.textContent = '00:00';
            scoreDisplay.textContent = '0/0';
            
            clearInterval(timerInterval);
        }
    </script>
</body>
</html>