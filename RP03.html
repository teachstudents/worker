<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading Practice 03</title>
    <style>
        :root {
            --primary: #4a154b;
            --secondary: #9c27b0;
            --success: #388e3c;
            --error: #d32f2f;
            --warning: #f57c00;
            --light: #fafafa;
            --dark: #212121;
            --gray: #616161;
            --border: #e0e0e0;
            --shadow: 0 2px 4px rgba(0,0,0,0.1), 0 4px 12px rgba(0,0,0,0.05);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
            font-size: 16px;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        /* Header Styles */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .header-title {
            font-size: 1.4rem;
            font-weight: 600;
        }
        
        .header-stats {
            display: flex;
            gap: 20px;
            font-size: 1rem;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .timer {
            font-weight: bold;
            color: #ffeb3b;
        }
        
        .score-display {
            font-weight: bold;
        }
        
        /* Start Screen */
        .start-screen {
            padding: 40px;
            text-align: center;
        }
        
        .start-screen h2 {
            margin-bottom: 25px;
            color: var(--primary);
            font-size: 1.8rem;
        }
        
        .name-input-group {
            margin: 30px 0;
        }
        
        .name-input-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            font-size: 1.1rem;
        }
        
        .name-input {
            width: 100%;
            max-width: 400px;
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1.1rem;
            transition: border-color 0.3s;
        }
        
        .name-input:focus {
            outline: none;
            border-color: var(--secondary);
        }
        
        .error-message {
            color: var(--error);
            margin-top: 8px;
            font-size: 0.95rem;
            display: none;
        }
        
        .error-message.show {
            display: block;
        }
        
        .start-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 14px 35px;
            font-size: 1.1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
            font-weight: 500;
            margin-top: 10px;
        }
        
        .start-btn:hover {
            background: #7b1fa2;
        }
        
        .start-btn:disabled {
            background: #bdbdbd;
            cursor: not-allowed;
        }
        
        .instructions {
            background: var(--light);
            border-left: 4px solid var(--secondary);
            padding: 15px;
            margin: 25px 0;
            border-radius: 0 8px 8px 0;
            text-align: left;
        }
        
        .instructions ul {
            padding-left: 20px;
            margin-top: 10px;
        }
        
        .instructions li {
            margin-bottom: 5px;
        }
        
        /* Test Content */
        .passage-section {
            padding: 25px;
            display: none;
        }
        
        .passage-section.active {
            display: block;
            animation: fadeIn 0.4s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .passage-title {
            color: var(--primary);
            font-size: 1.5rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--secondary);
        }
        
        .passage-text {
            background: var(--light);
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 30px;
            font-size: 1.05rem;
            line-height: 1.7;
            border-left: 4px solid var(--secondary);
        }
        
        .question-box {
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        
        .question-text {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .question-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .skill-tag {
            background: #f3e5f5;
            color: var(--secondary);
            padding: 3px 10px;
            border-radius: 15px;
            font-weight: 500;
        }
        
        .options {
            display: grid;
            gap: 12px;
            margin-top: 10px;
        }
        
        .option-btn {
            padding: 14px 20px;
            border: 2px solid var(--border);
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.05rem;
            text-align: left;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .option-btn:hover {
            background: #f5f5f5;
            border-color: var(--secondary);
        }
        
        .option-btn.correct {
            background: #c8e6c9;
            border-color: var(--success);
            color: #1b5e20;
            font-weight: 500;
        }
        
        .option-btn.incorrect {
            background: #ffcdd2;
            border-color: var(--error);
            color: #b71c1c;
            font-weight: 500;
        }
        
        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.85;
        }
        
        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--secondary);
            color: white;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .option-btn.correct .option-letter {
            background: var(--success);
        }
        
        .option-btn.incorrect .option-letter {
            background: var(--error);
        }
        
        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none;
            font-size: 1rem;
            line-height: 1.6;
        }
        
        .feedback.correct {
            background: #c8e6c9;
            border: 1px solid var(--success);
            color: #1b5e20;
        }
        
        .feedback.incorrect {
            background: #ffcdd2;
            border: 1px solid var(--error);
            color: #b71c1c;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* Navigation */
        .navigation {
            padding: 20px 25px;
            background: var(--light);
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-btn {
            padding: 12px 28px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.05rem;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .nav-btn.prev {
            background: #757575;
            color: white;
        }
        
        .nav-btn.next {
            background: var(--secondary);
            color: white;
        }
        
        .nav-btn.next:hover {
            background: #7b1fa2;
        }
        
        .nav-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .passage-indicator {
            font-weight: 500;
            color: var(--primary);
        }
        
        /* Results Screen */
        .results-screen {
            padding: 30px;
            display: none;
            text-align: center;
        }
        
        .results-screen.active {
            display: block;
        }
        
        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--success) 0%, #4caf50 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            margin: 0 auto 25px;
            box-shadow: 0 4px 15px rgba(56, 142, 60, 0.4);
        }
        
        .results-header {
            margin-bottom: 30px;
        }
        
        .results-header h2 {
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .results-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 25px 0;
            text-align: left;
        }
        
        .meta-item {
            background: var(--light);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--secondary);
        }
        
        .meta-label {
            font-size: 0.9rem;
            color: var(--gray);
            margin-bottom: 5px;
        }
        
        .meta-value {
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--dark);
        }
        
        .skills-summary {
            margin: 30px 0;
            text-align: left;
        }
        
        .skills-summary h3 {
            margin-bottom: 15px;
            color: var(--primary);
            font-size: 1.4rem;
        }
        
        .skill-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            background: var(--light);
        }
        
        .skill-item.missed {
            background: #ffebee;
            border-left: 4px solid var(--error);
        }
        
        .skill-item.mastered {
            border-left: 4px solid var(--success);
        }
        
        .export-section {
            margin: 35px 0;
            padding-top: 25px;
            border-top: 1px solid var(--border);
        }
        
        .export-section h3 {
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 1.4rem;
        }
        
        .export-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .export-btn {
            padding: 14px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.05rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        .btn-wechat {
            background: #07c160;
            color: white;
        }
        
        .btn-email {
            background: var(--error);
            color: white;
        }
        
        .btn-lms {
            background: var(--secondary);
            color: white;
        }
        
        .btn-download {
            background: #5e35b1;
            color: white;
        }
        
        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--dark);
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            display: none;
            animation: slideIn 0.3s, fadeOut 0.3s 2.7s forwards;
        }
        
        @keyframes slideIn {
            from { transform: translateX(200px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .header {
                padding: 12px 15px;
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .header-stats {
                width: 100%;
                justify-content: center;
            }
            
            .passage-text {
                padding: 20px 15px;
                font-size: 1rem;
            }
            
            .question-box {
                padding: 15px;
            }
            
            .options {
                grid-template-columns: 1fr;
            }
            
            .export-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .export-btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header with Timer and Score -->
        <div class="header">
            <div class="header-title">Reading Practice 03</div>
            <div class="header-stats">
                <div class="stat-item">
                    <span>‚è±Ô∏è</span>
                    <span class="timer" id="timer">00:00</span>
                </div>
                <div class="stat-item">
                    <span>‚úÖ</span>
                    <span class="score-display" id="score-display">0/20</span>
                </div>
            </div>
        </div>
        
        <!-- Start Screen -->
        <div class="start-screen" id="start-screen">
            <h2>Welcome to Reading Practice 03</h2>
            <p>Please enter your name to begin the test.</p>
            
            <div class="name-input-group">
                <label for="tester-name">Your Name (Pinyin or English only)</label>
                <input type="text" id="tester-name" class="name-input" placeholder="e.g., Wang Fang or Michael Chen">
                <div class="error-message" id="name-error">Please use Pinyin or English characters only. Chinese characters are not accepted.</div>
            </div>
            
            <div class="instructions">
                <p><strong>Test Instructions:</strong></p>
                <ul>
                    <li>Read each passage carefully before answering questions</li>
                    <li>Select the best answer for each question</li>
                    <li>You will receive immediate feedback after each answer</li>
                    <li>The test has 20 questions across 5 passages</li>
                    <li>Estimated time: 35-40 minutes</li>
                </ul>
            </div>
            
            <button class="start-btn" id="start-btn">Start Test</button>
        </div>
        
        <!-- Passage 1: Healthy Eating Guide -->
        <div class="passage-section" data-passage="1">
            <h2 class="passage-title">Passage 1: Healthy Eating Guide</h2>
            <div class="passage-text">
                <p>Eating well doesn't have to be complicated. Follow these simple guidelines for balanced nutrition:</p>
                <p><strong>ü•ó Fill half your plate with vegetables and fruits:</strong> Choose a variety of colors to get different vitamins and minerals. Fresh, frozen, or canned (without added salt/sugar) all count.</p>
                <p><strong>üçö Make half your grains whole:</strong> Choose whole wheat bread, brown rice, or oats instead of refined grains. Whole grains provide more fiber and nutrients.</p>
                <p><strong>ü•õ Include protein sources:</strong> Mix plant-based options (beans, lentils, tofu) with lean animal proteins (chicken, fish, eggs). Aim for fish twice weekly for heart-healthy omega-3s.</p>
                <p><strong>üíß Stay hydrated:</strong> Water is the best choice. Limit sugary drinks and excessive caffeine. Most adults need about 8 cups (2 liters) daily.</p>
                <p><strong>‚öñÔ∏è Practice mindful eating:</strong> Eat slowly, pay attention to hunger cues, and enjoy your food without distractions. This helps prevent overeating.</p>
                <p><em>Tip: Small, consistent changes matter more than perfect diets. Start with one healthy swap this week!</em></p>
            </div>
            
            <div class="question-box" id="qbox-1">
                <div class="question-meta">
                    <span>Question 1 of 20</span>
                    <span class="skill-tag">Detail Comprehension</span>
                </div>
                <p class="question-text">According to the guide, what should fill half your plate?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(1, 'A', this)">
                        <span class="option-letter">A</span> Grains and protein
                    </button>
                    <button class="option-btn" onclick="checkAnswer(1, 'B', this)">
                        <span class="option-letter">B</span> Vegetables and fruits
                    </button>
                    <button class="option-btn" onclick="checkAnswer(1, 'C', this)">
                        <span class="option-letter">C</span> Dairy products
                    </button>
                    <button class="option-btn" onclick="checkAnswer(1, 'D', this)">
                        <span class="option-letter">D</span> Healthy fats
                    </button>
                </div>
                <div class="feedback" id="feedback-1"></div>
            </div>
            
            <div class="question-box" id="qbox-2">
                <div class="question-meta">
                    <span>Question 2 of 20</span>
                    <span class="skill-tag">Detail Comprehension</span>
                </div>
                <p class="question-text">How often does the guide recommend eating fish?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(2, 'A', this)">
                        <span class="option-letter">A</span> Once a week
                    </button>
                    <button class="option-btn" onclick="checkAnswer(2, 'B', this)">
                        <span class="option-letter">B</span> Twice a week
                    </button>
                    <button class="option-btn" onclick="checkAnswer(2, 'C', this)">
                        <span class="option-letter">C</span> Every day
                    </button>
                    <button class="option-btn" onclick="checkAnswer(2, 'D', this)">
                        <span class="option-letter">D</span> Once a month
                    </button>
                </div>
                <div class="feedback" id="feedback-2"></div>
            </div>
            
            <div class="question-box" id="qbox-3">
                <div class="question-meta">
                    <span>Question 3 of 20</span>
                    <span class="skill-tag">Detail Comprehension (NOT)</span>
                </div>
                <p class="question-text">Which of the following is NOT mentioned as a hydration tip?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(3, 'A', this)">
                        <span class="option-letter">A</span> Water is the best choice
                    </button>
                    <button class="option-btn" onclick="checkAnswer(3, 'B', this)">
                        <span class="option-letter">B</span> Limit sugary drinks
                    </button>
                    <button class="option-btn" onclick="checkAnswer(3, 'C', this)">
                        <span class="option-letter">C</span> Drink exactly 10 cups daily
                    </button>
                    <button class="option-btn" onclick="checkAnswer(3, 'D', this)">
                        <span class="option-letter">D</span> Most adults need about 8 cups daily
                    </button>
                </div>
                <div class="feedback" id="feedback-3"></div>
            </div>
            
            <div class="question-box" id="qbox-4">
                <div class="question-meta">
                    <span>Question 4 of 20</span>
                    <span class="skill-tag">Vocabulary in Context</span>
                </div>
                <p class="question-text">In the passage, the word "mindful" (in "mindful eating") most nearly means:</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(4, 'A', this)">
                        <span class="option-letter">A</span> eating quickly to save time
                    </button>
                    <button class="option-btn" onclick="checkAnswer(4, 'B', this)">
                        <span class="option-letter">B</span> paying full attention to the eating experience
                    </button>
                    <button class="option-btn" onclick="checkAnswer(4, 'C', this)">
                        <span class="option-letter">C</span> counting every calorie precisely
                    </button>
                    <button class="option-btn" onclick="checkAnswer(4, 'D', this)">
                        <span class="option-letter">D</span> eating only when extremely hungry
                    </button>
                </div>
                <div class="feedback" id="feedback-4"></div>
            </div>
        </div>
        
        <!-- Passage 2: The Community Garden -->
        <div class="passage-section" data-passage="2">
            <h2 class="passage-title">Passage 2: The Community Garden</h2>
            <div class="passage-text">
                <p>When I moved to Maple Street, I felt disconnected from my new neighborhood. Everything seemed unfamiliar, and I missed the friends I'd left behind. Then I noticed a flyer: "Join the Maple Street Community Garden‚ÄîNo Experience Needed!"</p>
                <p>I signed up nervously, expecting to feel out of place. But from my first Saturday morning, I was welcomed warmly. Maria, the garden coordinator, showed me how to plant tomatoes. "Don't worry about perfect rows," she laughed. "Plants grow better with love than with perfection."</p>
                <p>Week by week, I learned more than gardening. I learned names: Mr. Chen who grew the sweetest strawberries, teenagers from the high school who volunteered on weekends, and elderly Mrs. Gupta who shared stories of her garden in India. We exchanged seeds, recipes, and laughter. The garden became a living classroom where everyone taught and everyone learned.</p>
                <p>Now, two years later, I help coordinate the garden myself. I've discovered that roots grow deep not just in soil, but in community. As Maria always says: "We don't just grow vegetables here‚Äîwe grow connections." And that, I've learned, is the most valuable harvest of all.</p>
            </div>
            
            <div class="question-box" id="qbox-5">
                <div class="question-meta">
                    <span>Question 5 of 20</span>
                    <span class="skill-tag">Detail Comprehension</span>
                </div>
                <p class="question-text">Why did the writer initially feel nervous about joining the garden?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(5, 'A', this)">
                        <span class="option-letter">A</span> They had never gardened before
                    </button>
                    <button class="option-btn" onclick="checkAnswer(5, 'B', this)">
                        <span class="option-letter">B</span> They felt disconnected and unfamiliar with the neighborhood
                    </button>
                    <button class="option-btn" onclick="checkAnswer(5, 'C', this)">
                        <span class="option-letter">C</span> The garden required expensive tools
                    </button>
                    <button class="option-btn" onclick="checkAnswer(5, 'D', this)">
                        <span class="option-letter">D</span> Maria seemed strict and demanding
                    </button>
                </div>
                <div class="feedback" id="feedback-5"></div>
            </div>
            
            <div class="question-box" id="qbox-6">
                <div class="question-meta">
                    <span>Question 6 of 20</span>
                    <span class="skill-tag">Inference</span>
                </div>
                <p class="question-text">What can we infer about Maria's teaching style?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(6, 'A', this)">
                        <span class="option-letter">A</span> She focuses on perfect technique above all
                    </button>
                    <button class="option-btn" onclick="checkAnswer(6, 'B', this)">
                        <span class="option-letter">B</span> She values encouragement and connection over perfection
                    </button>
                    <button class="option-btn" onclick="checkAnswer(6, 'C', this)">
                        <span class="option-letter">C</span> She only teaches experienced gardeners
                    </button>
                    <button class="option-btn" onclick="checkAnswer(6, 'D', this)">
                        <span class="option-letter">D</span> She prefers working alone rather than with groups
                    </button>
                </div>
                <div class="feedback" id="feedback-6"></div>
            </div>
            
            <div class="question-box" id="qbox-7">
                <div class="question-meta">
                    <span>Question 7 of 20</span>
                    <span class="skill-tag">Vocabulary in Context</span>
                </div>
                <p class="question-text">In paragraph 3, the word "exchanged" most probably means:</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(7, 'A', this)">
                        <span class="option-letter">A</span> sold items for money
                    </button>
                    <button class="option-btn" onclick="checkAnswer(7, 'B', this)">
                        <span class="option-letter">B</span> shared items or ideas with each other
                    </button>
                    <button class="option-btn" onclick="checkAnswer(7, 'C', this)">
                        <span class="option-letter">C</span> argued about different opinions
                    </button>
                    <button class="option-btn" onclick="checkAnswer(7, 'D', this)">
                        <span class="option-letter">D</span> kept items secret from others
                    </button>
                </div>
                <div class="feedback" id="feedback-7"></div>
            </div>
            
            <div class="question-box" id="qbox-8">
                <div class="question-meta">
                    <span>Question 8 of 20</span>
                    <span class="skill-tag">Main Idea</span>
                </div>
                <p class="question-text">What is the central message of this passage?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(8, 'A', this)">
                        <span class="option-letter">A</span> Gardening requires expensive tools and perfect technique
                    </button>
                    <button class="option-btn" onclick="checkAnswer(8, 'B', this)">
                        <span class="option-letter">B</span> Community activities can help people build connections and feel belonging
                    </button>
                    <button class="option-btn" onclick="checkAnswer(8, 'C', this)">
                        <span class="option-letter">C</span> Moving to a new neighborhood is always difficult
                    </button>
                    <button class="option-btn" onclick="checkAnswer(8, 'D', this)">
                        <span class="option-letter">D</span> Only experienced gardeners should join community gardens
                    </button>
                </div>
                <div class="feedback" id="feedback-8"></div>
            </div>
        </div>
        
        <!-- Passage 3: Renewable Energy Basics -->
        <div class="passage-section" data-passage="3">
            <h2 class="passage-title">Passage 3: Renewable Energy Basics</h2>
            <div class="passage-text">
                <p>Renewable energy comes from natural sources that replenish themselves faster than they are consumed. Unlike fossil fuels (coal, oil, natural gas), which take millions of years to form, renewable sources can provide sustainable power for generations.</p>
                <p>The main types of renewable energy include: <strong>Solar power</strong>, which captures energy from sunlight using photovoltaic panels; <strong>Wind power</strong>, which uses turbines to convert wind movement into electricity; <strong>Hydropower</strong>, which generates electricity from flowing water; and <strong>Geothermal energy</strong>, which taps heat from beneath the Earth's surface.</p>
                <p>Benefits of renewable energy extend beyond environmental protection. While initial installation costs can be high, renewable systems often have lower operating costs over time. They also create jobs in manufacturing, installation, and maintenance. Additionally, decentralized renewable systems (like rooftop solar) can increase energy independence for communities and individuals.</p>
                <p>Challenges remain, including energy storage for when the sun isn't shining or wind isn't blowing, and updating electrical grids to handle variable power sources. However, technological advances are rapidly addressing these issues. As Dr. James Lin, energy researcher, notes: "The question isn't whether renewables will power our future‚Äîit's how quickly we can make the transition."</p>
            </div>
            
            <div class="question-box" id="qbox-9">
                <div class="question-meta">
                    <span>Question 9 of 20</span>
                    <span class="skill-tag">Detail Comprehension</span>
                </div>
                <p class="question-text">According to the passage, what is a key difference between renewable energy and fossil fuels?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(9, 'A', this)">
                        <span class="option-letter">A</span> Renewable energy is always cheaper to install
                    </button>
                    <button class="option-btn" onclick="checkAnswer(9, 'B', this)">
                        <span class="option-letter">B</span> Renewable sources replenish faster than they are consumed
                    </button>
                    <button class="option-btn" onclick="checkAnswer(9, 'C', this)">
                        <span class="option-letter">C</span> Fossil fuels produce no pollution
                    </button>
                    <button class="option-btn" onclick="checkAnswer(9, 'D', this)">
                        <span class="option-letter">D</span> Renewable energy requires no technology
                    </button>
                </div>
                <div class="feedback" id="feedback-9"></div>
            </div>
            
            <div class="question-box" id="qbox-10">
                <div class="question-meta">
                    <span>Question 10 of 20</span>
                    <span class="skill-tag">Reference</span>
                </div>
                <p class="question-text">In paragraph 2, what does the word "which" refer to in "which uses turbines to convert wind movement"?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(10, 'A', this)">
                        <span class="option-letter">A</span> Solar power
                    </button>
                    <button class="option-btn" onclick="checkAnswer(10, 'B', this)">
                        <span class="option-letter">B</span> Wind power
                    </button>
                    <button class="option-btn" onclick="checkAnswer(10, 'C', this)">
                        <span class="option-letter">C</span> Hydropower
                    </button>
                    <button class="option-btn" onclick="checkAnswer(10, 'D', this)">
                        <span class="option-letter">D</span> Geothermal energy
                    </button>
                </div>
                <div class="feedback" id="feedback-10"></div>
            </div>
            
            <div class="question-box" id="qbox-11">
                <div class="question-meta">
                    <span>Question 11 of 20</span>
                    <span class="skill-tag">Detail Comprehension</span>
                </div>
                <p class="question-text">Which benefit of renewable energy is mentioned in the passage?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(11, 'A', this)">
                        <span class="option-letter">A</span> They eliminate all energy costs immediately
                    </button>
                    <button class="option-btn" onclick="checkAnswer(11, 'B', this)">
                        <span class="option-letter">B</span> They often have lower operating costs over time
                    </button>
                    <button class="option-btn" onclick="checkAnswer(11, 'C', this)">
                        <span class="option-letter">C</span> They require no maintenance ever
                    </button>
                    <button class="option-btn" onclick="checkAnswer(11, 'D', this)">
                        <span class="option-letter">D</span> They work equally well in all weather conditions
                    </button>
                </div>
                <div class="feedback" id="feedback-11"></div>
            </div>
            
            <div class="question-box" id="qbox-12">
                <div class="question-meta">
                    <span>Question 12 of 20</span>
                    <span class="skill-tag">Inference</span>
                </div>
                <p class="question-text">Based on the passage, why might energy storage be important for renewable systems?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(12, 'A', this)">
                        <span class="option-letter">A</span> To make renewable energy more expensive
                    </button>
                    <button class="option-btn" onclick="checkAnswer(12, 'B', this)">
                        <span class="option-letter">B</span> To provide power when sun isn't shining or wind isn't blowing
                    </button>
                    <button class="option-btn" onclick="checkAnswer(12, 'C', this)">
                        <span class="option-letter">C</span> To replace the need for electrical grids entirely
                    </button>
                    <button class="option-btn" onclick="checkAnswer(12, 'D', this)">
                        <span class="option-letter">D</span> To increase dependence on fossil fuels
                    </button>
                </div>
                <div class="feedback" id="feedback-12"></div>
            </div>
        </div>
        
        <!-- Passage 4: Social Media Balance -->
        <div class="passage-section" data-passage="4">
            <h2 class="passage-title">Passage 4: Finding Balance with Social Media</h2>
            <div class="passage-text">
                <p>Social media connects us to friends, news, and ideas across the globe. Yet research suggests that how we use these platforms matters more than how much time we spend on them. Intentional, mindful engagement can enhance well-being, while passive scrolling may contribute to anxiety and comparison.</p>
                <p>Studies from the Digital Wellness Institute identify several strategies for healthier social media habits. First, curate your feed: follow accounts that inspire, educate, or genuinely connect you with others. Second, set boundaries: designate tech-free times (like meals or bedtime) and use app timers to prevent endless scrolling. Third, engage actively: comment meaningfully, share thoughtfully, and prioritize real conversations over passive consumption.</p>
                <p>However, these strategies require self-awareness and consistent practice. It's easy to fall back into habitual scrolling when stressed or bored. That's why experts recommend starting small: choose one boundary to implement this week, reflect on how it feels, and adjust as needed. Progress, not perfection, is the goal.</p>
                <p>As psychologist Dr. Aisha Patel observes: "Technology isn't inherently good or bad‚Äîit's a tool. The impact depends on how we choose to use it." By approaching social media with intention rather than autopilot, we can harness its connective power while protecting our mental space.</p>
            </div>
            
            <div class="question-box" id="qbox-13">
                <div class="question-meta">
                    <span>Question 13 of 20</span>
                    <span class="skill-tag">Detail Comprehension</span>
                </div>
                <p class="question-text">According to the passage, what does research suggest matters most about social media use?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(13, 'A', this)">
                        <span class="option-letter">A</span> The total number of hours spent online
                    </button>
                    <button class="option-btn" onclick="checkAnswer(13, 'B', this)">
                        <span class="option-letter">B</span> How we use the platforms (intentional vs. passive)
                    </button>
                    <button class="option-btn" onclick="checkAnswer(13, 'C', this)">
                        <span class="option-letter">C</span> The number of followers we have
                    </button>
                    <button class="option-btn" onclick="checkAnswer(13, 'D', this)">
                        <span class="option-letter">D</span> Which specific platforms we use
                    </button>
                </div>
                <div class="feedback" id="feedback-13"></div>
            </div>
            
            <div class="question-box" id="qbox-14">
                <div class="question-meta">
                    <span>Question 14 of 20</span>
                    <span class="skill-tag">Detail Comprehension</span>
                </div>
                <p class="question-text">Which strategy for healthier social media habits is mentioned in the passage?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(14, 'A', this)">
                        <span class="option-letter">A</span> Deleting all social media accounts permanently
                    </button>
                    <button class="option-btn" onclick="checkAnswer(14, 'B', this)">
                        <span class="option-letter">B</span> Curating your feed to follow inspiring or educational accounts
                    </button>
                    <button class="option-btn" onclick="checkAnswer(14, 'C', this)">
                        <span class="option-letter">C</span> Only using social media for work purposes
                    </button>
                    <button class="option-btn" onclick="checkAnswer(14, 'D', this)">
                        <span class="option-letter">D</span> Checking notifications immediately upon waking
                    </button>
                </div>
                <div class="feedback" id="feedback-14"></div>
            </div>
            
            <div class="question-box" id="qbox-15">
                <div class="question-meta">
                    <span>Question 15 of 20</span>
                    <span class="skill-tag">Text Structure</span>
                </div>
                <p class="question-text">How is paragraph 3 related to paragraph 2 in the passage?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(15, 'A', this)">
                        <span class="option-letter">A</span> Paragraph 3 provides specific examples that illustrate the strategies in paragraph 2
                    </button>
                    <button class="option-btn" onclick="checkAnswer(15, 'B', this)">
                        <span class="option-letter">B</span> Paragraph 3 acknowledges challenges in implementing the strategies from paragraph 2 and suggests starting small
                    </button>
                    <button class="option-btn" onclick="checkAnswer(15, 'C', this)">
                        <span class="option-letter">C</span> Paragraph 3 contradicts the strategies presented in paragraph 2
                    </button>
                    <button class="option-btn" onclick="checkAnswer(15, 'D', this)">
                        <span class="option-letter">D</span> Paragraph 3 introduces a completely new topic about digital detox retreats
                    </button>
                </div>
                <div class="feedback" id="feedback-15"></div>
            </div>
            
            <div class="question-box" id="qbox-16">
                <div class="question-meta">
                    <span>Question 16 of 20</span>
                    <span class="skill-tag">Author's Purpose</span>
                </div>
                <p class="question-text">What is the writer's main purpose in writing this passage?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(16, 'A', this)">
                        <span class="option-letter">A</span> To argue that all social media should be avoided
                    </button>
                    <button class="option-btn" onclick="checkAnswer(16, 'B', this)">
                        <span class="option-letter">B</span> To present research-based strategies for intentional social media use that supports well-being
                    </button>
                    <button class="option-btn" onclick="checkAnswer(16, 'C', this)">
                        <span class="option-letter">C</span> To promote specific social media management apps
                    </button>
                    <button class="option-btn" onclick="checkAnswer(16, 'D', this)">
                        <span class="option-letter">D</span> To criticize young people for excessive screen time
                    </button>
                </div>
                <div class="feedback" id="feedback-16"></div>
            </div>
        </div>
        
        <!-- Passage 5: Effective Learning Strategies -->
        <div class="passage-section" data-passage="5">
            <h2 class="passage-title">Passage 5: Effective Learning Strategies</h2>
            <div class="passage-text">
                <p>Research in educational psychology has identified several evidence-based strategies that enhance learning and long-term retention. These methods work across subjects and age groups, making them valuable tools for students and lifelong learners alike.</p>
                <p><strong>Spaced practice</strong> involves reviewing material over multiple sessions separated by time, rather than cramming in one marathon session. This approach leverages the brain's natural forgetting curve, strengthening memories each time information is retrieved after a delay.</p>
                <p><strong>Retrieval practice</strong> means actively recalling information from memory (through self-testing, flashcards, or explaining concepts without notes) rather than passively re-reading. This effortful recall strengthens neural pathways more effectively than passive review.</p>
                <p><strong>Interleaving</strong> mixes different topics or types of problems within a single study session, rather than focusing on one topic exclusively. While this feels more challenging initially, it improves the ability to distinguish between concepts and apply the right strategy to new problems.</p>
                <p>Importantly, these strategies require shifting from comfortable but ineffective habits (like highlighting or re-reading) to more effortful practices. As learning scientist Dr. Marcus Reed explains: "The strategies that feel harder in the moment often produce deeper, longer-lasting learning." Embracing this "desirable difficulty" is key to becoming a more effective learner.</p>
            </div>
            
            <div class="question-box" id="qbox-17">
                <div class="question-meta">
                    <span>Question 17 of 20</span>
                    <span class="skill-tag">Detail Comprehension</span>
                </div>
                <p class="question-text">According to the passage, what is spaced practice?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(17, 'A', this)">
                        <span class="option-letter">A</span> Studying one topic for many hours without breaks
                    </button>
                    <button class="option-btn" onclick="checkAnswer(17, 'B', this)">
                        <span class="option-letter">B</span> Reviewing material over multiple sessions separated by time
                    </button>
                    <button class="option-btn" onclick="checkAnswer(17, 'C', this)">
                        <span class="option-letter">C</span> Only studying when you feel motivated
                    </button>
                    <button class="option-btn" onclick="checkAnswer(17, 'D', this)">
                        <span class="option-letter">D</span> Memorizing information through repetition without understanding
                    </button>
                </div>
                <div class="feedback" id="feedback-17"></div>
            </div>
            
            <div class="question-box" id="qbox-18">
                <div class="question-meta">
                    <span>Question 18 of 20</span>
                    <span class="skill-tag">Inference</span>
                </div>
                <p class="question-text">Based on the passage, why might interleaving feel more challenging at first?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(18, 'A', this)">
                        <span class="option-letter">A</span> It requires switching between different topics or problem types
                    </button>
                    <button class="option-btn" onclick="checkAnswer(18, 'B', this)">
                        <span class="option-letter">B</span> It eliminates the need for any practice
                    </button>
                    <button class="option-btn" onclick="checkAnswer(18, 'C', this)">
                        <span class="option-letter">C</span> It only works for mathematical subjects
                    </button>
                    <button class="option-btn" onclick="checkAnswer(18, 'D', this)">
                        <span class="option-letter">D</span> It makes studying take less time overall
                    </button>
                </div>
                <div class="feedback" id="feedback-18"></div>
            </div>
            
            <div class="question-box" id="qbox-19">
                <div class="question-meta">
                    <span>Question 19 of 20</span>
                    <span class="skill-tag">Vocabulary in Context</span>
                </div>
                <p class="question-text">In the final paragraph, the phrase "desirable difficulty" most nearly means:</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(19, 'A', this)">
                        <span class="option-letter">A</span> challenges that should be avoided to reduce stress
                    </button>
                    <button class="option-btn" onclick="checkAnswer(19, 'B', this)">
                        <span class="option-letter">B</span> effortful practices that lead to deeper learning despite feeling harder initially
                    </button>
                    <button class="option-btn" onclick="checkAnswer(19, 'C', this)">
                        <span class="option-letter">C</span> tasks that are impossible for most learners
                    </button>
                    <button class="option-btn" onclick="checkAnswer(19, 'D', this)">
                        <span class="option-letter">D</span> easy activities that feel comfortable but aren't effective
                    </button>
                </div>
                <div class="feedback" id="feedback-19"></div>
            </div>
            
            <div class="question-box" id="qbox-20">
                <div class="question-meta">
                    <span>Question 20 of 20</span>
                    <span class="skill-tag">Main Idea</span>
                </div>
                <p class="question-text">What is the central message of this passage about learning strategies?</p>
                <div class="options">
                    <button class="option-btn" onclick="checkAnswer(20, 'A', this)">
                        <span class="option-letter">A</span> Learning should always feel easy and comfortable to be effective
                    </button>
                    <button class="option-btn" onclick="checkAnswer(20, 'B', this)">
                        <span class="option-letter">B</span> Evidence-based strategies like spaced practice, retrieval, and interleaving enhance long-term learning, even when they feel challenging
                    </button>
                    <button class="option-btn" onclick="checkAnswer(20, 'C', this)">
                        <span class="option-letter">C</span> Highlighting and re-reading are the most effective study methods
                    </button>
                    <button class="option-btn" onclick="checkAnswer(20, 'D', this)">
                        <span class="option-letter">D</span> Learning strategies only work for young students, not adults
                    </button>
                </div>
                <div class="feedback" id="feedback-20"></div>
            </div>
        </div>
        
        <!-- Navigation -->
        <div class="navigation" id="navigation">
            <button class="nav-btn prev" onclick="prevSection()" id="prev-btn" disabled>‚Üê Previous</button>
            <span class="passage-indicator" id="passage-indicator">Passage 1 of 5</span>
            <button class="nav-btn next" onclick="nextSection()" id="next-btn">Next ‚Üí</button>
        </div>
        
        <!-- Results Screen -->
        <div class="results-screen" id="results-screen">
            <div class="results-header">
                <h2>Test Completed!</h2>
                <p>Here are your results for Reading Practice 03</p>
            </div>
            
            <div class="score-circle" id="final-score">0/20</div>
            
            <div class="results-meta">
                <div class="meta-item">
                    <div class="meta-label">Tester Name</div>
                    <div class="meta-value" id="result-name">-</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Date & Time</div>
                    <div class="meta-value" id="result-datetime">-</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Time Taken</div>
                    <div class="meta-value" id="result-duration">-</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Accuracy</div>
                    <div class="meta-value" id="result-accuracy">0%</div>
                </div>
            </div>
            
            <div class="skills-summary">
                <h3>Reading Skills Analysis</h3>
                <div id="skills-breakdown">
                    <!-- Skills breakdown will be inserted here by JavaScript -->
                </div>
            </div>
            
            <div class="export-section">
                <h3>Share Your Results</h3>
                <div class="export-buttons">
                    <button class="export-btn btn-wechat" onclick="copyForWeChat()">
                        üí¨ Copy for WeChat
                    </button>
                    <button class="export-btn btn-email" onclick="emailResults()">
                        üìß Email Results
                    </button>
                    <button class="export-btn btn-lms" onclick="downloadForLMS()">
                        üì§ Download for LMS
                    </button>
                    <button class="export-btn btn-download" onclick="downloadPDF()">
                        üìÑ Save as PDF
                    </button>
                </div>
            </div>
            
            <button class="start-btn" onclick="restartTest()" style="margin-top: 20px;">
                üîÑ Take Another Practice Test
            </button>
        </div>
    </div>
    
    <div class="toast" id="toast">Results copied to clipboard!</div>
    
    <script>
        // Answer Key & Explanations with Skill Mapping
        const answers = {
            1: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! The first guideline states: "Fill half your plate with vegetables and fruits."<br><br>‚ùå A: Grains and protein are other categories.<br>‚ùå C: Dairy is mentioned separately.<br>‚ùå D: Healthy fats aren\'t the focus of the "half plate" guideline.',
                skill: 'Detail Comprehension'
            },
            2: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! The protein section states: "Aim for fish twice weekly for heart-healthy omega-3s."<br><br>‚ùå A: Once a week is less than recommended.<br>‚ùå C: Every day isn\'t specified.<br>‚ùå D: Once a month is too infrequent.',
                skill: 'Detail Comprehension'
            },
            3: { 
                correct: 'C', 
                explanation: '‚úÖ Correct! The passage states "Most adults need about 8 cups (2 liters) daily" ‚Äî not exactly 10 cups. "Drink exactly 10 cups" is NOT mentioned.<br><br>‚ùå A, B, D: All explicitly stated as hydration tips.',
                skill: 'Detail Comprehension (NOT)'
            },
            4: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! "Mindful eating" is described as: "Eat slowly, pay attention to hunger cues, and enjoy your food without distractions" ‚Äî all about paying full attention.<br><br>‚ùå A: Opposite of eating slowly.<br>‚ùå C: Calorie counting isn\'t mentioned.<br>‚ùå D: Not about waiting until extremely hungry.',
                skill: 'Vocabulary in Context'
            },
            5: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 1 states: "I felt disconnected from my new neighborhood. Everything seemed unfamiliar..." showing the writer felt nervous due to disconnection.<br><br>‚ùå A: While true, the passage emphasizes emotional disconnection as the primary reason.<br>‚ùå C: No mention of expensive tools.<br>‚ùå D: Maria was welcoming, not strict.',
                skill: 'Detail Comprehension'
            },
            6: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Maria says: "Plants grow better with love than with perfection," showing she values encouragement and connection over perfect technique.<br><br>‚ùå A: Opposite of her stated philosophy.<br>‚ùå C: The flyer said "No Experience Needed."<br>‚ùå D: She actively coordinates group activities.',
                skill: 'Inference'
            },
            7: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Context shows gardeners "exchanged seeds, recipes, and laughter" ‚Äî sharing items and ideas with each other.<br><br>‚ùå A: No money mentioned; this is a community exchange.<br>‚ùå C: The tone is positive and collaborative.<br>‚ùå D: Opposite of sharing openly.',
                skill: 'Vocabulary in Context'
            },
            8: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Final paragraph states: "We don\'t just grow vegetables here‚Äîwe grow connections" and "that is the most valuable harvest of all," emphasizing community connections.<br><br>‚ùå A: Contradicted by "No Experience Needed" and Maria\'s philosophy.<br>‚ùå C: Too narrow; the passage focuses on overcoming difficulty through community.<br>‚ùå D: Opposite of the inclusive message.',
                skill: 'Main Idea'
            },
            9: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! First paragraph states renewable energy "comes from natural sources that replenish themselves faster than they are consumed," unlike fossil fuels.<br><br>‚ùå A: Passage notes initial costs can be high.<br>‚ùå C: Fossil fuels are known to produce pollution.<br>‚ùå D: Renewable energy requires significant technology (panels, turbines, etc.).',
                skill: 'Detail Comprehension'
            },
            10: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! The sentence structure: "Wind power, which uses turbines to convert wind movement..." ‚Äî "which" refers to the immediately preceding subject "Wind power."<br><br>‚ùå A: Solar power uses photovoltaic panels.<br>‚ùå C: Hydropower uses flowing water.<br>‚ùå D: Geothermal taps Earth\'s heat.',
                skill: 'Reference'
            },
            11: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 3 states: "While initial installation costs can be high, renewable systems often have lower operating costs over time."<br><br>‚ùå A: "Eliminate all costs" is too extreme; passage says "lower operating costs."<br>‚ùå C: Maintenance is mentioned as creating jobs.<br>‚ùå D: Passage acknowledges variability challenges.',
                skill: 'Detail Comprehension'
            },
            12: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Passage states a challenge is "energy storage for when the sun isn\'t shining or wind isn\'t blowing" ‚Äî storage provides power during intermittent generation.<br><br>‚ùå A: Storage aims to make renewables more reliable, not more expensive.<br>‚ùå C: Grids still needed; storage complements them.<br>‚ùå D: Opposite goal; renewables reduce fossil fuel dependence.',
                skill: 'Inference'
            },
            13: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! First paragraph states: "research suggests that how we use these platforms matters more than how much time we spend on them," distinguishing intentional vs. passive use.<br><br>‚ùå A: Explicitly contrasted as less important than how we use platforms.<br>‚ùå C, D: Not discussed as primary factors.',
                skill: 'Detail Comprehension'
            },
            14: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 2 lists strategies including: "curate your feed: follow accounts that inspire, educate, or genuinely connect you with others."<br><br>‚ùå A: Passage advocates mindful use, not deletion.<br>‚ùå C: Not mentioned; balance is the goal.<br>‚ùå D: Opposite of setting boundaries like tech-free times.',
                skill: 'Detail Comprehension'
            },
            15: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 2 presents strategies; paragraph 3 begins "However, these strategies require self-awareness..." acknowledging implementation challenges and suggesting starting small ‚Äî a logical progression from ideal to practical application.<br><br>‚ùå A: Examples were in paragraph 2.<br>‚ùå C: No contradiction; paragraph 3 builds on paragraph 2.<br>‚ùå D: Directly related as implementation guidance.',
                skill: 'Text Structure'
            },
            16: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Passage presents research on social media\'s dual potential, then offers specific, evidence-based strategies for intentional use that "enhance well-being" and "protect our mental space."<br><br>‚ùå A: Opposite; passage advocates mindful use, not avoidance.<br>‚ùå C: No specific apps promoted.<br>‚ùå D: Passage avoids age-based criticism; focuses on universal strategies.',
                skill: 'Author\'s Purpose'
            },
            17: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Paragraph 2 defines spaced practice: "reviewing material over multiple sessions separated by time, rather than cramming in one marathon session."<br><br>‚ùå A: Describes cramming, which spaced practice avoids.<br>‚ùå C: Not mentioned; consistency matters more than motivation.<br>‚ùå D: Describes rote memorization, not spaced retrieval.',
                skill: 'Detail Comprehension'
            },
            18: { 
                correct: 'A', 
                explanation: '‚úÖ Correct! Paragraph 4 defines interleaving as mixing "different topics or types of problems within a single study session" and notes "this feels more challenging initially" ‚Äî the switching between topics creates the initial difficulty.<br><br>‚ùå B: Opposite; interleaving requires more practice, not less.<br>‚ùå C: Passage states strategies work "across subjects."<br>‚ùå D: Not about time reduction; about learning quality.',
                skill: 'Inference'
            },
            19: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Context shows "desirable difficulty" refers to "effortful practices" that "feel harder in the moment" but "produce deeper, longer-lasting learning" ‚Äî challenges that are worthwhile despite initial difficulty.<br><br>‚ùå A: Opposite; these difficulties are "desirable."<br>‚ùå C: Not impossible; just more effortful.<br>‚ùå D: Describes ineffective habits, not desirable difficulty.',
                skill: 'Vocabulary in Context'
            },
            20: { 
                correct: 'B', 
                explanation: '‚úÖ Correct! Passage opens by introducing "evidence-based strategies that enhance learning," details three specific methods, and concludes that embracing "desirable difficulty" leads to "deeper, longer-lasting learning."<br><br>‚ùå A: Directly contradicted; effective learning often feels effortful.<br>‚ùå C: Passage states highlighting/re-reading are "comfortable but ineffective."<br>‚ùå D: Passage states strategies work "across subjects and age groups."',
                skill: 'Main Idea'
            }
        };

        // Question to Passage Mapping
        const questionToPassage = {
            1:1, 2:1, 3:1, 4:1,
            5:2, 6:2, 7:2, 8:2,
            9:3, 10:3, 11:3, 12:3,
            13:4, 14:4, 15:4, 16:4,
            17:5, 18:5, 19:5, 20:5
        };

        // State Variables
        let currentSection = 1;
        let score = 0;
        let answered = {};
        let timerSeconds = 0;
        let timerInterval;
        let testerName = '';
        let testStartTime;
        let testEndTime;

        // DOM Elements
        const startScreen = document.getElementById('start-screen');
        const resultsScreen = document.getElementById('results-screen');
        const nameInput = document.getElementById('tester-name');
        const nameError = document.getElementById('name-error');
        const startBtn = document.getElementById('start-btn');
        const timerDisplay = document.getElementById('timer');
        const scoreDisplay = document.getElementById('score-display');
        const passageIndicator = document.getElementById('passage-indicator');
        const toast = document.getElementById('toast');

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            startBtn.addEventListener('click', startTest);
            nameInput.addEventListener('input', validateName);
        });

        // Name Validation - Block Chinese Characters
        function validateName() {
            const name = nameInput.value.trim();
            // Regex to detect Chinese characters (Unicode range for CJK)
            const hasChinese = /[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u.test(name);
            
            if (hasChinese) {
                nameError.classList.add('show');
                startBtn.disabled = true;
            } else {
                nameError.classList.remove('show');
                startBtn.disabled = name === '';
            }
        }

        // Start Test
        function startTest() {
            testerName = nameInput.value.trim() || 'Anonymous';
            testStartTime = new Date();
            
            // Hide start screen, show first passage
            startScreen.style.display = 'none';
            document.querySelector(`[data-passage="1"]`).classList.add('active');
            
            // Start timer
            startTimer();
            
            // Update header
            updateHeader();
        }

        // Timer Functions
        function startTimer() {
            timerInterval = setInterval(() => {
                timerSeconds++;
                const mins = Math.floor(timerSeconds / 60).toString().padStart(2, '0');
                const secs = (timerSeconds % 60).toString().padStart(2, '0');
                timerDisplay.textContent = `${mins}:${secs}`;
            }, 1000);
        }

        // Check Answer with Feedback
        function checkAnswer(questionNum, selected, btn) {
            if (answered[questionNum]) return; // Prevent multiple answers

            answered[questionNum] = selected;
            const feedback = document.getElementById(`feedback-${questionNum}`);
            const allBtns = btn.parentElement.querySelectorAll('.option-btn');
            
            // Disable all buttons for this question
            allBtns.forEach(b => b.disabled = true);

            // Check answer and provide feedback
            if (selected === answers[questionNum].correct) {
                score++;
                btn.classList.add('correct');
                feedback.classList.add('correct');
                feedback.innerHTML = `<div class="feedback-title">‚úÖ Correct!</div>${answers[questionNum].explanation}`;
            } else {
                btn.classList.add('incorrect');
                feedback.classList.add('incorrect');
                feedback.innerHTML = `<div class="feedback-title">‚ùå Incorrect</div>${answers[questionNum].explanation}`;
                
                // Highlight correct answer
                allBtns.forEach(b => {
                    if (b.textContent.trim().startsWith(answers[questionNum].correct + '.')) {
                        b.classList.add('correct');
                    }
                });
            }

            feedback.style.display = 'block';
            updateScoreDisplay();
            
            // Check if all questions in current passage are answered
            checkPassageComplete();
        }

        // Check if Current Passage is Complete
        function checkPassageComplete() {
            const currentPassageQuestions = [];
            for (let q = 1; q <= 20; q++) {
                if (questionToPassage[q] === currentSection) {
                    currentPassageQuestions.push(q);
                }
            }
            
            const allAnswered = currentPassageQuestions.every(q => answered[q]);
            if (allAnswered && currentSection < 5) {
                document.getElementById('next-btn').textContent = 'Next Passage ‚Üí';
            }
        }

        // Navigation Functions
        function nextSection() {
            // Check if all questions in current passage are answered
            const currentPassageQuestions = [];
            for (let q = 1; q <= 20; q++) {
                if (questionToPassage[q] === currentSection) {
                    currentPassageQuestions.push(q);
                }
            }
            
            const allAnswered = currentPassageQuestions.every(q => answered[q]);
            if (!allAnswered) {
                alert(`Please answer all ${currentPassageQuestions.length} questions in this passage before continuing.`);
                return;
            }
            
            // If all 20 questions answered, show results
            if (Object.keys(answered).length === 20) {
                showResults();
                return;
            }
            
            // Move to next passage
            if (currentSection < 5) {
                document.querySelector(`[data-passage="${currentSection}"]`).classList.remove('active');
                currentSection++;
                document.querySelector(`[data-passage="${currentSection}"]`).classList.add('active');
                updateHeader();
                document.getElementById('prev-btn').disabled = false;
                window.scrollTo(0, 0);
            }
        }

        function prevSection() {
            if (currentSection > 1) {
                document.querySelector(`[data-passage="${currentSection}"]`).classList.remove('active');
                currentSection--;
                document.querySelector(`[data-passage="${currentSection}"]`).classList.add('active');
                updateHeader();
                document.getElementById('next-btn').textContent = 'Next ‚Üí';
                if (currentSection === 1) {
                    document.getElementById('prev-btn').disabled = true;
                }
                window.scrollTo(0, 0);
            }
        }

        // Update Header Display
        function updateHeader() {
            passageIndicator.textContent = `Passage ${currentSection} of 5`;
            updateScoreDisplay();
        }

        function updateScoreDisplay() {
            scoreDisplay.textContent = `${score}/${Object.keys(answered).length}`;
        }

        // Show Results Screen
        function showResults() {
            testEndTime = new Date();
            clearInterval(timerInterval);
            
            // Hide navigation and current passage
            document.getElementById('navigation').style.display = 'none';
            document.querySelector(`[data-passage="${currentSection}"]`).classList.remove('active');
            
            // Show results screen
            resultsScreen.classList.add('active');
            
            // Populate results
            document.getElementById('result-name').textContent = testerName;
            document.getElementById('result-datetime').textContent = testEndTime.toLocaleString();
            
            // Calculate duration
            const durationMs = testEndTime - testStartTime;
            const durationMins = Math.floor(durationMs / 60000);
            const durationSecs = Math.floor((durationMs % 60000) / 1000);
            document.getElementById('result-duration').textContent = 
                `${durationMins}m ${durationSecs.toString().padStart(2, '0')}s`;
            
            // Calculate and display final score
            const finalScore = `${score}/20`;
            document.getElementById('final-score').textContent = finalScore;
            document.getElementById('result-accuracy').textContent = 
                `${Math.round((score / 20) * 100)}%`;
            
            // Generate skills breakdown
            generateSkillsBreakdown();
        }

        // Generate Skills Analysis
        function generateSkillsBreakdown() {
            const skillsBreakdown = document.getElementById('skills-breakdown');
            skillsBreakdown.innerHTML = '';
            
            // Group questions by skill
            const skillGroups = {};
            for (let q = 1; q <= 20; q++) {
                const skill = answers[q].skill;
                if (!skillGroups[skill]) {
                    skillGroups[skill] = { total: 0, correct: 0, questions: [] };
                }
                skillGroups[skill].total++;
                if (answered[q] === answers[q].correct) {
                    skillGroups[skill].correct++;
                } else {
                    skillGroups[skill].questions.push(q);
                }
            }
            
            // Create skill items
            Object.entries(skillGroups).forEach(([skill, data]) => {
                const isMastered = data.correct === data.total;
                const skillItem = document.createElement('div');
                skillItem.className = `skill-item ${isMastered ? 'mastered' : 'missed'}`;
                
                let missedInfo = '';
                if (!isMastered && data.questions.length > 0) {
                    missedInfo = `<br><small style="color: #b71c1c">Missed questions: ${data.questions.join(', ')}</small>`;
                }
                
                skillItem.innerHTML = `
                    <div>
                        <strong>${skill}</strong>
                        <div style="font-size: 0.9rem; color: #616161">${data.correct}/${data.total} correct</div>
                        ${missedInfo}
                    </div>
                    <div style="font-weight: bold; color: ${isMastered ? '#388e3c' : '#d32f2f'}">
                        ${isMastered ? '‚úì Mastered' : '‚ö† Review'}
                    </div>
                `;
                skillsBreakdown.appendChild(skillItem);
            });
        }

        // Export Functions
        function copyForWeChat() {
            const durationMs = testEndTime - testStartTime;
            const durationMins = Math.floor(durationMs / 60000);
            const durationSecs = Math.floor((durationMs % 60000) / 1000);
            const accuracy = Math.round((score / 20) * 100);
            
            const text = `üìö Reading Practice 03 Results\n\n` +
                         `üë§ Name: ${testerName}\n` +
                         `üìÖ Date: ${testEndTime.toLocaleDateString()}\n` +
                         `‚è±Ô∏è Time: ${durationMins}m ${durationSecs}s\n` +
                         `‚úÖ Score: ${score}/20 (${accuracy}%)\n\n` +
                         `üìä Skills Review:\n`;
            
            // Add skills summary
            const skillGroups = {};
            for (let q = 1; q <= 20; q++) {
                const skill = answers[q].skill;
                if (!skillGroups[skill]) skillGroups[skill] = { total: 0, correct: 0 };
                skillGroups[skill].total++;
                if (answered[q] === answers[q].correct) skillGroups[skill].correct++;
            }
            
            Object.entries(skillGroups).forEach(([skill, data]) => {
                const status = data.correct === data.total ? '‚úì' : '‚ö†';
                text += `${status} ${skill}: ${data.correct}/${data.total}\n`;
            });
            
            text += `\nüí° Focus on skills marked with ‚ö† for improvement.`;
            
            // Copy to clipboard (WeChat-compatible method)
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-9999px';
            document.body.appendChild(textArea);
            textArea.select();
            
            try {
                document.execCommand('copy');
                showToast('Results copied! Paste in WeChat to share.');
            } catch (err) {
                alert('Please manually copy these results:\n\n' + text);
            }
            
            document.body.removeChild(textArea);
        }

        function emailResults() {
            const durationMs = testEndTime - testStartTime;
            const durationMins = Math.floor(durationMs / 60000);
            const durationSecs = Math.floor((durationMs % 60000) / 1000);
            const accuracy = Math.round((score / 20) * 100);
            
            let emailBody = `Reading Practice 03 Results\n\n`;
            emailBody += `Student: ${testerName}\n`;
            emailBody += `Date Completed: ${testEndTime.toLocaleString()}\n`;
            emailBody += `Time Taken: ${durationMins} minutes, ${durationSecs} seconds\n`;
            emailBody += `Score: ${score} out of 20 questions (${accuracy}% accuracy)\n\n`;
            
            emailBody += `Detailed Results:\n`;
            emailBody += `----------------\n`;
            
            // Add each question result
            for (let q = 1; q <= 20; q++) {
                const isCorrect = answered[q] === answers[q].correct;
                emailBody += `Q${q} [${answers[q].skill}]: ${isCorrect ? '‚úì Correct' : '‚úó Incorrect'}\n`;
            }
            
            emailBody += `\nSkills Analysis:\n`;
            const skillGroups = {};
            for (let q = 1; q <= 20; q++) {
                const skill = answers[q].skill;
                if (!skillGroups[skill]) skillGroups[skill] = { total: 0, correct: 0 };
                skillGroups[skill].total++;
                if (answered[q] === answers[q].correct) skillGroups[skill].correct++;
            }
            
            Object.entries(skillGroups).forEach(([skill, data]) => {
                emailBody += `- ${skill}: ${data.correct}/${data.total} correct\n`;
            });
            
            const subject = encodeURIComponent(`Reading Practice 03 Results - ${testerName}`);
            const body = encodeURIComponent(emailBody);
            
            window.location.href = `mailto:?subject=${subject}&body=${body}`;
        }

        function downloadForLMS() {
            // Create JSON object for LMS upload
            const resultsData = {
                testName: "Reading Practice 03",
                studentName: testerName,
                completedAt: testEndTime.toISOString(),
                durationSeconds: timerSeconds,
                totalQuestions: 20,
                correctAnswers: score,
                accuracyPercent: Math.round((score / 20) * 100),
                questionResults: [],
                skillsAnalysis: {}
            };
            
            // Add question results
            for (let q = 1; q <= 20; q++) {
                resultsData.questionResults.push({
                    questionNumber: q,
                    skill: answers[q].skill,
                    selectedAnswer: answered[q],
                    correctAnswer: answers[q].correct,
                    isCorrect: answered[q] === answers[q].correct
                });
            }
            
            // Add skills analysis
            const skillGroups = {};
            for (let q = 1; q <= 20; q++) {
                const skill = answers[q].skill;
                if (!skillGroups[skill]) {
                    skillGroups[skill] = { 
                        totalQuestions: 0, 
                        correctAnswers: 0,
                        missedQuestions: []
                    };
                }
                skillGroups[skill].totalQuestions++;
                if (answered[q] === answers[q].correct) {
                    skillGroups[skill].correctAnswers++;
                } else {
                    skillGroups[skill].missedQuestions.push(q);
                }
            }
            resultsData.skillsAnalysis = skillGroups;
            
            // Create and download JSON file
            const dataStr = "text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(resultsData, null, 2));
            const downloadAnchorNode = document.createElement('a');
            downloadAnchorNode.setAttribute("href", dataStr);
            downloadAnchorNode.setAttribute("download", `reading_practice_03_${testerName.replace(/\s+/g, '_')}_${new Date().toISOString().slice(0,10)}.json`);
            document.body.appendChild(downloadAnchorNode);
            downloadAnchorNode.click();
            downloadAnchorNode.remove();
            
            showToast('Results downloaded for LMS upload!');
        }

        function downloadPDF() {
            // In a real implementation, this would use a library like jsPDF
            // For this demo, we'll show an alert with instructions
            alert(`PDF generation requires additional libraries. For this demo:\n\n1. Copy your results using the "Copy for WeChat" button\n2. Paste into a document\n3. Save as PDF using your browser's print function (Ctrl+P ‚Üí Save as PDF)\n\nIn a production version, this would generate a professional PDF report automatically.`);
        }

        function showToast(message) {
            toast.textContent = message;
            toast.style.display = 'block';
            setTimeout(() => {
                toast.style.display = 'none';
            }, 3000);
        }

        // Restart Test
        function restartTest() {
            // Reset state
            currentSection = 1;
            score = 0;
            answered = {};
            timerSeconds = 0;
            testerName = '';
            
            // Clear UI
            nameInput.value = '';
            nameError.classList.remove('show');
            startBtn.disabled = true;
            document.getElementById('next-btn').textContent = 'Next ‚Üí';
            document.getElementById('prev-btn').disabled = true;
            document.getElementById('passage-indicator').textContent = 'Passage 1 of 5';
            
            // Reset questions
            document.querySelectorAll('.feedback').forEach(fb => {
                fb.style.display = 'none';
                fb.classList.remove('correct', 'incorrect');
            });
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('correct', 'incorrect');
                btn.disabled = false;
            });
            
            // Hide results, show start screen
            resultsScreen.classList.remove('active');
            startScreen.style.display = 'block';
            
            // Reset timer display
            timerDisplay.textContent = '00:00';
            scoreDisplay.textContent = '0/0';
            
            // Stop any running timer
            clearInterval(timerInterval);
        }
    </script>
</body>
</html>